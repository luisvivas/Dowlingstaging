(function(window,undefined){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context);},_jQuery=window.jQuery,_$=window.$,document=window.document,rootjQuery,quickExpr=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,isSimple=/^.[^:#\[\.,]*$/,rnotwhite=/\S/,rtrim=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,userAgent=navigator.userAgent,browserMatch,readyBound=false,readyList=[],DOMContentLoaded,toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,indexOf=Array.prototype.indexOf;jQuery.fn=jQuery.prototype={init:function(selector,context){var match,elem,ret,doc;if(!selector){return this;}
if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}
if(selector==="body"&&!context){this.context=document;this[0]=document.body;this.selector="body";this.length=1;return this;}
if(typeof selector==="string"){match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1]){doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true);}else{selector=[doc.createElement(ret[1])];}}else{ret=buildFragment([match[1]],[doc]);selector=(ret.cacheable?ret.fragment.cloneNode(true):ret.fragment).childNodes;}
return jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem){if(elem.id!==match[2]){return rootjQuery.find(selector);}
this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context&&/^\w+$/.test(selector)){this.selector=selector;this.context=document;selector=document.getElementsByTagName(selector);return jQuery.merge(this,selector);}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return jQuery(context).find(selector);}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length;},toArray:function(){return slice.call(this,0);},get:function(num){return num==null?this.toArray():(num<0?this.slice(num)[0]:this[num]);},pushStack:function(elems,name,selector){var ret=jQuery();if(jQuery.isArray(elems)){push.apply(ret,elems);}else{jQuery.merge(ret,elems);}
ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector;}else if(name){ret.selector=this.selector+"."+name+"("+selector+")";}
return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.bindReady();if(jQuery.isReady){fn.call(document,jQuery);}else if(readyList){readyList.push(fn);}
return this;},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||jQuery(null);},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options,name,src,copy;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length===i){target=this;--i;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||jQuery.isArray(copy))){var clone=src&&(jQuery.isPlainObject(src)||jQuery.isArray(src))?src:jQuery.isArray(copy)?[]:{};target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({noConflict:function(deep){window.$=_$;if(deep){window.jQuery=_jQuery;}
return jQuery;},isReady:false,ready:function(){if(!jQuery.isReady){if(!document.body){return setTimeout(jQuery.ready,13);}
jQuery.isReady=true;if(readyList){var fn,i=0;while((fn=readyList[i++])){fn.call(document,jQuery);}
readyList=null;}
if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");}}},bindReady:function(){if(readyBound){return;}
readyBound=true;if(document.readyState==="complete"){return jQuery.ready();}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false);}else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null;}catch(e){}
if(document.documentElement.doScroll&&toplevel){doScrollCheck();}}},isFunction:function(obj){return toString.call(obj)==="[object Function]";},isArray:function(obj){return toString.call(obj)==="[object Array]";},isPlainObject:function(obj){if(!obj||toString.call(obj)!=="[object Object]"||obj.nodeType||obj.setInterval){return false;}
if(obj.constructor&&!hasOwnProperty.call(obj,"constructor")&&!hasOwnProperty.call(obj.constructor.prototype,"isPrototypeOf")){return false;}
var key;for(key in obj){}
return key===undefined||hasOwnProperty.call(obj,key);},isEmptyObject:function(obj){for(var name in obj){return false;}
return true;},error:function(msg){throw msg;},parseJSON:function(data){if(typeof data!=="string"||!data){return null;}
data=jQuery.trim(data);if(/^[\],:{}\s]*$/.test(data.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return window.JSON&&window.JSON.parse?window.JSON.parse(data):(new Function("return "+data))();}else{jQuery.error("Invalid JSON: "+data);}},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(jQuery.support.scriptEval){script.appendChild(document.createTextNode(data));}else{script.text=data;}
head.insertBefore(script,head.firstChild);head.removeChild(script);}},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase();},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break;}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(var value=object[0];i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}}
return object;},trim:function(text){return(text||"").replace(rtrim,"");},makeArray:function(array,results){var ret=results||[];if(array!=null){if(array.length==null||typeof array==="string"||jQuery.isFunction(array)||(typeof array!=="function"&&array.setInterval)){push.call(ret,array);}else{jQuery.merge(ret,array);}}
return ret;},inArray:function(elem,array){if(array.indexOf){return array.indexOf(elem);}
for(var i=0,length=array.length;i<length;i++){if(array[i]===elem){return i;}}
return-1;},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;},grep:function(elems,callback,inv){var ret=[];for(var i=0,length=elems.length;i<length;i++){if(!inv!==!callback(elems[i],i)){ret.push(elems[i]);}}
return ret;},map:function(elems,callback,arg){var ret=[],value;for(var i=0,length=elems.length;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}
return ret.concat.apply([],ret);},guid:1,proxy:function(fn,proxy,thisObject){if(arguments.length===2){if(typeof proxy==="string"){thisObject=fn;fn=thisObject[proxy];proxy=undefined;}else if(proxy&&!jQuery.isFunction(proxy)){thisObject=proxy;proxy=undefined;}}
if(!proxy&&fn){proxy=function(){return fn.apply(thisObject||this,arguments);};}
if(fn){proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;}
return proxy;},uaMatch:function(ua){ua=ua.toLowerCase();var match=/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||!/compatible/.test(ua)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};},browser:{}});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version;}
if(jQuery.browser.webkit){jQuery.browser.safari=true;}
if(indexOf){jQuery.inArray=function(elem,array){return indexOf.call(array,elem);};}
rootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready();};}else if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready();}};}
function doScrollCheck(){if(jQuery.isReady){return;}
try{document.documentElement.doScroll("left");}catch(error){setTimeout(doScrollCheck,1);return;}
jQuery.ready();}
function evalScript(i,elem){if(elem.src){jQuery.ajax({url:elem.src,async:false,dataType:"script"});}else{jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||"");}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}
function access(elems,key,value,exec,fn,pass){var length=elems.length;if(typeof key==="object"){for(var k in key){access(elems,k,key[k],exec,fn,value);}
return elems;}
if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}
return elems;}
return length?fn(elems[0],key):undefined;}
function now(){return(new Date).getTime();}
(function(){jQuery.support={};var root=document.documentElement,script=document.createElement("script"),div=document.createElement("div"),id="script"+now();div.style.display="none";div.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0];if(!all||!all.length||!a){return;}
jQuery.support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/red/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:div.getElementsByTagName("input")[0].value==="on",optSelected:document.createElement("select").appendChild(document.createElement("option")).selected,parentNode:div.removeChild(div.appendChild(document.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};script.type="text/javascript";try{script.appendChild(document.createTextNode("window."+id+"=1;"));}catch(e){}
root.insertBefore(script,root.firstChild);if(window[id]){jQuery.support.scriptEval=true;delete window[id];}
try{delete script.test;}catch(e){jQuery.support.deleteExpando=false;}
root.removeChild(script);if(div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function click(){jQuery.support.noCloneEvent=false;div.detachEvent("onclick",click);});div.cloneNode(true).fireEvent("onclick");}
div=document.createElement("div");div.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var fragment=document.createDocumentFragment();fragment.appendChild(div.firstChild);jQuery.support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;jQuery(function(){var div=document.createElement("div");div.style.width=div.style.paddingLeft="1px";document.body.appendChild(div);jQuery.boxModel=jQuery.support.boxModel=div.offsetWidth===2;document.body.removeChild(div).style.display='none';div=null;});var eventSupported=function(eventName){var el=document.createElement("div");eventName="on"+eventName;var isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,"return;");isSupported=typeof el[eventName]==="function";}
el=null;return isSupported;};jQuery.support.submitBubbles=eventSupported("submit");jQuery.support.changeBubbles=eventSupported("change");root=script=div=all=a=null;})();jQuery.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var expando="jQuery"+now(),uuid=0,windowData={};jQuery.extend({cache:{},expando:expando,noData:{"embed":true,"object":true,"applet":true},data:function(elem,name,data){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){return;}
elem=elem==window?windowData:elem;var id=elem[expando],cache=jQuery.cache,thisCache;if(!id&&typeof name==="string"&&data===undefined){return null;}
if(!id){id=++uuid;}
if(typeof name==="object"){elem[expando]=id;thisCache=cache[id]=jQuery.extend(true,{},name);}else if(!cache[id]){elem[expando]=id;cache[id]={};}
thisCache=cache[id];if(data!==undefined){thisCache[name]=data;}
return typeof name==="string"?thisCache[name]:thisCache;},removeData:function(elem,name){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){return;}
elem=elem==window?windowData:elem;var id=elem[expando],cache=jQuery.cache,thisCache=cache[id];if(name){if(thisCache){delete thisCache[name];if(jQuery.isEmptyObject(thisCache)){jQuery.removeData(elem);}}}else{if(jQuery.support.deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}
delete cache[id];}}});jQuery.fn.extend({data:function(key,value){if(typeof key==="undefined"&&this.length){return jQuery.data(this[0]);}else if(typeof key==="object"){return this.each(function(){jQuery.data(this,key);});}
var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value===undefined){var data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data===undefined&&this.length){data=jQuery.data(this[0],key);}
return data===undefined&&parts[1]?this.data(parts[0]):data;}else{return this.trigger("setData"+parts[1]+"!",[parts[0],value]).each(function(){jQuery.data(this,key,value);});}},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});jQuery.extend({queue:function(elem,type,data){if(!elem){return;}
type=(type||"fx")+"queue";var q=jQuery.data(elem,type);if(!data){return q||[];}
if(!q||jQuery.isArray(data)){q=jQuery.data(elem,type,jQuery.makeArray(data));}else{q.push(data);}
return q;},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift();if(fn==="inprogress"){fn=queue.shift();}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
fn.call(elem,function(){jQuery.dequeue(elem,type);});}}});jQuery.fn.extend({queue:function(type,data){if(typeof type!=="string"){data=type;type="fx";}
if(data===undefined){return jQuery.queue(this[0],type);}
return this.each(function(i,elem){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(){var elem=this;setTimeout(function(){jQuery.dequeue(elem,type);},time);});},clearQueue:function(type){return this.queue(type||"fx",[]);}});var rclass=/[\n\t]/g,rspace=/\s+/,rreturn=/\r/g,rspecialurl=/href|src|style/,rtype=/(button|input)/i,rfocusable=/(button|input|object|select|textarea)/i,rclickable=/^(a|area)$/i,rradiocheck=/radio|checkbox/;jQuery.fn.extend({attr:function(name,value){return access(this,name,value,true,jQuery.attr);},removeAttr:function(name,fn){return this.each(function(){jQuery.attr(this,name,"");if(this.nodeType===1){this.removeAttribute(name);}});},addClass:function(value){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.addClass(value.call(this,i,self.attr("class")));});}
if(value&&typeof value==="string"){var classNames=(value||"").split(rspace);for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1){if(!elem.className){elem.className=value;}else{var className=" "+elem.className+" ",setClass=elem.className;for(var c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")<0){setClass+=" "+classNames[c];}}
elem.className=jQuery.trim(setClass);}}}}
return this;},removeClass:function(value){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.removeClass(value.call(this,i,self.attr("class")));});}
if((value&&typeof value==="string")||value===undefined){var classNames=(value||"").split(rspace);for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1&&elem.className){if(value){var className=(" "+elem.className+" ").replace(rclass," ");for(var c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
elem.className=jQuery.trim(className);}else{elem.className="";}}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.toggleClass(value.call(this,i,self.attr("class"),stateVal),stateVal);});}
return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className);}}else if(type==="undefined"||type==="boolean"){if(this.className){jQuery.data(this,"__className__",this.className);}
this.className=this.className||value===false?"":jQuery.data(this,"__className__")||"";}});},hasClass:function(selector){var className=" "+selector+" ";for(var i=0,l=this.length;i<l;i++){if((" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1){return true;}}
return false;},val:function(value){if(value===undefined){var elem=this[0];if(elem){if(jQuery.nodeName(elem,"option")){return(elem.attributes.value||{}).specified?elem.value:elem.text;}
if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null;}
for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
return values;}
if(rradiocheck.test(elem.type)&&!jQuery.support.checkOn){return elem.getAttribute("value")===null?"on":elem.value;}
return(elem.value||"").replace(rreturn,"");}
return undefined;}
var isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val=value;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,self.val());}
if(typeof val==="number"){val+="";}
if(jQuery.isArray(val)&&rradiocheck.test(this.type)){this.checked=jQuery.inArray(self.val(),val)>=0;}else if(jQuery.nodeName(this,"select")){var values=jQuery.makeArray(val);jQuery("option",this).each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){this.selectedIndex=-1;}}else{this.value=val;}});}});jQuery.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(elem,name,value,pass){if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined;}
if(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value);}
var notxml=elem.nodeType!==1||!jQuery.isXMLDoc(elem),set=value!==undefined;name=notxml&&jQuery.props[name]||name;if(elem.nodeType===1){var special=rspecialurl.test(name);if(name==="selected"&&!jQuery.support.optSelected){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}
if(name in elem&&notxml&&!special){if(set){if(name==="type"&&rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed");}
elem[name]=value;}
if(jQuery.nodeName(elem,"form")&&elem.getAttributeNode(name)){return elem.getAttributeNode(name).nodeValue;}
if(name==="tabIndex"){var attributeNode=elem.getAttributeNode("tabIndex");return attributeNode&&attributeNode.specified?attributeNode.value:rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}
return elem[name];}
if(!jQuery.support.style&&notxml&&name==="style"){if(set){elem.style.cssText=""+value;}
return elem.style.cssText;}
if(set){elem.setAttribute(name,""+value);}
var attr=!jQuery.support.hrefNormalized&&notxml&&special?elem.getAttribute(name,2):elem.getAttribute(name);return attr===null?undefined:attr;}
return jQuery.style(elem,name,value);}});var rnamespaces=/\.(.*)$/,fcleanup=function(nm){return nm.replace(/[^\w\s\.\|`]/g,function(ch){return"\\"+ch;});};jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType===3||elem.nodeType===8){return;}
if(elem.setInterval&&(elem!==window&&!elem.frameElement)){elem=window;}
var handleObjIn,handleObj;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;}
if(!handler.guid){handler.guid=jQuery.guid++;}
var elemData=jQuery.data(elem);if(!elemData){return;}
var events=elemData.events=elemData.events||{},eventHandle=elemData.handle,eventHandle;if(!eventHandle){elemData.handle=eventHandle=function(){return typeof jQuery!=="undefined"&&!jQuery.event.triggered?jQuery.event.handle.apply(eventHandle.elem,arguments):undefined;};}
eventHandle.elem=elem;types=types.split(" ");var type,i=0,namespaces;while((type=types[i++])){handleObj=handleObjIn?jQuery.extend({},handleObjIn):{handler:handler,data:data};if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();handleObj.namespace=namespaces.slice(0).sort().join(".");}else{namespaces=[];handleObj.namespace="";}
handleObj.type=type;handleObj.guid=handler.guid;var handlers=events[type],special=jQuery.event.special[type]||{};if(!handlers){handlers=events[type]=[];if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
handlers.push(handleObj);jQuery.event.global[type]=true;}
elem=null;},global:{},remove:function(elem,types,handler,pos){if(elem.nodeType===3||elem.nodeType===8){return;}
var ret,type,fn,i=0,all,namespaces,namespace,special,eventType,handleObj,origType,elemData=jQuery.data(elem),events=elemData&&elemData.events;if(!elemData||!events){return;}
if(types&&types.type){handler=types.handler;types=types.type;}
if(!types||typeof types==="string"&&types.charAt(0)==="."){types=types||"";for(type in events){jQuery.event.remove(elem,type+types);}
return;}
types=types.split(" ");while((type=types[i++])){origType=type;handleObj=null;all=type.indexOf(".")<0;namespaces=[];if(!all){namespaces=type.split(".");type=namespaces.shift();namespace=new RegExp("(^|\\.)"+
jQuery.map(namespaces.slice(0).sort(),fcleanup).join("\\.(?:.*\\.)?")+"(\\.|$)")}
eventType=events[type];if(!eventType){continue;}
if(!handler){for(var j=0;j<eventType.length;j++){handleObj=eventType[j];if(all||namespace.test(handleObj.namespace)){jQuery.event.remove(elem,origType,handleObj.handler,j);eventType.splice(j--,1);}}
continue;}
special=jQuery.event.special[type]||{};for(var j=pos||0;j<eventType.length;j++){handleObj=eventType[j];if(handler.guid===handleObj.guid){if(all||namespace.test(handleObj.namespace)){if(pos==null){eventType.splice(j--,1);}
if(special.remove){special.remove.call(elem,handleObj);}}
if(pos!=null){break;}}}
if(eventType.length===0||pos!=null&&eventType.length===1){if(!special.teardown||special.teardown.call(elem,namespaces)===false){removeEvent(elem,type,elemData.handle);}
ret=null;delete events[type];}}
if(jQuery.isEmptyObject(events)){var handle=elemData.handle;if(handle){handle.elem=null;}
delete elemData.events;delete elemData.handle;if(jQuery.isEmptyObject(elemData)){jQuery.removeData(elem);}}},trigger:function(event,data,elem){var type=event.type||event,bubbling=arguments[3];if(!bubbling){event=typeof event==="object"?event[expando]?event:jQuery.extend(jQuery.Event(type),event):jQuery.Event(type);if(type.indexOf("!")>=0){event.type=type=type.slice(0,-1);event.exclusive=true;}
if(!elem){event.stopPropagation();if(jQuery.event.global[type]){jQuery.each(jQuery.cache,function(){if(this.events&&this.events[type]){jQuery.event.trigger(event,data,this.handle.elem);}});}}
if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined;}
event.result=undefined;event.target=elem;data=jQuery.makeArray(data);data.unshift(event);}
event.currentTarget=elem;var handle=jQuery.data(elem,"handle");if(handle){handle.apply(elem,data);}
var parent=elem.parentNode||elem.ownerDocument;try{if(!(elem&&elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()])){if(elem["on"+type]&&elem["on"+type].apply(elem,data)===false){event.result=false;}}}catch(e){}
if(!event.isPropagationStopped()&&parent){jQuery.event.trigger(event,data,parent,true);}else if(!event.isDefaultPrevented()){var target=event.target,old,isClick=jQuery.nodeName(target,"a")&&type==="click",special=jQuery.event.special[type]||{};if((!special._default||special._default.call(elem,event)===false)&&!isClick&&!(target&&target.nodeName&&jQuery.noData[target.nodeName.toLowerCase()])){try{if(target[type]){old=target["on"+type];if(old){target["on"+type]=null;}
jQuery.event.triggered=true;target[type]();}}catch(e){}
if(old){target["on"+type]=old;}
jQuery.event.triggered=false;}}},handle:function(event){var all,handlers,namespaces,namespace,events;event=arguments[0]=jQuery.event.fix(event||window.event);event.currentTarget=this;all=event.type.indexOf(".")<0&&!event.exclusive;if(!all){namespaces=event.type.split(".");event.type=namespaces.shift();namespace=new RegExp("(^|\\.)"+namespaces.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)");}
var events=jQuery.data(this,"events"),handlers=events[event.type];if(events&&handlers){handlers=handlers.slice(0);for(var j=0,l=handlers.length;j<l;j++){var handleObj=handlers[j];if(all||namespace.test(handleObj.namespace)){event.handler=handleObj.handler;event.data=handleObj.data;event.handleObj=handleObj;var ret=handleObj.handler.apply(this,arguments);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}
if(event.isImmediatePropagationStopped()){break;}}}}
return event.result;},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(event){if(event[expando]){return event;}
var originalEvent=event;event=jQuery.Event(originalEvent);for(var i=this.props.length,prop;i;){prop=this.props[--i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=event.srcElement||document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;}
if(event.pageX==null&&event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(!event.which&&((event.charCode||event.charCode===0)?event.charCode:event.keyCode)){event.which=event.charCode||event.keyCode;}
if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey;}
if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)));}
return event;},guid:1E8,proxy:jQuery.proxy,special:{ready:{setup:jQuery.bindReady,teardown:jQuery.noop},live:{add:function(handleObj){jQuery.event.add(this,handleObj.origType,jQuery.extend({},handleObj,{handler:liveHandler}));},remove:function(handleObj){var remove=true,type=handleObj.origType.replace(rnamespaces,"");jQuery.each(jQuery.data(this,"events").live||[],function(){if(type===this.origType.replace(rnamespaces,"")){remove=false;return false;}});if(remove){jQuery.event.remove(this,handleObj.origType,liveHandler);}}},beforeunload:{setup:function(data,namespaces,eventHandle){if(this.setInterval){this.onbeforeunload=eventHandle;}
return false;},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}}};var removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener(type,handle,false);}:function(elem,type,handle){elem.detachEvent("on"+type,handle);};jQuery.Event=function(src){if(!this.preventDefault){return new jQuery.Event(src);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;}else{this.type=src;}
this.timeStamp=now();this[expando]=true;};function returnFalse(){return false;}
function returnTrue(){return true;}
jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.preventDefault){e.preventDefault();}
e.returnValue=false;},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var withinElement=function(event){var parent=event.relatedTarget;try{while(parent&&parent!==this){parent=parent.parentNode;}
if(parent!==this){event.type=event.data;jQuery.event.handle.apply(this,arguments);}}catch(e){}},delegate=function(event){event.type=event.data;jQuery.event.handle.apply(this,arguments);};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={setup:function(data){jQuery.event.add(this,fix,data&&data.selector?delegate:withinElement,orig);},teardown:function(data){jQuery.event.remove(this,fix,data&&data.selector?delegate:withinElement);}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(data,namespaces){if(this.nodeName.toLowerCase()!=="form"){jQuery.event.add(this,"click.specialSubmit",function(e){var elem=e.target,type=elem.type;if((type==="submit"||type==="image")&&jQuery(elem).closest("form").length){return trigger("submit",this,arguments);}});jQuery.event.add(this,"keypress.specialSubmit",function(e){var elem=e.target,type=elem.type;if((type==="text"||type==="password")&&jQuery(elem).closest("form").length&&e.keyCode===13){return trigger("submit",this,arguments);}});}else{return false;}},teardown:function(namespaces){jQuery.event.remove(this,".specialSubmit");}};}
if(!jQuery.support.changeBubbles){var formElems=/textarea|input|select/i,changeFilters,getVal=function(elem){var type=elem.type,val=elem.value;if(type==="radio"||type==="checkbox"){val=elem.checked;}else if(type==="select-multiple"){val=elem.selectedIndex>-1?jQuery.map(elem.options,function(elem){return elem.selected;}).join("-"):"";}else if(elem.nodeName.toLowerCase()==="select"){val=elem.selectedIndex;}
return val;},testChange=function testChange(e){var elem=e.target,data,val;if(!formElems.test(elem.nodeName)||elem.readOnly){return;}
data=jQuery.data(elem,"_change_data");val=getVal(elem);if(e.type!=="focusout"||elem.type!=="radio"){jQuery.data(elem,"_change_data",val);}
if(data===undefined||val===data){return;}
if(data!=null||val){e.type="change";return jQuery.event.trigger(e,arguments[1],elem);}};jQuery.event.special.change={filters:{focusout:testChange,click:function(e){var elem=e.target,type=elem.type;if(type==="radio"||type==="checkbox"||elem.nodeName.toLowerCase()==="select"){return testChange.call(this,e);}},keydown:function(e){var elem=e.target,type=elem.type;if((e.keyCode===13&&elem.nodeName.toLowerCase()!=="textarea")||(e.keyCode===32&&(type==="checkbox"||type==="radio"))||type==="select-multiple"){return testChange.call(this,e);}},beforeactivate:function(e){var elem=e.target;jQuery.data(elem,"_change_data",getVal(elem));}},setup:function(data,namespaces){if(this.type==="file"){return false;}
for(var type in changeFilters){jQuery.event.add(this,type+".specialChange",changeFilters[type]);}
return formElems.test(this.nodeName);},teardown:function(namespaces){jQuery.event.remove(this,".specialChange");return formElems.test(this.nodeName);}};changeFilters=jQuery.event.special.change.filters;}
function trigger(type,elem,args){args[0].type=type;return jQuery.event.handle.apply(elem,args);}
if(document.addEventListener){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){jQuery.event.special[fix]={setup:function(){this.addEventListener(orig,handler,true);},teardown:function(){this.removeEventListener(orig,handler,true);}};function handler(e){e=jQuery.event.fix(e);e.type=fix;return jQuery.event.handle.call(this,e);}});}
jQuery.each(["bind","one"],function(i,name){jQuery.fn[name]=function(type,data,fn){if(typeof type==="object"){for(var key in type){this[name](key,data,type[key],fn);}
return this;}
if(jQuery.isFunction(data)){fn=data;data=undefined;}
var handler=name==="one"?jQuery.proxy(fn,function(event){jQuery(this).unbind(event,handler);return fn.apply(this,arguments);}):fn;if(type==="unload"&&name!=="one"){this.one(type,data,fn);}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.add(this[i],type,handler,data);}}
return this;};});jQuery.fn.extend({unbind:function(type,fn){if(typeof type==="object"&&!type.preventDefault){for(var key in type){this.unbind(key,type[key]);}}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.remove(this[i],type,fn);}}
return this;},delegate:function(selector,types,data,fn){return this.live(types,data,fn,selector);},undelegate:function(selector,types,fn){if(arguments.length===0){return this.unbind("live");}else{return this.die(types,null,fn,selector);}},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){var event=jQuery.Event(type);event.preventDefault();event.stopPropagation();jQuery.event.trigger(event,data,this[0]);return event.result;}},toggle:function(fn){var args=arguments,i=1;while(i<args.length){jQuery.proxy(fn,args[i++]);}
return this.click(jQuery.proxy(fn,function(event){var lastToggle=(jQuery.data(this,"lastToggle"+fn.guid)||0)%i;jQuery.data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;}));},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});var liveMap={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};jQuery.each(["live","die"],function(i,name){jQuery.fn[name]=function(types,data,fn,origSelector){var type,i=0,match,namespaces,preType,selector=origSelector||this.selector,context=origSelector?this:jQuery(this.context);if(jQuery.isFunction(data)){fn=data;data=undefined;}
types=(types||"").split(" ");while((type=types[i++])!=null){match=rnamespaces.exec(type);namespaces="";if(match){namespaces=match[0];type=type.replace(rnamespaces,"");}
if(type==="hover"){types.push("mouseenter"+namespaces,"mouseleave"+namespaces);continue;}
preType=type;if(type==="focus"||type==="blur"){types.push(liveMap[type]+namespaces);type=type+namespaces;}else{type=(liveMap[type]||type)+namespaces;}
if(name==="live"){context.each(function(){jQuery.event.add(this,liveConvert(type,selector),{data:data,selector:selector,handler:fn,origType:type,origHandler:fn,preType:preType});});}else{context.unbind(liveConvert(type,selector),fn);}}
return this;}});function liveHandler(event){var stop,elems=[],selectors=[],args=arguments,related,match,handleObj,elem,j,i,l,data,events=jQuery.data(this,"events");if(event.liveFired===this||!events||!events.live||event.button&&event.type==="click"){return;}
event.liveFired=this;var live=events.live.slice(0);for(j=0;j<live.length;j++){handleObj=live[j];if(handleObj.origType.replace(rnamespaces,"")===event.type){selectors.push(handleObj.selector);}else{live.splice(j--,1);}}
match=jQuery(event.target).closest(selectors,event.currentTarget);for(i=0,l=match.length;i<l;i++){for(j=0;j<live.length;j++){handleObj=live[j];if(match[i].selector===handleObj.selector){elem=match[i].elem;related=null;if(handleObj.preType==="mouseenter"||handleObj.preType==="mouseleave"){related=jQuery(event.relatedTarget).closest(handleObj.selector)[0];}
if(!related||related!==elem){elems.push({elem:elem,handleObj:handleObj});}}}}
for(i=0,l=elems.length;i<l;i++){match=elems[i];event.currentTarget=match.elem;event.data=match.handleObj.data;event.handleObj=match.handleObj;if(match.handleObj.origHandler.apply(match.elem,args)===false){stop=false;break;}}
return stop;}
function liveConvert(type,selector){return"live."+(type&&type!=="*"?type+".":"")+selector.replace(/\./g,"`").replace(/ /g,"&");}
jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error").split(" "),function(i,name){jQuery.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name);};if(jQuery.attrFn){jQuery.attrFn[name]=true;}});if(window.attachEvent&&!window.addEventListener){window.attachEvent("onunload",function(){for(var id in jQuery.cache){if(jQuery.cache[id].handle){try{jQuery.event.remove(jQuery.cache[id].handle.elem);}catch(e){}}}});}
(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0;});var Sizzle=function(selector,context,results,seed){results=results||[];var origContext=context=context||document;if(context.nodeType!==1&&context.nodeType!==9){return[];}
if(!selector||typeof selector!=="string"){return results;}
var parts=[],m,set,checkSet,extra,prune=true,contextXML=isXML(context),soFar=selector;while((chunker.exec(""),m=chunker.exec(soFar))!==null){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break;}}
if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context);}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift();}
set=posProcess(selector,set);}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){var ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];}
if(context){var ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set);}else{prune=false;}
while(parts.length){var cur=parts.pop(),pop=cur;if(!Expr.relative[cur]){cur="";}else{pop=parts.pop();}
if(pop==null){pop=context;}
Expr.relative[cur](checkSet,pop,contextXML);}}else{checkSet=parts=[];}}
if(!checkSet){checkSet=set;}
if(!checkSet){Sizzle.error(cur||selector);}
if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet);}else if(context&&context.nodeType===1){for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&contains(context,checkSet[i]))){results.push(set[i]);}}}else{for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i]);}}}}else{makeArray(checkSet,results);}
if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results);}
return results;};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1);}}}}
return results;};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set);};Sizzle.find=function(expr,context,isXML){var set,match;if(!expr){return[];}
for(var i=0,l=Expr.order.length;i<l;i++){var type=Expr.order[i],match;if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break;}}}}
if(!set){set=context.getElementsByTagName("*");}
return{set:set,expr:expr};};Sizzle.filter=function(expr,set,inplace,not){var old=expr,result=[],curLoop=set,match,anyFound,isXMLFilter=set&&set[0]&&isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var filter=Expr.filter[type],found,item,left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue;}
if(curLoop===result){result=[];}
if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true;}else if(match===true){continue;}}
if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true;}else{curLoop[i]=false;}}else if(pass){result.push(item);anyFound=true;}}}}
if(found!==undefined){if(!inplace){curLoop=result;}
expr=expr.replace(Expr.match[type],"");if(!anyFound){return[];}
break;}}}
if(expr===old){if(anyFound==null){Sizzle.error(expr);}else{break;}}
old=expr;}
return curLoop;};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg;};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href");}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase();}
for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}
checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part;}}
if(isPartStrNotTag){Sizzle.filter(part,checkSet,true);}},">":function(checkSet,part){var isPartStr=typeof part==="string";if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false;}}}else{for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;}}
if(isPartStr){Sizzle.filter(part,checkSet,true);}}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck;}
checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML);},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck;}
checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML);}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[];}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i]);}}
return ret.length===0?null:ret;}},TAG:function(match,context){return context.getElementsByTagName(match[1]);}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match;}
for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem);}}else if(inplace){curLoop[i]=false;}}}
return false;},ID:function(match){return match[1].replace(/\\/g,"");},TAG:function(match,curLoop){return match[1].toLowerCase();},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0;}
match[0]=done++;return match;},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name];}
if(match[2]==="~="){match[4]=" "+match[4]+" ";}
return match;},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop);}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret);}
return false;}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true;}
return match;},POS:function(match){match.unshift(true);return match;}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden";},disabled:function(elem){return elem.disabled===true;},checked:function(elem){return elem.checked===true;},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true;},parent:function(elem){return!!elem.firstChild;},empty:function(elem){return!elem.firstChild;},has:function(elem,i,match){return!!Sizzle(match[3],elem).length;},header:function(elem){return/h\d/i.test(elem.nodeName);},text:function(elem){return"text"===elem.type;},radio:function(elem){return"radio"===elem.type;},checkbox:function(elem){return"checkbox"===elem.type;},file:function(elem){return"file"===elem.type;},password:function(elem){return"password"===elem.type;},submit:function(elem){return"submit"===elem.type;},image:function(elem){return"image"===elem.type;},reset:function(elem){return"reset"===elem.type;},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button";},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName);}},setFilters:{first:function(elem,i){return i===0;},last:function(elem,i,match,array){return i===array.length-1;},even:function(elem,i){return i%2===0;},odd:function(elem,i){return i%2===1;},lt:function(elem,i,match){return i<match[3]-0;},gt:function(elem,i,match){return i>match[3]-0;},nth:function(elem,i,match){return match[3]-0===i;},eq:function(elem,i,match){return match[3]-0===i;}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array);}else if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;}else if(name==="not"){var not=match[3];for(var i=0,l=not.length;i<l;i++){if(not[i]===elem){return false;}}
return true;}else{Sizzle.error("Syntax error, unrecognized expression: "+name);}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case'only':case'first':while((node=node.previousSibling)){if(node.nodeType===1){return false;}}
if(type==="first"){return true;}
node=elem;case'last':while((node=node.nextSibling)){if(node.nodeType===1){return false;}}
return true;case'nth':var first=match[2],last=match[3];if(first===1&&last===0){return true;}
var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count;}}
parent.sizcache=doneName;}
var diff=elem.nodeIndex-last;if(first===0){return diff===0;}else{return(diff%first===0&&diff/first>=0);}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match;},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match;},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1;},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false;},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array);}}}};var origPOS=Expr.match.POS;for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,function(all,num){return"\\"+(num-0+1);}));}
var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results;}
return array;};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array);}else{if(typeof array.length==="number"){for(var i=0,l=array.length;i<l;i++){ret.push(array[i]);}}else{for(var i=0;array[i];i++){ret.push(array[i]);}}}
return ret;};}
var sortOrder;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b){hasDuplicate=true;}
return a.compareDocumentPosition?-1:1;}
var ret=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(ret===0){hasDuplicate=true;}
return ret;};}else if("sourceIndex"in document.documentElement){sortOrder=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b){hasDuplicate=true;}
return a.sourceIndex?-1:1;}
var ret=a.sourceIndex-b.sourceIndex;if(ret===0){hasDuplicate=true;}
return ret;};}else if(document.createRange){sortOrder=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b){hasDuplicate=true;}
return a.ownerDocument?-1:1;}
var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);if(ret===0){hasDuplicate=true;}
return ret;};}
function getText(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue;}else if(elem.nodeType!==8){ret+=getText(elem.childNodes);}}
return ret;}
(function(){var form=document.createElement("div"),id="script"+(new Date).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[];}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match;};}
root.removeChild(form);root=form=null;})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i]);}}
results=tmp;}
return results;};}
div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2);};}
div=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div");div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return;}
Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&context.nodeType===9&&!isXML(context)){try{return makeArray(context.querySelectorAll(query),extra);}catch(e){}}
return oldSizzle(query,context,extra,seed);};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop];}
div=null;})();}
(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return;}
div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return;}
Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1]);}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i;}
if(elem.nodeName.toLowerCase()===cur){match=elem;break;}
elem=elem[dir];}
checkSet[i]=match;}}}
function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i;}
if(typeof cur!=="string"){if(elem===cur){match=true;break;}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break;}}
elem=elem[dir];}
checkSet[i]=match;}}}
var contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16);}:function(a,b){return a!==b&&(a.contains?a.contains(b):true);};var isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};var posProcess=function(selector,context){var tmpSet=[],later="",match,root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"");}
selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet);}
return Sizzle.filter(later,tmpSet);};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=getText;jQuery.isXMLDoc=isXML;jQuery.contains=contains;return;window.Sizzle=Sizzle;})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,slice=Array.prototype.slice;var winnow=function(elements,qualifier,keep){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)===keep;});}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);}else{qualifier=jQuery.filter(qualifier,filtered);}}
return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});};jQuery.fn.extend({find:function(selector){var ret=this.pushStack("","find",selector),length=0;for(var i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(var n=length;n<ret.length;n++){for(var r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}
return ret;},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector);},is:function(selector){return!!selector&&jQuery.filter(selector,this).length>0;},closest:function(selectors,context){if(jQuery.isArray(selectors)){var ret=[],cur=this[0],match,matches={},selector;if(cur&&selectors.length){for(var i=0,l=selectors.length;i<l;i++){selector=selectors[i];if(!matches[selector]){matches[selector]=jQuery.expr.match.POS.test(selector)?jQuery(selector,context||this.context):selector;}}
while(cur&&cur.ownerDocument&&cur!==context){for(selector in matches){match=matches[selector];if(match.jquery?match.index(cur)>-1:jQuery(cur).is(match)){ret.push({selector:selector,elem:cur});delete matches[selector];}}
cur=cur.parentNode;}}
return ret;}
var pos=jQuery.expr.match.POS.test(selectors)?jQuery(selectors,context||this.context):null;return this.map(function(i,cur){while(cur&&cur.ownerDocument&&cur!==context){if(pos?pos.index(cur)>-1:jQuery(cur).is(selectors)){return cur;}
cur=cur.parentNode;}
return null;});},index:function(elem){if(!elem||typeof elem==="string"){return jQuery.inArray(this[0],elem?jQuery(elem):this.parent().children());}
return jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context||this.context):jQuery.makeArray(selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},andSelf:function(){return this.add(this.prevObject);}});function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return jQuery.nth(elem,2,"nextSibling");},prev:function(elem){return jQuery.nth(elem,2,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until;}
if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret);}
ret=this.length>1?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse();}
return this.pushStack(ret,name,slice.call(arguments).join(","));};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")";}
return jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);}
cur=cur[dir];}
return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break;}}
return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}
return r;}});var rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/(<([\w:]+)[^>]*?)\/>/g,rselfClosing=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnocache=/<script|<object|<embed|<option|<style/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,fcloseTag=function(all,front,tag){return rselfClosing.test(tag)?all:front+"></"+tag+">";},wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"div<div>","</div>"];}
jQuery.fn.extend({text:function(text){if(jQuery.isFunction(text)){return this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()));});}
if(typeof text!=="object"&&text!==undefined){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text));}
return jQuery.text(this);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);});}else if(arguments.length){var set=jQuery(arguments[0]);set.push.apply(set,this.toArray());return this.pushStack(set,"before",arguments);}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}else if(arguments.length){var set=this.pushStack(this,"after",arguments);set.push.apply(set,jQuery(arguments[0]).toArray());return set;}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem]);}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}}
return this;},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));}
while(elem.firstChild){elem.removeChild(elem.firstChild);}}
return this;},clone:function(events){var ret=this.map(function(){if(!jQuery.support.noCloneEvent&&!jQuery.isXMLDoc(this)){var html=this.outerHTML,ownerDocument=this.ownerDocument;if(!html){var div=ownerDocument.createElement("div");div.appendChild(this.cloneNode(true));html=div.innerHTML;}
return jQuery.clean([html.replace(rinlinejQuery,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(rleadingWhitespace,"")],ownerDocument)[0];}else{return this.cloneNode(true);}});if(events===true){cloneCopyEvent(this,ret);cloneCopyEvent(this.find("*"),ret.find("*"));}
return ret;},html:function(value){if(value===undefined){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(rinlinejQuery,""):null;}else if(typeof value==="string"&&!rnocache.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,fcloseTag);try{for(var i=0,l=this.length;i<l;i++){if(this[i].nodeType===1){jQuery.cleanData(this[i].getElementsByTagName("*"));this[i].innerHTML=value;}}}catch(e){this.empty().append(value);}}else if(jQuery.isFunction(value)){this.each(function(i){var self=jQuery(this),old=self.html();self.empty().append(function(){return value.call(this,i,old);});});}else{this.empty().append(value);}
return this;},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}
if(typeof value!=="string"){value=jQuery(value).detach();}
return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}else{return this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value);}},detach:function(selector){return this.remove(selector,true);},domManip:function(args,table,callback){var results,first,value=args[0],scripts=[],fragment,parent;if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true);});}
if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}
if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent};}else{results=buildFragment(args,this,scripts);}
fragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild;}else{first=fragment.firstChild;}
if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length;i<l;i++){callback.call(table?root(this[i],first):this[i],i>0||results.cacheable||this.length>1?fragment.cloneNode(true):fragment);}}
if(scripts.length){jQuery.each(scripts,evalScript);}}
return this;function root(elem,cur){return jQuery.nodeName(elem,"table")?(elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody"))):elem;}}});function cloneCopyEvent(orig,ret){var i=0;ret.each(function(){if(this.nodeName!==(orig[i]&&orig[i].nodeName)){return;}
var oldData=jQuery.data(orig[i++]),curData=jQuery.data(this,oldData),events=oldData&&oldData.events;if(events){delete curData.handle;curData.events={};for(var type in events){for(var handler in events[type]){jQuery.event.add(this,type,events[type][handler],events[type][handler].data);}}}});}
function buildFragment(args,nodes,scripts){var fragment,cacheable,cacheresults,doc=(nodes&&nodes[0]?nodes[0].ownerDocument||nodes[0]:document);if(args.length===1&&typeof args[0]==="string"&&args[0].length<512&&doc===document&&!rnocache.test(args[0])&&(jQuery.support.checkClone||!rchecked.test(args[0]))){cacheable=true;cacheresults=jQuery.fragments[args[0]];if(cacheresults){if(cacheresults!==1){fragment=cacheresults;}}}
if(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,scripts);}
if(cacheable){jQuery.fragments[args[0]]=cacheresults?fragment:1;}
return{fragment:fragment,cacheable:cacheable};}
jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this;}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery.fn[original].apply(jQuery(insert[i]),elems);ret=ret.concat(elems);}
return this.pushStack(ret,name,insert.selector);}};});jQuery.extend({clean:function(elems,context,fragment,scripts){context=context||document;if(typeof context.createElement==="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;}
var ret=[];for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+="";}
if(!elem){continue;}
if(typeof elem==="string"&&!rhtml.test(elem)){elem=context.createTextNode(elem);}else if(typeof elem==="string"){elem=elem.replace(rxhtmlTag,fcloseTag);var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}
if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(var j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);}}}
if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}
elem=div.childNodes;}
if(elem.nodeType){ret.push(elem);}else{ret=jQuery.merge(ret,elem);}}
if(fragment){for(var i=0;ret[i];i++){if(scripts&&jQuery.nodeName(ret[i],"script")&&(!ret[i].type||ret[i].type.toLowerCase()==="text/javascript")){scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i]);}else{if(ret[i].nodeType===1){ret.splice.apply(ret,[i+1,0].concat(jQuery.makeArray(ret[i].getElementsByTagName("script"))));}
fragment.appendChild(ret[i]);}}}
return ret;},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){id=elem[jQuery.expando];if(id){data=cache[id];if(data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{removeEvent(elem,type,data.handle);}}}
if(deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}
delete cache[id];}}}});var rexclude=/z-?index|font-?weight|opacity|zoom|line-?height/i,ralpha=/alpha\([^)]*\)/,ropacity=/opacity=([^)]*)/,rfloat=/float/i,rdashAlpha=/-([a-z])/ig,rupper=/([A-Z])/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"],getComputedStyle=document.defaultView&&document.defaultView.getComputedStyle,styleFloat=jQuery.support.cssFloat?"cssFloat":"styleFloat",fcamelCase=function(all,letter){return letter.toUpperCase();};jQuery.fn.css=function(name,value){return access(this,name,value,true,function(elem,name,value){if(value===undefined){return jQuery.curCSS(elem,name);}
if(typeof value==="number"&&!rexclude.test(name)){value+="px";}
jQuery.style(elem,name,value);});};jQuery.extend({style:function(elem,name,value){if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined;}
if((name==="width"||name==="height")&&parseFloat(value)<0){value=undefined;}
var style=elem.style||elem,set=value!==undefined;if(!jQuery.support.opacity&&name==="opacity"){if(set){style.zoom=1;var opacity=parseInt(value,10)+""==="NaN"?"":"alpha(opacity="+value*100+")";var filter=style.filter||jQuery.curCSS(elem,"filter")||"";style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):opacity;}
return style.filter&&style.filter.indexOf("opacity=")>=0?(parseFloat(ropacity.exec(style.filter)[1])/100)+"":"";}
if(rfloat.test(name)){name=styleFloat;}
name=name.replace(rdashAlpha,fcamelCase);if(set){style[name]=value;}
return style[name];},css:function(elem,name,force,extra){if(name==="width"||name==="height"){var val,props=cssShow,which=name==="width"?cssWidth:cssHeight;function getWH(){val=name==="width"?elem.offsetWidth:elem.offsetHeight;if(extra==="border"){return;}
jQuery.each(which,function(){if(!extra){val-=parseFloat(jQuery.curCSS(elem,"padding"+this,true))||0;}
if(extra==="margin"){val+=parseFloat(jQuery.curCSS(elem,"margin"+this,true))||0;}else{val-=parseFloat(jQuery.curCSS(elem,"border"+this+"Width",true))||0;}});}
if(elem.offsetWidth!==0){getWH();}else{jQuery.swap(elem,props,getWH);}
return Math.max(0,Math.round(val));}
return jQuery.curCSS(elem,name,force);},curCSS:function(elem,name,force){var ret,style=elem.style,filter;if(!jQuery.support.opacity&&name==="opacity"&&elem.currentStyle){ret=ropacity.test(elem.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return ret===""?"1":ret;}
if(rfloat.test(name)){name=styleFloat;}
if(!force&&style&&style[name]){ret=style[name];}else if(getComputedStyle){if(rfloat.test(name)){name="float";}
name=name.replace(rupper,"-$1").toLowerCase();var defaultView=elem.ownerDocument.defaultView;if(!defaultView){return null;}
var computedStyle=defaultView.getComputedStyle(elem,null);if(computedStyle){ret=computedStyle.getPropertyValue(name);}
if(name==="opacity"&&ret===""){ret="1";}}else if(elem.currentStyle){var camelCase=name.replace(rdashAlpha,fcamelCase);ret=elem.currentStyle[name]||elem.currentStyle[camelCase];if(!rnumpx.test(ret)&&rnum.test(ret)){var left=style.left,rsLeft=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;style.left=camelCase==="fontSize"?"1em":(ret||0);ret=style.pixelLeft+"px";style.left=left;elem.runtimeStyle.left=rsLeft;}}
return ret;},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
callback.call(elem);for(var name in options){elem.style[name]=old[name];}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight,skip=elem.nodeName.toLowerCase()==="tr";return width===0&&height===0&&!skip?true:width>0&&height>0&&!skip?false:jQuery.curCSS(elem,"display")==="none";};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}
var jsc=now(),rscript=/<script(.|\s)*?\/script>/gi,rselectTextarea=/select|textarea/i,rinput=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,jsre=/=\?(&|$)/,rquery=/\?/,rts=/(\?|&)_=.*?(&|$)/,rurl=/^(\w+:)?\/\/([^\/?#]+)/,r20=/%20/g,_load=jQuery.fn.load;jQuery.fn.extend({load:function(url,params,callback){if(typeof url!=="string"){return _load.call(this,url);}else if(!this.length){return this;}
var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}
var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;params=null;}else if(typeof params==="object"){params=jQuery.param(params,jQuery.ajaxSettings.traditional);type="POST";}}
var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(res,status){if(status==="success"||status==="notmodified"){self.html(selector?jQuery("<div />").append(res.responseText.replace(rscript,"")).find(selector):res.responseText);}
if(callback){self.each(callback,[res.responseText,status,res]);}}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val};}):{name:elem.name,value:val};}).get();}});jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f);};});jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=null;}
return jQuery.ajax({type:"GET",url:url,data:data,success:callback,dataType:type});},getScript:function(url,callback){return jQuery.get(url,null,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},post:function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data={};}
return jQuery.ajax({type:"POST",url:url,data:data,success:callback,dataType:type});},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings);},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:window.XMLHttpRequest&&(window.location.protocol!=="file:"||!window.ActiveXObject)?function(){return new window.XMLHttpRequest();}:function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP");}catch(e){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(origSettings){var s=jQuery.extend(true,{},jQuery.ajaxSettings,origSettings);var jsonp,status,data,callbackContext=origSettings&&origSettings.context||s,type=s.type.toUpperCase();if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
if(s.dataType==="jsonp"){if(type==="GET"){if(!jsre.test(s.url)){s.url+=(rquery.test(s.url)?"&":"?")+(s.jsonp||"callback")+"=?";}}else if(!s.data||!jsre.test(s.data)){s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?";}
s.dataType="json";}
if(s.dataType==="json"&&(s.data&&jsre.test(s.data)||jsre.test(s.url))){jsonp=s.jsonpCallback||("jsonp"+jsc++);if(s.data){s.data=(s.data+"").replace(jsre,"="+jsonp+"$1");}
s.url=s.url.replace(jsre,"="+jsonp+"$1");s.dataType="script";window[jsonp]=window[jsonp]||function(tmp){data=tmp;success();complete();window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}
if(head){head.removeChild(script);}};}
if(s.dataType==="script"&&s.cache===null){s.cache=false;}
if(s.cache===false&&type==="GET"){var ts=now();var ret=s.url.replace(rts,"$1_="+ts+"$2");s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"");}
if(s.data&&type==="GET"){s.url+=(rquery.test(s.url)?"&":"?")+s.data;}
if(s.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart");}
var parts=rurl.exec(s.url),remote=parts&&(parts[1]&&parts[1]!==location.protocol||parts[2]!==location.host);if(s.dataType==="script"&&type==="GET"&&remote){var head=document.getElementsByTagName("head")[0]||document.documentElement;var script=document.createElement("script");script.src=s.url;if(s.scriptCharset){script.charset=s.scriptCharset;}
if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;success();complete();script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}}};}
head.insertBefore(script,head.firstChild);return undefined;}
var requestDone=false;var xhr=s.xhr();if(!xhr){return;}
if(s.username){xhr.open(type,s.url,s.async,s.username,s.password);}else{xhr.open(type,s.url,s.async);}
try{if(s.data||origSettings&&origSettings.contentType){xhr.setRequestHeader("Content-Type",s.contentType);}
if(s.ifModified){if(jQuery.lastModified[s.url]){xhr.setRequestHeader("If-Modified-Since",jQuery.lastModified[s.url]);}
if(jQuery.etag[s.url]){xhr.setRequestHeader("If-None-Match",jQuery.etag[s.url]);}}
if(!remote){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");}
xhr.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*":s.accepts._default);}catch(e){}
if(s.beforeSend&&s.beforeSend.call(callbackContext,xhr,s)===false){if(s.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop");}
xhr.abort();return false;}
if(s.global){trigger("ajaxSend",[xhr,s]);}
var onreadystatechange=xhr.onreadystatechange=function(isTimeout){if(!xhr||xhr.readyState===0||isTimeout==="abort"){if(!requestDone){complete();}
requestDone=true;if(xhr){xhr.onreadystatechange=jQuery.noop;}}else if(!requestDone&&xhr&&(xhr.readyState===4||isTimeout==="timeout")){requestDone=true;xhr.onreadystatechange=jQuery.noop;status=isTimeout==="timeout"?"timeout":!jQuery.httpSuccess(xhr)?"error":s.ifModified&&jQuery.httpNotModified(xhr,s.url)?"notmodified":"success";var errMsg;if(status==="success"){try{data=jQuery.httpData(xhr,s.dataType,s);}catch(err){status="parsererror";errMsg=err;}}
if(status==="success"||status==="notmodified"){if(!jsonp){success();}}else{jQuery.handleError(s,xhr,status,errMsg);}
complete();if(isTimeout==="timeout"){xhr.abort();}
if(s.async){xhr=null;}}};try{var oldAbort=xhr.abort;xhr.abort=function(){if(xhr){oldAbort.call(xhr);}
onreadystatechange("abort");};}catch(e){}
if(s.async&&s.timeout>0){setTimeout(function(){if(xhr&&!requestDone){onreadystatechange("timeout");}},s.timeout);}
try{xhr.send(type==="POST"||type==="PUT"||type==="DELETE"?s.data:null);}catch(e){jQuery.handleError(s,xhr,null,e);complete();}
if(!s.async){onreadystatechange();}
function success(){if(s.success){s.success.call(callbackContext,data,status,xhr);}
if(s.global){trigger("ajaxSuccess",[xhr,s]);}}
function complete(){if(s.complete){s.complete.call(callbackContext,xhr,status);}
if(s.global){trigger("ajaxComplete",[xhr,s]);}
if(s.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop");}}
function trigger(type,args){(s.context?jQuery(s.context):jQuery.event).trigger(type,args);}
return xhr;},handleError:function(s,xhr,status,e){if(s.error){s.error.call(s.context||s,xhr,status,e);}
if(s.global){(s.context?jQuery(s.context):jQuery.event).trigger("ajaxError",[xhr,s,e]);}},active:0,httpSuccess:function(xhr){try{return!xhr.status&&location.protocol==="file:"||(xhr.status>=200&&xhr.status<300)||xhr.status===304||xhr.status===1223||xhr.status===0;}catch(e){}
return false;},httpNotModified:function(xhr,url){var lastModified=xhr.getResponseHeader("Last-Modified"),etag=xhr.getResponseHeader("Etag");if(lastModified){jQuery.lastModified[url]=lastModified;}
if(etag){jQuery.etag[url]=etag;}
return xhr.status===304||xhr.status===0;},httpData:function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml=type==="xml"||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==="parsererror"){jQuery.error("parsererror");}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==="string"){if(type==="json"||!type&&ct.indexOf("json")>=0){data=jQuery.parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){jQuery.globalEval(data);}}
return data;},param:function(a,traditional){var s=[];if(traditional===undefined){traditional=jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||a.jquery){jQuery.each(a,function(){add(this.name,this.value);});}else{for(var prefix in a){buildParams(prefix,a[prefix]);}}
return s.join("&").replace(r20,"+");function buildParams(prefix,obj){if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||/\[\]$/.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"||jQuery.isArray(v)?i:"")+"]",v);}});}else if(!traditional&&obj!=null&&typeof obj==="object"){jQuery.each(obj,function(k,v){buildParams(prefix+"["+k+"]",v);});}else{add(prefix,obj);}}
function add(key,value){value=jQuery.isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);}}});var elemdisplay={},rfxtypes=/toggle|show|hide/,rfxnum=/^([+-]=)?([\d+-.]+)(.*)$/,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];jQuery.fn.extend({show:function(speed,callback){if(speed||speed===0){return this.animate(genFx("show",3),speed,callback);}else{for(var i=0,l=this.length;i<l;i++){var old=jQuery.data(this[i],"olddisplay");this[i].style.display=old||"";if(jQuery.css(this[i],"display")==="none"){var nodeName=this[i].nodeName,display;if(elemdisplay[nodeName]){display=elemdisplay[nodeName];}else{var elem=jQuery("<"+nodeName+" />").appendTo("body");display=elem.css("display");if(display==="none"){display="block";}
elem.remove();elemdisplay[nodeName]=display;}
jQuery.data(this[i],"olddisplay",display);}}
for(var j=0,k=this.length;j<k;j++){this[j].style.display=jQuery.data(this[j],"olddisplay")||"";}
return this;}},hide:function(speed,callback){if(speed||speed===0){return this.animate(genFx("hide",3),speed,callback);}else{for(var i=0,l=this.length;i<l;i++){var old=jQuery.data(this[i],"olddisplay");if(!old&&old!=="none"){jQuery.data(this[i],"olddisplay",jQuery.css(this[i],"display"));}}
for(var j=0,k=this.length;j<k;j++){this[j].style.display="none";}
return this;}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2){var bool=typeof fn==="boolean";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2)){this._toggle.apply(this,arguments);}else if(fn==null||bool){this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]();});}else{this.animate(genFx("toggle",3),fn,fn2);}
return this;},fadeTo:function(speed,to,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop)){return this.each(optall.complete);}
return this[optall.queue===false?"each":"queue"](function(){var opt=jQuery.extend({},optall),p,hidden=this.nodeType===1&&jQuery(this).is(":hidden"),self=this;for(p in prop){var name=p.replace(rdashAlpha,fcamelCase);if(p!==name){prop[name]=prop[p];delete prop[p];p=name;}
if(prop[p]==="hide"&&hidden||prop[p]==="show"&&!hidden){return opt.complete.call(this);}
if((p==="height"||p==="width")&&this.style){opt.display=jQuery.css(this,"display");opt.overflow=this.style.overflow;}
if(jQuery.isArray(prop[p])){(opt.specialEasing=opt.specialEasing||{})[p]=prop[p][1];prop[p]=prop[p][0];}}
if(opt.overflow!=null){this.style.overflow="hidden";}
opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(rfxtypes.test(val)){e[val==="toggle"?hidden?"show":"hide":val](prop);}else{var parts=rfxnum.exec(val),start=e.cur(true)||0;if(parts){var end=parseFloat(parts[2]),unit=parts[3]||"px";if(unit!=="px"){self.style[name]=(end||1)+unit;start=((end||1)/e.cur(true))*start;self.style[name]=start+unit;}
if(parts[1]){end=((parts[1]==="-="?-1:1)*end)+start;}
e.custom(start,end,unit);}else{e.custom(start,val,"");}}});return true;});},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;if(clearQueue){this.queue([]);}
this.each(function(){for(var i=timers.length-1;i>=0;i--){if(timers[i].elem===this){if(gotoEnd){timers[i](true);}
timers.splice(i,1);}}});if(!gotoEnd){this.dequeue();}
return this;}});jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(name,props){jQuery.fn[name]=function(speed,callback){return this.animate(props,speed,callback);};});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed==="object"?speed:{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:jQuery.fx.speeds[opt.duration]||jQuery.fx.speeds._default;opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false){jQuery(this).dequeue();}
if(jQuery.isFunction(opt.old)){opt.old.call(this);}};return opt;},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p;},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum;}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig){options.orig={};}}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}
(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block";}},cur:function(force){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}
var r=parseFloat(jQuery.css(this.elem,this.prop,force));return r&&r>-10000?r:parseFloat(jQuery.curCSS(this.elem,this.prop))||0;},custom:function(from,to,unit){this.startTime=now();this.start=from;this.end=to;this.unit=unit||this.unit||"px";this.now=this.start;this.pos=this.state=0;var self=this;function t(gotoEnd){return self.step(gotoEnd);}
t.elem=this.elem;if(t()&&jQuery.timers.push(t)&&!timerId){timerId=setInterval(jQuery.fx.tick,13);}},show:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var t=now(),done=true;if(gotoEnd||t>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var i in this.options.curAnim){if(this.options.curAnim[i]!==true){done=false;}}
if(done){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;var old=jQuery.data(this.elem,"olddisplay");this.elem.style.display=old?old:this.options.display;if(jQuery.css(this.elem,"display")==="none"){this.elem.style.display="block";}}
if(this.options.hide){jQuery(this.elem).hide();}
if(this.options.hide||this.options.show){for(var p in this.options.curAnim){jQuery.style(this.elem,p,this.options.orig[p]);}}
this.options.complete.call(this.elem);}
return false;}else{var n=t-this.startTime;this.state=n/this.options.duration;var specialEasing=this.options.specialEasing&&this.options.specialEasing[this.prop];var defaultEasing=this.options.easing||(jQuery.easing.swing?"swing":"linear");this.pos=jQuery.easing[specialEasing||defaultEasing](this.state,n,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update();}
return true;}};jQuery.extend(jQuery.fx,{tick:function(){var timers=jQuery.timers;for(var i=0;i<timers.length;i++){if(!timers[i]()){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}},stop:function(){clearInterval(timerId);timerId=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now);},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null){fx.elem.style[fx.prop]=(fx.prop==="width"||fx.prop==="height"?Math.max(0,fx.now):fx.now)+fx.unit;}else{fx.elem[fx.prop]=fx.now;}}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}
function genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type;});return obj;}
if("getBoundingClientRect"in document.documentElement){jQuery.fn.offset=function(options){var elem=this[0];if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
if(!elem||!elem.ownerDocument){return null;}
if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem);}
var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(self.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(self.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft)-clientLeft;return{top:top,left:left};};}else{jQuery.fn.offset=function(options){var elem=this[0];if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
if(!elem||!elem.ownerDocument){return null;}
if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem);}
jQuery.offset.initialize();var offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,computedStyle,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){break;}
computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.offset.doesNotAddBorder&&!(jQuery.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevOffsetParent=offsetParent,offsetParent=elem.offsetParent;}
if(jQuery.offset.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevComputedStyle=computedStyle;}
if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft;}
if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft);}
return{top:top,left:left};};}
jQuery.offset={initialize:function(){var body=document.body,container=document.createElement("div"),innerDiv,checkDiv,table,td,bodyMarginTop=parseFloat(jQuery.curCSS(body,"marginTop",true))||0,html="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";jQuery.extend(container.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});container.innerHTML=html;body.insertBefore(container,body.firstChild);innerDiv=container.firstChild;checkDiv=innerDiv.firstChild;td=innerDiv.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(checkDiv.offsetTop!==5);this.doesAddBorderForTableAndCells=(td.offsetTop===5);checkDiv.style.position="fixed",checkDiv.style.top="20px";this.supportsFixedPosition=(checkDiv.offsetTop===20||checkDiv.offsetTop===15);checkDiv.style.position=checkDiv.style.top="";innerDiv.style.overflow="hidden",innerDiv.style.position="relative";this.subtractsBorderForOverflowNotVisible=(checkDiv.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==bodyMarginTop);body.removeChild(container);body=container=innerDiv=checkDiv=table=td=null;jQuery.offset.initialize=jQuery.noop;},bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;jQuery.offset.initialize();if(jQuery.offset.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.curCSS(body,"marginTop",true))||0;left+=parseFloat(jQuery.curCSS(body,"marginLeft",true))||0;}
return{top:top,left:left};},setOffset:function(elem,options,i){if(/static/.test(jQuery.curCSS(elem,"position"))){elem.style.position="relative";}
var curElem=jQuery(elem),curOffset=curElem.offset(),curTop=parseInt(jQuery.curCSS(elem,"top",true),10)||0,curLeft=parseInt(jQuery.curCSS(elem,"left",true),10)||0;if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}
var props={top:(options.top-curOffset.top)+curTop,left:(options.left-curOffset.left)+curLeft};if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return null;}
var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.curCSS(elem,"marginTop",true))||0;offset.left-=parseFloat(jQuery.curCSS(elem,"marginLeft",true))||0;parentOffset.top+=parseFloat(jQuery.curCSS(offsetParent[0],"borderTopWidth",true))||0;parentOffset.left+=parseFloat(jQuery.curCSS(offsetParent[0],"borderLeftWidth",true))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!/^body|html$/i.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;}
return offsetParent;});}});jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem=this[0],win;if(!elem){return null;}
if(val!==undefined){return this.each(function(){win=getWindow(this);if(win){win.scrollTo(!i?val:jQuery(win).scrollLeft(),i?val:jQuery(win).scrollTop());}else{this[method]=val;}});}else{win=getWindow(elem);return win?("pageXOffset"in win)?win[i?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];}};});function getWindow(elem){return("scrollTo"in elem&&elem.document)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;}
jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){return this[0]?jQuery.css(this[0],type,false,"padding"):null;};jQuery.fn["outer"+name]=function(margin){return this[0]?jQuery.css(this[0],type,false,margin?"margin":"border"):null;};jQuery.fn[type]=function(size){var elem=this[0];if(!elem){return size==null?null:this;}
if(jQuery.isFunction(size)){return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()));});}
return("scrollTo"in elem&&elem.document)?elem.document.compatMode==="CSS1Compat"&&elem.document.documentElement["client"+name]||elem.document.body["client"+name]:(elem.nodeType===9)?Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]):size===undefined?jQuery.css(elem,type):this.css(type,typeof size==="string"?size:size+"px");};});window.jQuery=window.$=jQuery;})(window);(function($){$.ui=$.ui||{};if($.ui.version){return;}
$.extend($.ui,{version:"1.8.2",plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var set=instance.plugins[name];if(!set||!instance.element[0].parentNode){return;}
for(var i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b);},hasScroll:function(el,a){if($(el).css('overflow')=='hidden'){return false;}
var scroll=(a&&a=='left')?'scrollLeft':'scrollTop',has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},isOverAxis:function(x,reference,size){return(x>reference)&&(x<(reference+size));},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width);},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return typeof delay==='number'?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();(fn&&fn.call(elem));},delay);}):this._focus.apply(this,arguments);},enableSelection:function(){return this.attr('unselectable','off').css('MozUserSelect','');},disableSelection:function(){return this.attr('unselectable','on').css('MozUserSelect','none');},scrollParent:function(){var scrollParent;if(($.browser.msie&&(/(static|relative)/).test(this.css('position')))||(/absolute/).test(this.css('position'))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.curCSS(this,'position',1))&&(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}
return(/fixed/).test(this.css('position'))||!scrollParent.length?$(document):scrollParent;},zIndex:function(zIndex){if(zIndex!==undefined){return this.css('zIndex',zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css('position');if(position=='absolute'||position=='relative'||position=='fixed')
{value=parseInt(elem.css('zIndex'));if(!isNaN(value)&&value!=0){return value;}}
elem=elem.parent();}}
return 0;}});$.extend($.expr[':'],{data:function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){var nodeName=element.nodeName.toLowerCase(),tabIndex=$.attr(element,'tabindex');return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:'a'==nodeName||'area'==nodeName?element.href||!isNaN(tabIndex):!isNaN(tabIndex))&&!$(element)['area'==nodeName?'parents':'closest'](':hidden').length;},tabbable:function(element){var tabIndex=$.attr(element,'tabindex');return(isNaN(tabIndex)||tabIndex>=0)&&$(element).is(':focusable');}});})(jQuery);(function($){var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){if(!keepData){if(!selector||$.filter(selector,[this]).length){$("*",this).add(this).each(function(){$(this).triggerHandler("remove");});}}
return _remove.call($(this),selector,keepData);});};$.widget=function(name,base,prototype){var namespace=name.split(".")[0],fullName;name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName]=function(elem){return!!$.data(elem,name);};$[namespace]=$[namespace]||{};$[namespace][name]=function(options,element){if(arguments.length){this._createWidget(options,element);}};var basePrototype=new base();basePrototype.options=$.extend({},basePrototype.options);$[namespace][name].prototype=$.extend(true,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype);$.widget.bridge(name,$[namespace][name]);};$.widget.bridge=function(name,object){$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.substring(0,1)==="_"){return returnValue;}
if(isMethodCall){this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,name);if(instance){if(options){instance.option(options);}
instance._init();}else{$.data(this,name,new object(options,this));}});}
return returnValue;};};$.Widget=function(options,element){if(arguments.length){this._createWidget(options,element);}};$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(options,element){this.element=$(element).data(this.widgetName,this);this.options=$.extend(true,{},this.options,$.metadata&&$.metadata.get(element)[this.widgetName],options);var self=this;this.element.bind("remove."+this.widgetName,function(){self.destroy();});this._create();this._init();},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled");},widget:function(){return this.element;},option:function(key,value){var options=key,self=this;if(arguments.length===0){return $.extend({},self.options);}
if(typeof key==="string"){if(value===undefined){return this.options[key];}
options={};options[key]=value;}
$.each(options,function(key,value){self._setOption(key,value);});return self;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget()
[value?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",value);}
return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_trigger:function(type,event,data){var callback=this.options[type];event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();data=data||{};if(event.originalEvent){for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop];}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.call(this.element[0],event,data)===false||event.isDefaultPrevented());}};})(jQuery);(function($){$.widget("ui.mouse",{options:{cancel:':input,option',distance:1,delay:0},_mouseInit:function(){var self=this;this.element.bind('mousedown.'+this.widgetName,function(event){return self._mouseDown(event);}).bind('click.'+this.widgetName,function(event){if(self._preventClickEvent){self._preventClickEvent=false;event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind('.'+this.widgetName);},_mouseDown:function(event){event.originalEvent=event.originalEvent||{};if(event.originalEvent.mouseHandled){return;}
(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var self=this,btnIsLeft=(event.which==1),elIsCancel=(typeof this.options.cancel=="string"?$(event.target).parents().add(event.target).filter(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){self.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
this._mouseMoveDelegate=function(event){return self._mouseMove(event);};this._mouseUpDelegate=function(event){return self._mouseUp(event);};$(document).bind('mousemove.'+this.widgetName,this._mouseMoveDelegate).bind('mouseup.'+this.widgetName,this._mouseUpDelegate);($.browser.safari||event.preventDefault());event.originalEvent.mouseHandled=true;return true;},_mouseMove:function(event){if($.browser.msie&&!event.button){return this._mouseUp(event);}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){$(document).unbind('mousemove.'+this.widgetName,this._mouseMoveDelegate).unbind('mouseup.'+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(event.target==this._mouseDownEvent.target);this._mouseStop(event);}
return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(event){return this.mouseDelayMet;},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return true;}});})(jQuery);(function($){$.ui=$.ui||{};var horizontalPositions=/left|center|right/,horizontalDefault="center",verticalPositions=/top|center|bottom/,verticalDefault="center",_position=$.fn.position,_offset=$.fn.offset;$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var target=$(options.of),collision=(options.collision||"flip").split(" "),offset=options.offset?options.offset.split(" "):[0,0],targetWidth,targetHeight,basePosition;if(options.of.nodeType===9){targetWidth=target.width();targetHeight=target.height();basePosition={top:0,left:0};}else if(options.of.scrollTo&&options.of.document){targetWidth=target.width();targetHeight=target.height();basePosition={top:target.scrollTop(),left:target.scrollLeft()};}else if(options.of.preventDefault){options.at="left top";targetWidth=targetHeight=0;basePosition={top:options.of.pageY,left:options.of.pageX};}else{targetWidth=target.outerWidth();targetHeight=target.outerHeight();basePosition=target.offset();}
$.each(["my","at"],function(){var pos=(options[this]||"").split(" ");if(pos.length===1){pos=horizontalPositions.test(pos[0])?pos.concat([verticalDefault]):verticalPositions.test(pos[0])?[horizontalDefault].concat(pos):[horizontalDefault,verticalDefault];}
pos[0]=horizontalPositions.test(pos[0])?pos[0]:horizontalDefault;pos[1]=verticalPositions.test(pos[1])?pos[1]:verticalDefault;options[this]=pos;});if(collision.length===1){collision[1]=collision[0];}
offset[0]=parseInt(offset[0],10)||0;if(offset.length===1){offset[1]=offset[0];}
offset[1]=parseInt(offset[1],10)||0;if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]===horizontalDefault){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]===verticalDefault){basePosition.top+=targetHeight/2;}
basePosition.left+=offset[0];basePosition.top+=offset[1];return this.each(function(){var elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),position=$.extend({},basePosition);if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]===horizontalDefault){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]===verticalDefault){position.top-=elemHeight/2;}
position.left=parseInt(position.left);position.top=parseInt(position.top);$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,offset:offset,my:options.my,at:options.at});}});if($.fn.bgiframe){elem.bgiframe();}
elem.offset($.extend(position,{using:options.using}));});};$.ui.position={fit:{left:function(position,data){var win=$(window),over=position.left+data.elemWidth-win.width()-win.scrollLeft();position.left=over>0?position.left-over:Math.max(0,position.left);},top:function(position,data){var win=$(window),over=position.top+data.elemHeight-win.height()-win.scrollTop();position.top=over>0?position.top-over:Math.max(0,position.top);}},flip:{left:function(position,data){if(data.at[0]==="center"){return;}
var win=$(window),over=position.left+data.elemWidth-win.width()-win.scrollLeft(),myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,offset=-2*data.offset[0];position.left+=position.left<0?myOffset+data.targetWidth+offset:over>0?myOffset-data.targetWidth+offset:0;},top:function(position,data){if(data.at[1]==="center"){return;}
var win=$(window),over=position.top+data.elemHeight-win.height()-win.scrollTop(),myOffset=data.my[1]==="top"?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:-data.targetHeight,offset=-2*data.offset[1];position.top+=position.top<0?myOffset+data.targetHeight+offset:over>0?myOffset+atOffset+offset:0;}}};if(!$.offset.setOffset){$.offset.setOffset=function(elem,options){if(/static/.test($.curCSS(elem,"position"))){elem.style.position="relative";}
var curElem=$(elem),curOffset=curElem.offset(),curTop=parseInt($.curCSS(elem,"top",true),10)||0,curLeft=parseInt($.curCSS(elem,"left",true),10)||0,props={top:(options.top-curOffset.top)+curTop,left:(options.left-curOffset.left)+curLeft};if('using'in options){options.using.call(elem,props);}else{curElem.css(props);}};$.fn.offset=function(options){var elem=this[0];if(!elem||!elem.ownerDocument){return null;}
if(options){return this.each(function(){$.offset.setOffset(this,options);});}
return _offset.call(this);};}}(jQuery));(function($){$.widget("ui.draggable",$.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=='original'&&!(/^(?:r|a|f)/).test(this.element.css("position")))
this.element[0].style.position='relative';(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit();},destroy:function(){if(!this.element.data('draggable'))return;this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable"
+" ui-draggable-dragging"
+" ui-draggable-disabled");this._mouseDestroy();return this;},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).is('.ui-resizable-handle'))
return false;this.handle=this._getHandle(event);if(!this.handle)
return false;return true;},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this._cacheHelperProportions();if($.ui.ddmanager)
$.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));if(o.containment)
this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour)
$.ui.ddmanager.prepareOffsets(this,event);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(event,true);return true;},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger('drag',event,ui)===false){this._mouseUp({});return false;}
this.position=ui.position;}
if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+'px';if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+'px';if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);return false;},_mouseStop:function(event){var dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour)
dropped=$.ui.ddmanager.drop(this,event);if(this.dropped){dropped=this.dropped;this.dropped=false;}
if(!this.element[0]||!this.element[0].parentNode)
return false;if((this.options.revert=="invalid"&&!dropped)||(this.options.revert=="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){var self=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(self._trigger("stop",event)!==false){self._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}
return this;},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length?true:false;$(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==event.target)handle=true;});return handle;},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):(o.helper=='clone'?this.element.clone():this.element);if(!helper.parents('body').length)
helper.appendTo((o.appendTo=='parent'?this.element[0].parentNode:o.appendTo));if(helper[0]!=this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position")))
helper.css("position","absolute");return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj=='string'){obj=obj.split(' ');}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if('left'in obj){this.offset.click.left=obj.left+this.margins.left;}
if('right'in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if('top'in obj){this.offset.click.top=obj.top+this.margins.top;}
if('bottom'in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=='absolute'&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=='html'&&$.browser.msie))
po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var o=this.options;if(o.containment=='parent')o.containment=this.helper[0].parentNode;if(o.containment=='document'||o.containment=='window')this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment=='document'?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment=='document'?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!(/^(document|window|parent)$/).test(o.containment)&&o.containment.constructor!=Array){var ce=$(o.containment)[0];if(!ce)return;var co=$(o.containment).offset();var over=($(ce).css("overflow")!='hidden');this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}else if(o.containment.constructor==Array){this.containment=o.containment;}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top
+this.offset.relative.top*mod
+this.offset.parent.top*mod
-($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left
+this.offset.relative.left*mod
+this.offset.parent.left*mod
-($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top;}
if(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?(!(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top:(!(top-this.offset.click.top<this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?(!(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left:(!(left-this.offset.click.left<this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY
-this.offset.click.top
-this.offset.relative.top
-this.offset.parent.top
+($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX
-this.offset.click.left
-this.offset.relative.left
-this.offset.parent.left
+($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=false;},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type=="drag")this.positionAbs=this._convertPositionTo("absolute");return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.extend($.ui.draggable,{version:"1.8.2"});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,'sortable');if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable._refreshItems();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui){var inst=$(this).data("draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper=='original')
this.instance.currentItem.css({top:'auto',left:'auto'});}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui){var inst=$(this).data("draggable"),self=this;var checkPos=function(o){var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var helperTop=this.positionAbs.top,helperLeft=this.positionAbs.left;var itemHeight=o.height,itemWidth=o.width;var itemTop=o.top,itemLeft=o.left;return $.ui.isOver(helperTop+dyClick,helperLeft+dxClick,itemTop,itemLeft,itemHeight,itemWidth);};$.each(inst.sortables,function(i){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(self).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0];};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst;}
if(this.instance.currentItem)this.instance._mouseDrag(event);}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger('out',event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder)this.instance.placeholder.remove();inst._trigger("fromSortable",event);inst.dropped=false;}};});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui){var t=$('body'),o=$(this).data('draggable').options;if(t.css("cursor"))o._cursor=t.css("cursor");t.css("cursor",o.cursor);},stop:function(event,ui){var o=$(this).data('draggable').options;if(o._cursor)$('body').css("cursor",o._cursor);}});$.ui.plugin.add("draggable","iframeFix",{start:function(event,ui){var o=$(this).data('draggable').options;$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css($(this).offset()).appendTo("body");});},stop:function(event,ui){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this);});}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data('draggable').options;if(t.css("opacity"))o._opacity=t.css("opacity");t.css('opacity',o.opacity);},stop:function(event,ui){var o=$(this).data('draggable').options;if(o._opacity)$(ui.helper).css('opacity',o._opacity);}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui){var i=$(this).data("draggable");if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!='HTML')i.overflowOffset=i.scrollParent.offset();},drag:function(event,ui){var i=$(this).data("draggable"),o=i.options,scrolled=false;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!='HTML'){if(!o.axis||o.axis!='x'){if((i.overflowOffset.top+i.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity)
i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity)
i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;}
if(!o.axis||o.axis!='y'){if((i.overflowOffset.left+i.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity)
i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity)
i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(!o.axis||o.axis!='x'){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)
scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)
scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}
if(!o.axis||o.axis!='y'){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)
scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)
scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)
$.ui.ddmanager.prepareOffsets(i,event);}});$.ui.plugin.add("draggable","snap",{start:function(event,ui){var i=$(this).data("draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!=String?(o.snap.items||':data(draggable)'):o.snap).each(function(){var $t=$(this);var $o=$t.offset();if(this!=i.element[0])i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});});},drag:function(event,ui){var inst=$(this).data("draggable"),o=inst.options;var d=o.snapTolerance;var x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(var i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(!((l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d)||(l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d)||(l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d)||(l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d))){if(inst.snapElements[i].snapping)(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!='inner'){var ts=Math.abs(t-y2)<=d;var bs=Math.abs(b-y1)<=d;var ls=Math.abs(l-x2)<=d;var rs=Math.abs(r-x1)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left;}
var first=(ts||bs||ls||rs);if(o.snapMode!='outer'){var ts=Math.abs(t-y1)<=d;var bs=Math.abs(b-y2)<=d;var ls=Math.abs(l-x1)<=d;var rs=Math.abs(r-x2)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left;}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first))
(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));inst.snapElements[i].snapping=(ts||bs||ls||rs||first);};}});$.ui.plugin.add("draggable","stack",{start:function(event,ui){var o=$(this).data("draggable").options;var group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
var min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i;});this[0].style.zIndex=min+group.length;}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;if(t.css("zIndex"))o._zIndex=t.css("zIndex");t.css('zIndex',o.zIndex);},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._zIndex)$(ui.helper).css('zIndex',o._zIndex);}});})(jQuery);(function($){$.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:'*',activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:'default',tolerance:'intersect'},_create:function(){var o=this.options,accept=o.accept;this.isover=0;this.isout=1;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];$.ui.ddmanager.droppables[o.scope].push(this);(o.addClasses&&this.element.addClass("ui-droppable"));},destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];for(var i=0;i<drop.length;i++)
if(drop[i]==this)
drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this;},_setOption:function(key,value){if(key=='accept'){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}
$.Widget.prototype._setOption.apply(this,arguments);},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.addClass(this.options.activeClass);(draggable&&this._trigger('activate',event,this.ui(draggable)));},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.removeClass(this.options.activeClass);(draggable&&this._trigger('deactivate',event,this.ui(draggable)));},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass)this.element.addClass(this.options.hoverClass);this._trigger('over',event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger('out',event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return false;var childrenIntersection=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,'droppable');if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope==draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)){childrenIntersection=true;return false;}});if(childrenIntersection)return false;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.activeClass)this.element.removeClass(this.options.activeClass);if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger('drop',event,this.ui(draggable));return this.element;}
return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};}});$.extend($.ui.droppable,{version:"1.8.2"});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return false;var x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height;var l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case'fit':return(l<x1&&x2<r&&t<y1&&y2<b);break;case'intersect':return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);break;case'pointer':var draggableLeft=((draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left),draggableTop=((draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top),isOver=$.ui.isOver(draggableTop,draggableLeft,t,l,droppable.proportions.height,droppable.proportions.width);return isOver;break;case'touch':return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));break;default:return false;break;}};$.ui.ddmanager={current:null,droppables:{'default':[]},prepareOffsets:function(t,event){var m=$.ui.ddmanager.droppables[t.options.scope]||[];var type=event?event.type:null;var list=(t.currentItem||t.element).find(":data(droppable)").andSelf();droppablesLoop:for(var i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element))))continue;for(var j=0;j<list.length;j++){if(list[j]==m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop;}};m[i].visible=m[i].element.css("display")!="none";if(!m[i].visible)continue;m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight};if(type=="mousedown")m[i]._activate.call(m[i],event);}},drop:function(draggable,event){var dropped=false;$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options)return;if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance))
dropped=dropped||this._drop.call(this,event);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=1;this.isover=0;this._deactivate.call(this,event);}});return dropped;},drag:function(draggable,event){if(draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var intersects=$.ui.intersect(draggable,this,this.options.tolerance);var c=!intersects&&this.isover==1?'isout':(intersects&&this.isover==0?'isover':null);if(!c)return;var parentInstance;if(this.options.greedy){var parent=this.element.parents(':data(droppable):eq(0)');if(parent.length){parentInstance=$.data(parent[0],'droppable');parentInstance.greedyChild=(c=='isover'?1:0);}}
if(parentInstance&&c=='isover'){parentInstance['isover']=0;parentInstance['isout']=1;parentInstance._out.call(parentInstance,event);}
this[c]=1;this[c=='isout'?'isover':'isout']=0;this[c=="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c=='isout'){parentInstance['isout']=0;parentInstance['isover']=1;parentInstance._over.call(parentInstance,event);}});}};})(jQuery);(function($){$.widget("ui.resizable",$.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var self=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||'ui-resizable-helper':null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css('position'))&&$.browser.opera)
this.element.css({position:'relative',top:'auto',left:'auto'});this.element.wrap($('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css('position'),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css('top'),left:this.element.css('left')}));this.element=this.element.parent().data("resizable",this.element.data('resizable'));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css('resize');this.originalElement.css('resize','none');this._proportionallyResizeElements.push(this.originalElement.css({position:'static',zoom:1,display:'block'}));this.originalElement.css({margin:this.originalElement.css('margin')});this._proportionallyResize();}
this.handles=o.handles||(!$('.ui-resizable-handle',this.element).length?"e,s,se":{n:'.ui-resizable-n',e:'.ui-resizable-e',s:'.ui-resizable-s',w:'.ui-resizable-w',se:'.ui-resizable-se',sw:'.ui-resizable-sw',ne:'.ui-resizable-ne',nw:'.ui-resizable-nw'});if(this.handles.constructor==String){if(this.handles=='all')this.handles='n,e,s,w,se,sw,ne,nw';var n=this.handles.split(",");this.handles={};for(var i=0;i<n.length;i++){var handle=$.trim(n[i]),hname='ui-resizable-'+handle;var axis=$('<div class="ui-resizable-handle '+hname+'"></div>');if(/sw|se|ne|nw/.test(handle))axis.css({zIndex:++o.zIndex});if('se'==handle){axis.addClass('ui-icon ui-icon-gripsmall-diagonal-se');};this.handles[handle]='.ui-resizable-'+handle;this.element.append(axis);}}
this._renderAxis=function(target){target=target||this.element;for(var i in this.handles){if(this.handles[i].constructor==String)
this.handles[i]=$(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var axis=$(this.handles[i],this.element),padWrapper=0;padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();var padPos=['padding',/ne|nw|n/.test(i)?'Top':/se|sw|s/.test(i)?'Bottom':/^e$/.test(i)?'Right':'Left'].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
if(!$(this.handles[i]).length)
continue;}};this._renderAxis(this.element);this._handles=$('.ui-resizable-handle',this.element).disableSelection();this._handles.mouseover(function(){if(!self.resizing){if(this.className)
var axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);self.axis=axis&&axis[1]?axis[1]:'se';}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").hover(function(){$(this).removeClass("ui-resizable-autohide");self._handles.show();},function(){if(!self.resizing){$(this).addClass("ui-resizable-autohide");self._handles.hide();}});}
this._mouseInit();},destroy:function(){this._mouseDestroy();var _destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find('.ui-resizable-handle').remove();};if(this.elementIsWrapper){_destroy(this.element);var wrapper=this.element;wrapper.after(this.originalElement.css({position:wrapper.css('position'),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css('top'),left:wrapper.css('left')})).remove();}
this.originalElement.css('resize',this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var handle=false;for(var i in this.handles){if($(this.handles[i])[0]==event.target){handle=true;}}
return!this.options.disabled&&handle;},_mouseStart:function(event){var o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;this.documentScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()};if(el.is('.ui-draggable')||(/absolute/).test(el.css('position'))){el.css({position:'absolute',top:iniPos.top,left:iniPos.left});}
if($.browser.opera&&(/relative/).test(el.css('position')))
el.css({position:'relative',top:'auto',left:'auto'});this._renderProxy();var curleft=num(this.helper.css('left')),curtop=num(this.helper.css('top'));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio=='number')?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var cursor=$('.ui-resizable-'+this.axis).css('cursor');$('body').css('cursor',cursor=='auto'?this.axis+'-resize':cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var el=this.helper,o=this.options,props={},self=this,smp=this.originalMousePosition,a=this.axis;var dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0;var trigger=this._change[a];if(!trigger)return false;var data=trigger.apply(this,[event,dx,dy]),ie6=$.browser.msie&&$.browser.version<7,csdif=this.sizeDiff;if(this._aspectRatio||event.shiftKey)
data=this._updateRatio(data,event);data=this._respectSize(data,event);this._propagate("resize",event);el.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length)
this._proportionallyResize();this._updateCache(data);this._trigger('resize',event,this.ui());return false;},_mouseStop:function(event){this.resizing=false;var o=this.options,self=this;if(this._helper){var pr=this._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],'left')?0:self.sizeDiff.height,soffsetw=ista?0:self.sizeDiff.width;var s={width:(self.size.width-soffsetw),height:(self.size.height-soffseth)},left=(parseInt(self.element.css('left'),10)+(self.position.left-self.originalPosition.left))||null,top=(parseInt(self.element.css('top'),10)+(self.position.top-self.originalPosition.top))||null;if(!o.animate)
this.element.css($.extend(s,{top:top,left:left}));self.helper.height(self.size.height);self.helper.width(self.size.width);if(this._helper&&!o.animate)this._proportionallyResize();}
$('body').css('cursor','auto');this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper)this.helper.remove();return false;},_updateCache:function(data){var o=this.options;this.offset=this.helper.offset();if(isNumber(data.left))this.position.left=data.left;if(isNumber(data.top))this.position.top=data.top;if(isNumber(data.height))this.size.height=data.height;if(isNumber(data.width))this.size.width=data.width;},_updateRatio:function(data,event){var o=this.options,cpos=this.position,csize=this.size,a=this.axis;if(data.height)data.width=(csize.height*this.aspectRatio);else if(data.width)data.height=(csize.width/this.aspectRatio);if(a=='sw'){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a=='nw'){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data,event){var el=this.helper,o=this.options,pRatio=this._aspectRatio||event.shiftKey,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height);if(isminw)data.width=o.minWidth;if(isminh)data.height=o.minHeight;if(ismaxw)data.width=o.maxWidth;if(ismaxh)data.height=o.maxHeight;var dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height;var cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw&&cw)data.left=dw-o.minWidth;if(ismaxw&&cw)data.left=dw-o.maxWidth;if(isminh&&ch)data.top=dh-o.minHeight;if(ismaxh&&ch)data.top=dh-o.maxHeight;var isNotwh=!data.width&&!data.height;if(isNotwh&&!data.left&&data.top)data.top=null;else if(isNotwh&&!data.top&&data.left)data.left=null;return data;},_proportionallyResize:function(){var o=this.options;if(!this._proportionallyResizeElements.length)return;var element=this.helper||this.element;for(var i=0;i<this._proportionallyResizeElements.length;i++){var prel=this._proportionallyResizeElements[i];if(!this.borderDif){var b=[prel.css('borderTopWidth'),prel.css('borderRightWidth'),prel.css('borderBottomWidth'),prel.css('borderLeftWidth')],p=[prel.css('paddingTop'),prel.css('paddingRight'),prel.css('paddingBottom'),prel.css('paddingLeft')];this.borderDif=$.map(b,function(v,i){var border=parseInt(v,10)||0,padding=parseInt(p[i],10)||0;return border+padding;});}
if($.browser.msie&&!(!($(element).is(':hidden')||$(element).parents(':hidden').length)))
continue;prel.css({height:(element.height()-this.borderDif[0]-this.borderDif[2])||0,width:(element.width()-this.borderDif[1]-this.borderDif[3])||0});};},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$('<div style="overflow:hidden;"></div>');var ie6=$.browser.msie&&$.browser.version<7,ie6offset=(ie6?1:0),pxyoffset=(ie6?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+pxyoffset,height:this.element.outerHeight()+pxyoffset,position:'absolute',left:this.elementOffset.left-ie6offset+'px',top:this.elementOffset.top-ie6offset+'px',zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx,dy){return{width:this.originalSize.width+dx};},w:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.extend($.ui.resizable,{version:"1.8.2"});$.ui.plugin.add("resizable","alsoResize",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options;var _store=function(exp){$(exp).each(function(){$(this).data("resizable-alsoresize",{width:parseInt($(this).width(),10),height:parseInt($(this).height(),10),left:parseInt($(this).css('left'),10),top:parseInt($(this).css('top'),10)});});};if(typeof(o.alsoResize)=='object'&&!o.alsoResize.parentNode){if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize);}
else{$.each(o.alsoResize,function(exp,c){_store(exp);});}}else{_store(o.alsoResize);}},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,os=self.originalSize,op=self.originalPosition;var delta={height:(self.size.height-os.height)||0,width:(self.size.width-os.width)||0,top:(self.position.top-op.top)||0,left:(self.position.left-op.left)||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("resizable-alsoresize"),style={},css=c&&c.length?c:['width','height','top','left'];$.each(css||['width','height','top','left'],function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0)
style[prop]=sum||null;});if(/relative/.test(el.css('position'))&&$.browser.opera){self._revertToRelativePosition=true;el.css({position:'absolute',top:'auto',left:'auto'});}
el.css(style);});};if(typeof(o.alsoResize)=='object'&&!o.alsoResize.nodeType){$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c);});}else{_alsoResize(o.alsoResize);}},stop:function(event,ui){var self=$(this).data("resizable");if(self._revertToRelativePosition&&$.browser.opera){self._revertToRelativePosition=false;el.css({position:'relative'});}
$(this).removeData("resizable-alsoresize-start");}});$.ui.plugin.add("resizable","animate",{stop:function(event,ui){var self=$(this).data("resizable"),o=self.options;var pr=self._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],'left')?0:self.sizeDiff.height,soffsetw=ista?0:self.sizeDiff.width;var style={width:(self.size.width-soffsetw),height:(self.size.height-soffseth)},left=(parseInt(self.element.css('left'),10)+(self.position.left-self.originalPosition.left))||null,top=(parseInt(self.element.css('top'),10)+(self.position.top-self.originalPosition.top))||null;self.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(self.element.css('width'),10),height:parseInt(self.element.css('height'),10),top:parseInt(self.element.css('top'),10),left:parseInt(self.element.css('left'),10)};if(pr&&pr.length)$(pr[0]).css({width:data.width,height:data.height});self._updateCache(data);self._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options,el=self.element;var oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce)return;self.containerElement=$(ce);if(/document/.test(oc)||oc==document){self.containerOffset={left:0,top:0};self.containerPosition={left:0,top:0};self.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}
else{var element=$(ce),p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name));});self.containerOffset=element.offset();self.containerPosition=element.position();self.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};var co=self.containerOffset,ch=self.containerSize.height,cw=self.containerSize.width,width=($.ui.hasScroll(ce,"left")?ce.scrollWidth:cw),height=($.ui.hasScroll(ce)?ce.scrollHeight:ch);self.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,ps=self.containerSize,co=self.containerOffset,cs=self.size,cp=self.position,pRatio=self._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=self.containerElement;if(ce[0]!=document&&(/static/).test(ce.css('position')))cop=co;if(cp.left<(self._helper?co.left:0)){self.size.width=self.size.width+(self._helper?(self.position.left-co.left):(self.position.left-cop.left));if(pRatio)self.size.height=self.size.width/o.aspectRatio;self.position.left=o.helper?co.left:0;}
if(cp.top<(self._helper?co.top:0)){self.size.height=self.size.height+(self._helper?(self.position.top-co.top):self.position.top);if(pRatio)self.size.width=self.size.height*o.aspectRatio;self.position.top=self._helper?co.top:0;}
self.offset.left=self.parentData.left+self.position.left;self.offset.top=self.parentData.top+self.position.top;var woset=Math.abs((self._helper?self.offset.left-cop.left:(self.offset.left-cop.left))+self.sizeDiff.width),hoset=Math.abs((self._helper?self.offset.top-cop.top:(self.offset.top-co.top))+self.sizeDiff.height);var isParent=self.containerElement.get(0)==self.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(self.containerElement.css('position'));if(isParent&&isOffsetRelative)woset-=self.parentData.left;if(woset+self.size.width>=self.parentData.width){self.size.width=self.parentData.width-woset;if(pRatio)self.size.height=self.size.width/self.aspectRatio;}
if(hoset+self.size.height>=self.parentData.height){self.size.height=self.parentData.height-hoset;if(pRatio)self.size.width=self.size.height*self.aspectRatio;}},stop:function(event,ui){var self=$(this).data("resizable"),o=self.options,cp=self.position,co=self.containerOffset,cop=self.containerPosition,ce=self.containerElement;var helper=$(self.helper),ho=helper.offset(),w=helper.outerWidth()-self.sizeDiff.width,h=helper.outerHeight()-self.sizeDiff.height;if(self._helper&&!o.animate&&(/relative/).test(ce.css('position')))
$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});if(self._helper&&!o.animate&&(/static/).test(ce.css('position')))
$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}});$.ui.plugin.add("resizable","ghost",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options,cs=self.size;self.ghost=self.originalElement.clone();self.ghost.css({opacity:.25,display:'block',position:'relative',height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass('ui-resizable-ghost').addClass(typeof o.ghost=='string'?o.ghost:'');self.ghost.appendTo(self.helper);},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options;if(self.ghost)self.ghost.css({position:'relative',height:self.size.height,width:self.size.width});},stop:function(event,ui){var self=$(this).data("resizable"),o=self.options;if(self.ghost&&self.helper)self.helper.get(0).removeChild(self.ghost.get(0));}});$.ui.plugin.add("resizable","grid",{resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,cs=self.size,os=self.originalSize,op=self.originalPosition,a=self.axis,ratio=o._aspectRatio||event.shiftKey;o.grid=typeof o.grid=="number"?[o.grid,o.grid]:o.grid;var ox=Math.round((cs.width-os.width)/(o.grid[0]||1))*(o.grid[0]||1),oy=Math.round((cs.height-os.height)/(o.grid[1]||1))*(o.grid[1]||1);if(/^(se|s|e)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;}
else if(/^(ne)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.top=op.top-oy;}
else if(/^(sw)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.left=op.left-ox;}
else{self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.top=op.top-oy;self.position.left=op.left-ox;}}});var num=function(v){return parseInt(v,10)||0;};var isNumber=function(value){return!isNaN(parseInt(value,10));};})(jQuery);(function($){$.widget("ui.selectable",$.ui.mouse,{options:{appendTo:'body',autoRefresh:true,distance:0,filter:'*',tolerance:'touch'},_create:function(){var self=this;this.element.addClass("ui-selectable");this.dragged=false;var selectees;this.refresh=function(){selectees=$(self.options.filter,self.element[0]);selectees.each(function(){var $this=$(this);var pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass('ui-selected'),selecting:$this.hasClass('ui-selecting'),unselecting:$this.hasClass('ui-unselecting')});});};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit();this.helper=$("<div class='ui-selectable-helper'></div>");},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this;},_mouseStart:function(event){var self=this;this.opos=[event.pageX,event.pageY];if(this.options.disabled)
return;var options=this.options;this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"z-index":100,"position":"absolute","left":event.clientX,"top":event.clientY,"width":0,"height":0});if(options.autoRefresh){this.refresh();}
this.selectees.filter('.ui-selected').each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey){selectee.$element.removeClass('ui-selected');selectee.selected=false;selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;self._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().andSelf().each(function(){var selectee=$.data(this,"selectable-item");if(selectee){var doSelect=!event.metaKey||!selectee.$element.hasClass('ui-selected');selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){self._trigger("selecting",event,{selecting:selectee.element});}else{self._trigger("unselecting",event,{unselecting:selectee.element});}
return false;}});},_mouseDrag:function(event){var self=this;this.dragged=true;if(this.options.disabled)
return;var options=this.options;var x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){var tmp=x2;x2=x1;x1=tmp;}
if(y1>y2){var tmp=y2;y2=y1;y1=tmp;}
this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item");if(!selectee||selectee.element==self.element[0])
return;var hit=false;if(options.tolerance=='touch'){hit=(!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1));}else if(options.tolerance=='fit'){hit=(selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2);}
if(hit){if(selectee.selected){selectee.$element.removeClass('ui-selected');selectee.selected=false;}
if(selectee.unselecting){selectee.$element.removeClass('ui-unselecting');selectee.unselecting=false;}
if(!selectee.selecting){selectee.$element.addClass('ui-selecting');selectee.selecting=true;self._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if(event.metaKey&&selectee.startselected){selectee.$element.removeClass('ui-selecting');selectee.selecting=false;selectee.$element.addClass('ui-selected');selectee.selected=true;}else{selectee.$element.removeClass('ui-selecting');selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;}
self._trigger("unselecting",event,{unselecting:selectee.element});}}
if(selectee.selected){if(!event.metaKey&&!selectee.startselected){selectee.$element.removeClass('ui-selected');selectee.selected=false;selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;self._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var self=this;this.dragged=false;var options=this.options;$('.ui-unselecting',this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass('ui-unselecting');selectee.unselecting=false;selectee.startselected=false;self._trigger("unselected",event,{unselected:selectee.element});});$('.ui-selecting',this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass('ui-selecting').addClass('ui-selected');selectee.selecting=false;selectee.selected=true;selectee.startselected=true;self._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});$.extend($.ui.selectable,{version:"1.8.2"});})(jQuery);(function($){$.widget("ui.sortable",$.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:'auto',cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:'> *',opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var o=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?(/left|right/).test(this.items[0].item.css('float')):false;this.offset=this.element.offset();this._mouseInit();},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)
this.items[i].item.removeData("sortable-item");return this;},_setOption:function(key,value){if(key==="disabled"){this.options[key]=value;this.widget()
[value?"addClass":"removeClass"]("ui-sortable-disabled");}else{$.Widget.prototype._setOption.apply(this,arguments);}},_mouseCapture:function(event,overrideHandle){if(this.reverting){return false;}
if(this.options.disabled||this.options.type=='static')return false;this._refreshItems(event);var currentItem=null,self=this,nodes=$(event.target).parents().each(function(){if($.data(this,'sortable-item')==self){currentItem=$(this);return false;}});if($.data(event.target,'sortable-item')==self)currentItem=$(event.target);if(!currentItem)return false;if(this.options.handle&&!overrideHandle){var validHandle=false;$(this.options.handle,currentItem).find("*").andSelf().each(function(){if(this==event.target)validHandle=true;});if(!validHandle)return false;}
this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var o=this.options,self=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide();}
this._createPlaceholder();if(o.containment)
this._setContainment();if(o.cursor){if($('body').css("cursor"))this._storedCursor=$('body').css("cursor");$('body').css("cursor",o.cursor);}
if(o.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",o.opacity);}
if(o.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",o.zIndex);}
if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!='HTML')
this.overflowOffset=this.scrollParent.offset();this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions)
this._cacheHelperProportions();if(!noActivation){for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,self._uiHash(this));}}
if($.ui.ddmanager)
$.ui.ddmanager.current=this;if($.ui.ddmanager&&!o.dropBehaviour)
$.ui.ddmanager.prepareOffsets(this,event);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}
if(this.options.scroll){var o=this.options,scrolled=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!='HTML'){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity)
this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity)
this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity)
this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity)
this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)
scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)
scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)
scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)
scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)
$.ui.ddmanager.prepareOffsets(this,event);}
this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+'px';if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+'px';for(var i=this.items.length-1;i>=0;i--){var item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item);if(!intersection)continue;if(itemElement!=this.currentItem[0]&&this.placeholder[intersection==1?"next":"prev"]()[0]!=itemElement&&!$.ui.contains(this.placeholder[0],itemElement)&&(this.options.type=='semi-dynamic'?!$.ui.contains(this.element[0],itemElement):true)){this.direction=intersection==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}
this._trigger("change",event,this._uiHash());break;}}
this._contactContainers(event);if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);this._trigger('sort',event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event)return;if($.ui.ddmanager&&!this.options.dropBehaviour)
$.ui.ddmanager.drop(this,event);if(this.options.revert){var self=this;var cur=self.placeholder.offset();self.reverting=true;$(this.helper).animate({left:cur.left-this.offset.parent.left-self.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-self.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){self._clear(event);});}else{this._clear(event,noPropagation);}
return false;},cancel:function(){var self=this;if(this.dragging){this._mouseUp();if(this.options.helper=="original")
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else
this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,self._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,self._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode)this.helper.remove();$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}
return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||'id')||'').match(o.expression||(/(.+)[-=_](.+)/));if(res)str.push((o.key||res[1]+'[]')+'='+(o.key&&o.expression?res[1]:res[2]));});return str.join('&');},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||'id')||'');});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height;var l=item.left,r=l+item.width,t=item.top,b=t+item.height;var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var isOverElement=(y1+dyClick)>t&&(y1+dyClick)<b&&(x1+dxClick)>l&&(x1+dxClick)<r;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?'width':'height']>item[this.floating?'width':'height'])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var isOverElementHeight=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement)
return false;return this.floating?(((horizontalDirection&&horizontalDirection=="right")||verticalDirection=="down")?2:1):(verticalDirection&&(verticalDirection=="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection=="right"&&isOverRightHalf)||(horizontalDirection=="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection=="down"&&isOverBottomHalf)||(verticalDirection=="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!=0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!=0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor==String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var self=this;var items=[];var queries=[];var connectWith=this._connectWith();if(connectWith&&connected){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],'sortable');if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not('.ui-sortable-placeholder'),inst]);}};};}
queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not('.ui-sortable-placeholder'),this]);for(var i=queries.length-1;i>=0;i--){queries[i][0].each(function(){items.push(this);});};return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data(sortable-item)");for(var i=0;i<this.items.length;i++){for(var j=0;j<list.length;j++){if(list[j]==this.items[i].item[0])
this.items.splice(i,1);};};},_refreshItems:function(event){this.items=[];this.containers=[this];var items=this.items;var self=this;var queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]];var connectWith=this._connectWith();if(connectWith){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],'sortable');if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}};};}
for(var i=queries.length-1;i>=0;i--){var targetData=queries[i][1];var _queries=queries[i][0];for(var j=0,queriesLength=_queries.length;j<queriesLength;j++){var item=$(_queries[j]);item.data('sortable-item',targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});};};},refreshPositions:function(fast){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}
for(var i=this.items.length-1;i>=0;i--){var item=this.items[i];var t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}
var p=t.offset();item.left=p.left;item.top=p.top;};if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(var i=this.containers.length-1;i>=0;i--){var p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();};}
return this;},_createPlaceholder:function(that){var self=that||this,o=self.options;if(!o.placeholder||o.placeholder.constructor==String){var className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(self.currentItem[0].nodeName)).addClass(className||self.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!className)
el.style.visibility="hidden";return el;},update:function(container,p){if(className&&!o.forcePlaceholderSize)return;if(!p.height()){p.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css('paddingTop')||0,10)-parseInt(self.currentItem.css('paddingBottom')||0,10));};if(!p.width()){p.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css('paddingLeft')||0,10)-parseInt(self.currentItem.css('paddingRight')||0,10));};}};}
self.placeholder=$(o.placeholder.element.call(self.element,self.currentItem));self.currentItem.after(self.placeholder);o.placeholder.update(self,self.placeholder);},_contactContainers:function(event){var innermostContainer=null,innermostIndex=null;for(var i=this.containers.length-1;i>=0;i--){if($.ui.contains(this.currentItem[0],this.containers[i].element[0]))
continue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.ui.contains(this.containers[i].element[0],innermostContainer.element[0]))
continue;innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(!innermostContainer)return;if(this.containers.length===1){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}else if(this.currentContainer!=this.containers[innermostIndex]){var dist=10000;var itemWithLeastDistance=null;var base=this.positionAbs[this.containers[innermostIndex].floating?'left':'top'];for(var j=this.items.length-1;j>=0;j--){if(!$.ui.contains(this.containers[innermostIndex].element[0],this.items[j].item[0]))continue;var cur=this.items[j][this.containers[innermostIndex].floating?'left':'top'];if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j];}}
if(!itemWithLeastDistance&&!this.options.dropOnEmpty)
return;this.currentContainer=this.containers[innermostIndex];itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper=='clone'?this.currentItem.clone():this.currentItem);if(!helper.parents('body').length)
$(o.appendTo!='parent'?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);if(helper[0]==this.currentItem[0])
this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(helper[0].style.width==''||o.forceHelperSize)helper.width(this.currentItem.width());if(helper[0].style.height==''||o.forceHelperSize)helper.height(this.currentItem.height());return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj=='string'){obj=obj.split(' ');}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if('left'in obj){this.offset.click.left=obj.left+this.margins.left;}
if('right'in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if('top'in obj){this.offset.click.top=obj.top+this.margins.top;}
if('bottom'in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=='absolute'&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=='html'&&$.browser.msie))
po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var o=this.options;if(o.containment=='parent')o.containment=this.helper[0].parentNode;if(o.containment=='document'||o.containment=='window')this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment=='document'?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment=='document'?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!(/^(document|window|parent)$/).test(o.containment)){var ce=$(o.containment)[0];var co=$(o.containment).offset();var over=($(ce).css("overflow")!='hidden');this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top
+this.offset.relative.top*mod
+this.offset.parent.top*mod
-($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left
+this.offset.relative.left*mod
+this.offset.parent.left*mod
-($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition=='relative'&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}
var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top;}
if(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?(!(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top:(!(top-this.offset.click.top<this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?(!(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left:(!(left-this.offset.click.left<this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY
-this.offset.click.top
-this.offset.relative.top
-this.offset.parent.top
+($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX
-this.offset.click.left
-this.offset.relative.left
-this.offset.parent.left
+($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=='down'?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var self=this,counter=this.counter;window.setTimeout(function(){if(counter==self.counter)self.refreshPositions(!hardRefresh);},0);},_clear:function(event,noPropagation){this.reverting=false;var delayedTriggers=[],self=this;if(!this._noFinalSort&&this.currentItem[0].parentNode)this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS){if(this._storedCSS[i]=='auto'||this._storedCSS[i]=='static')this._storedCSS[i]='';}
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
if(this.fromOutside&&!noPropagation)delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!noPropagation)delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});if(!$.ui.contains(this.element[0],this.currentItem[0])){if(!noPropagation)delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});for(var i=this.containers.length-1;i>=0;i--){if($.ui.contains(this.containers[i].element[0],this.currentItem[0])&&!noPropagation){delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.containers[i]));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.containers[i]));}};};for(var i=this.containers.length-1;i>=0;i--){if(!noPropagation)delayedTriggers.push((function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this));};}).call(this,this.containers[i]));if(this.containers[i].containerCache.over){delayedTriggers.push((function(c){return function(event){c._trigger("out",event,this._uiHash(this));};}).call(this,this.containers[i]));this.containers[i].containerCache.over=0;}}
if(this._storedCursor)$('body').css("cursor",this._storedCursor);if(this._storedOpacity)this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=='auto'?'':this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);};this._trigger("stop",event,this._uiHash());}
return false;}
if(!noPropagation)this._trigger("beforeStop",event,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0])this.helper.remove();this.helper=null;if(!noPropagation){for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);};this._trigger("stop",event,this._uiHash());}
this.fromOutside=false;return true;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(inst){var self=inst||this;return{helper:self.helper,placeholder:self.placeholder||$([]),position:self.position,originalPosition:self.originalPosition,offset:self.positionAbs,item:self.currentItem,sender:inst?inst.element:null};}});$.extend($.ui.sortable,{version:"1.8.2"});})(jQuery);(function($){$.widget("ui.accordion",{options:{active:0,animated:'slide',autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase();}},_create:function(){var o=this.options,self=this;this.running=0;this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.element.children("li").addClass("ui-accordion-li-fix");this.headers=this.element.find(o.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){$(this).addClass('ui-state-hover');}).bind("mouseleave.accordion",function(){$(this).removeClass('ui-state-hover');}).bind("focus.accordion",function(){$(this).addClass('ui-state-focus');}).bind("blur.accordion",function(){$(this).removeClass('ui-state-focus');});this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(o.navigation){var current=this.element.find("a").filter(o.navigationFilter);if(current.length){var header=current.closest(".ui-accordion-header");if(header.length){this.active=header;}else{this.active=current.closest(".ui-accordion-content").prev();}}}
this.active=this._findActive(this.active||o.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass('ui-accordion-content-active');this._createIcons();this.resize();this.element.attr('role','tablist');this.headers.attr('role','tab').bind('keydown',function(event){return self._keydown(event);}).next().attr('role','tabpanel');this.headers.not(this.active||"").attr('aria-expanded','false').attr("tabIndex","-1").next().hide();if(!this.active.length){this.headers.eq(0).attr('tabIndex','0');}else{this.active.attr('aria-expanded','true').attr('tabIndex','0');}
if(!$.browser.safari)
this.headers.find('a').attr('tabIndex','-1');if(o.event){this.headers.bind((o.event)+".accordion",function(event){self._clickHandler.call(self,event,this);event.preventDefault();});}},_createIcons:function(){var o=this.options;if(o.icons){$("<span/>").addClass("ui-icon "+o.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(o.icons.header).toggleClass(o.icons.headerSelected);this.element.addClass("ui-accordion-icons");}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons");},destroy:function(){var o=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind('.accordion').removeData('accordion');this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex");this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var contents=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(o.autoHeight||o.fillHeight){contents.css("height","");}
return this;},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key=="active"){this.activate(value);}
if(key=="icons"){this._destroyIcons();if(value){this._createIcons();}}},_keydown:function(event){var o=this.options,keyCode=$.ui.keyCode;if(o.disabled||event.altKey||event.ctrlKey)
return;var length=this.headers.length;var currentIndex=this.headers.index(event.target);var toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._clickHandler({target:event.target},event.target);event.preventDefault();}
if(toFocus){$(event.target).attr('tabIndex','-1');$(toFocus).attr('tabIndex','0');toFocus.focus();return false;}
return true;},resize:function(){var o=this.options,maxHeight;if(o.fillSpace){if($.browser.msie){var defOverflow=this.element.parent().css('overflow');this.element.parent().css('overflow','hidden');}
maxHeight=this.element.parent().height();if($.browser.msie){this.element.parent().css('overflow',defOverflow);}
this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()));}).css('overflow','auto');}else if(o.autoHeight){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).height());}).height(maxHeight);}
return this;},activate:function(index){this.options.active=index;var active=this._findActive(index)[0];this._clickHandler({target:active},active);return this;},_findActive:function(selector){return selector?typeof selector=="number"?this.headers.filter(":eq("+selector+")"):this.headers.not(this.headers.not(selector)):selector===false?$([]):this.headers.filter(":eq(0)");},_clickHandler:function(event,target){var o=this.options;if(o.disabled)
return;if(!event.target){if(!o.collapsible)
return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(o.icons.headerSelected).addClass(o.icons.header);this.active.next().addClass('ui-accordion-content-active');var toHide=this.active.next(),data={options:o,newHeader:$([]),oldHeader:o.active,newContent:$([]),oldContent:toHide},toShow=(this.active=$([]));this._toggle(toShow,toHide,data);return;}
var clicked=$(event.currentTarget||target);var clickedIsActive=clicked[0]==this.active[0];o.active=o.collapsible&&clickedIsActive?false:$('.ui-accordion-header',this.element).index(clicked);if(this.running||(!o.collapsible&&clickedIsActive)){return;}
this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(o.icons.headerSelected).addClass(o.icons.header);if(!clickedIsActive){clicked.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(o.icons.header).addClass(o.icons.headerSelected);clicked.next().addClass('ui-accordion-content-active');}
var toShow=clicked.next(),toHide=this.active.next(),data={options:o,newHeader:clickedIsActive&&o.collapsible?$([]):clicked,oldHeader:this.active,newContent:clickedIsActive&&o.collapsible?$([]):toShow,oldContent:toHide},down=this.headers.index(this.active[0])>this.headers.index(clicked[0]);this.active=clickedIsActive?$([]):clicked;this._toggle(toShow,toHide,data,clickedIsActive,down);return;},_toggle:function(toShow,toHide,data,clickedIsActive,down){var o=this.options,self=this;this.toShow=toShow;this.toHide=toHide;this.data=data;var complete=function(){if(!self)return;return self._completed.apply(self,arguments);};this._trigger("changestart",null,this.data);this.running=toHide.size()===0?toShow.size():toHide.size();if(o.animated){var animOptions={};if(o.collapsible&&clickedIsActive){animOptions={toShow:$([]),toHide:toHide,complete:complete,down:down,autoHeight:o.autoHeight||o.fillSpace};}else{animOptions={toShow:toShow,toHide:toHide,complete:complete,down:down,autoHeight:o.autoHeight||o.fillSpace};}
if(!o.proxied){o.proxied=o.animated;}
if(!o.proxiedDuration){o.proxiedDuration=o.duration;}
o.animated=$.isFunction(o.proxied)?o.proxied(animOptions):o.proxied;o.duration=$.isFunction(o.proxiedDuration)?o.proxiedDuration(animOptions):o.proxiedDuration;var animations=$.ui.accordion.animations,duration=o.duration,easing=o.animated;if(easing&&!animations[easing]&&!$.easing[easing]){easing='slide';}
if(!animations[easing]){animations[easing]=function(options){this.slide(options,{easing:easing,duration:duration||700});};}
animations[easing](animOptions);}else{if(o.collapsible&&clickedIsActive){toShow.toggle();}else{toHide.hide();toShow.show();}
complete(true);}
toHide.prev().attr('aria-expanded','false').attr("tabIndex","-1").blur();toShow.prev().attr('aria-expanded','true').attr("tabIndex","0").focus();},_completed:function(cancel){var o=this.options;this.running=cancel?0:--this.running;if(this.running)return;if(o.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""});}
this.toHide.removeClass("ui-accordion-content-active");this._trigger('change',null,this.data);}});$.extend($.ui.accordion,{version:"1.8.2",animations:{slide:function(options,additions){options=$.extend({easing:"swing",duration:300},options,additions);if(!options.toHide.size()){options.toShow.animate({height:"show"},options);return;}
if(!options.toShow.size()){options.toHide.animate({height:"hide"},options);return;}
var overflow=options.toShow.css('overflow'),percentDone=0,showProps={},hideProps={},fxAttrs=["height","paddingTop","paddingBottom"],originalWidth;var s=options.toShow;originalWidth=s[0].style.width;s.width(parseInt(s.parent().width(),10)-parseInt(s.css("paddingLeft"),10)-parseInt(s.css("paddingRight"),10)-(parseInt(s.css("borderLeftWidth"),10)||0)-(parseInt(s.css("borderRightWidth"),10)||0));$.each(fxAttrs,function(i,prop){hideProps[prop]='hide';var parts=(''+$.css(options.toShow[0],prop)).match(/^([\d+-.]+)(.*)$/);showProps[prop]={value:parts[1],unit:parts[2]||'px'};});options.toShow.css({height:0,overflow:'hidden'}).show();options.toHide.filter(":hidden").each(options.complete).end().filter(":visible").animate(hideProps,{step:function(now,settings){if(settings.prop=='height'){percentDone=(settings.end-settings.start===0)?0:(settings.now-settings.start)/(settings.end-settings.start);}
options.toShow[0].style[settings.prop]=(percentDone*showProps[settings.prop].value)+showProps[settings.prop].unit;},duration:options.duration,easing:options.easing,complete:function(){if(!options.autoHeight){options.toShow.css("height","");}
options.toShow.css("width",originalWidth);options.toShow.css({overflow:overflow});options.complete();}});},bounceslide:function(options){this.slide(options,{easing:options.down?"easeOutBounce":"swing",duration:options.down?1000:200});}}});})(jQuery);(function($){$.widget("ui.menu",{_create:function(){var self=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(event){if(!$(event.target).closest(".ui-menu-item a").length){return;}
event.preventDefault();self.select(event);});this.refresh();},refresh:function(){var self=this;var items=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");items.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(event){self.activate(event,$(this).parent());}).mouseleave(function(){self.deactivate();});},activate:function(event,item){this.deactivate();if(this.hasScroll()){var offset=item.offset().top-this.element.offset().top,scroll=this.element.attr("scrollTop"),elementHeight=this.element.height();if(offset<0){this.element.attr("scrollTop",scroll+offset);}else if(offset>elementHeight){this.element.attr("scrollTop",scroll+offset-elementHeight+item.height());}}
this.active=item.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",event,{item:item});},deactivate:function(){if(!this.active){return;}
this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null;},next:function(event){this.move("next",".ui-menu-item:first",event);},previous:function(event){this.move("prev",".ui-menu-item:last",event);},first:function(){return this.active&&!this.active.prev().length;},last:function(){return this.active&&!this.active.next().length;},move:function(direction,edge,event){if(!this.active){this.activate(event,this.element.children(edge));return;}
var next=this.active[direction+"All"](".ui-menu-item").eq(0);if(next.length){this.activate(event,next);}else{this.activate(event,this.element.children(edge));}},nextPage:function(event){if(this.hasScroll()){if(!this.active||this.last()){this.activate(event,this.element.children(":first"));return;}
var base=this.active.offset().top,height=this.element.height(),result=this.element.children("li").filter(function(){var close=$(this).offset().top-base-height+$(this).height();return close<10&&close>-10;});if(!result.length){result=this.element.children(":last");}
this.activate(event,result);}else{this.activate(event,this.element.children(!this.active||this.last()?":first":":last"));}},previousPage:function(event){if(this.hasScroll()){if(!this.active||this.first()){this.activate(event,this.element.children(":last"));return;}
var base=this.active.offset().top,height=this.element.height();result=this.element.children("li").filter(function(){var close=$(this).offset().top-base+height-$(this).height();return close<10&&close>-10;});if(!result.length){result=this.element.children(":first");}
this.activate(event,result);}else{this.activate(event,this.element.children(!this.active||this.first()?":last":":first"));}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight");},select:function(event){this._trigger("selected",event,{item:this.active});}});}(jQuery));(function($){var lastActive,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon ui-button-text-only",formResetHandler=function(event){$(":ui-button",event.target.form).each(function(){var inst=$(this).data("button");setTimeout(function(){inst.refresh();},1);});},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){if(form){radios=$(form).find("[name='"+name+"']");}else{radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form;});}}
return radios;};$.widget("ui.button",{options:{text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",formResetHandler);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var self=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",hoverClass="ui-state-hover"+(!toggleButton?" ui-state-active":""),focusClass="ui-state-focus";if(options.label===null){options.label=this.buttonElement.html();}
if(this.element.is(":disabled")){options.disabled=true;}
this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter.button",function(){if(options.disabled){return;}
$(this).addClass("ui-state-hover");if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave.button",function(){if(options.disabled){return;}
$(this).removeClass(hoverClass);}).bind("focus.button",function(){$(this).addClass(focusClass);}).bind("blur.button",function(){$(this).removeClass(focusClass);});if(toggleButton){this.element.bind("change.button",function(){self.refresh();});}
if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(options.disabled){return false;}
$(this).toggleClass("ui-state-active");self.buttonElement.attr("aria-pressed",self.element[0].checked);});}else if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");self.buttonElement.attr("aria-pressed",true);var radio=self.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed",false);});}else{this.buttonElement.bind("mousedown.button",function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");lastActive=this;$(document).one("mouseup",function(){lastActive=null;});}).bind("mouseup.button",function(){if(options.disabled){return false;}
$(this).removeClass("ui-state-active");}).bind("keydown.button",function(event){if(options.disabled){return false;}
if(event.keyCode==$.ui.keyCode.SPACE||event.keyCode==$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}}).bind("keyup.button",function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}
this._setOption("disabled",options.disabled);},_determineButtonType:function(){if(this.element.is(":checkbox")){this.type="checkbox";}else{if(this.element.is(":radio")){this.type="radio";}else{if(this.element.is("input")){this.type="input";}else{this.type="button";}}}
if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("[for="+this.element.attr("id")+"]");this.element.addClass("ui-helper-hidden-accessible");var checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}
this.buttonElement.attr("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}
$.Widget.prototype.destroy.call(this);},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key==="disabled"){if(value){this.element.attr("disabled",true);}else{this.element.removeAttr("disabled");}}
this._resetButton();},refresh:function(){var isDisabled=this.element.is(":disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}
if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true);}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false);}});}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true);}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false);}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}
return;}
var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary;if(icons.primary||icons.secondary){buttonElement.addClass("ui-button-text-icon"+
(multipleIcons?"s":""));if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}
if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}
if(!this.options.text){buttonElement.addClass(multipleIcons?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon");if(!this.hasTitle){buttonElement.attr("title",buttonText);}}}else{buttonElement.addClass("ui-button-text-only");}}});$.widget("ui.buttonset",{_create:function(){this.element.addClass("ui-buttonset");this._init();},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}
$.Widget.prototype._setOption.apply(this,arguments);},refresh:function(){this.buttons=this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end();},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");$.Widget.prototype.destroy.call(this);}});}(jQuery));(function($){var uiDialogClasses='ui-dialog '+'ui-widget '+'ui-widget-content '+'ui-corner-all ';$.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:'close',dialogClass:'',draggable:true,hide:null,height:'auto',maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:'center',resizable:true,show:null,stack:true,title:'',width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr('title');var self=this,options=self.options,title=options.title||self.originalTitle||'&#160;',titleId=$.ui.dialog.getTitleId(self.element),uiDialog=(self.uiDialog=$('<div></div>')).appendTo(document.body).hide().addClass(uiDialogClasses+options.dialogClass).css({zIndex:options.zIndex}).attr('tabIndex',-1).css('outline',0).keydown(function(event){if(options.closeOnEscape&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){self.close(event);event.preventDefault();}}).attr({role:'dialog','aria-labelledby':titleId}).mousedown(function(event){self.moveToTop(false,event);}),uiDialogContent=self.element.show().removeAttr('title').addClass('ui-dialog-content '+'ui-widget-content').appendTo(uiDialog),uiDialogTitlebar=(self.uiDialogTitlebar=$('<div></div>')).addClass('ui-dialog-titlebar '+'ui-widget-header '+'ui-corner-all '+'ui-helper-clearfix').prependTo(uiDialog),uiDialogTitlebarClose=$('<a href="#"></a>').addClass('ui-dialog-titlebar-close '+'ui-corner-all').attr('role','button').hover(function(){uiDialogTitlebarClose.addClass('ui-state-hover');},function(){uiDialogTitlebarClose.removeClass('ui-state-hover');}).focus(function(){uiDialogTitlebarClose.addClass('ui-state-focus');}).blur(function(){uiDialogTitlebarClose.removeClass('ui-state-focus');}).click(function(event){self.close(event);return false;}).appendTo(uiDialogTitlebar),uiDialogTitlebarCloseText=(self.uiDialogTitlebarCloseText=$('<span></span>')).addClass('ui-icon '+'ui-icon-closethick').text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$('<span></span>').addClass('ui-dialog-title').attr('id',titleId).html(title).prependTo(uiDialogTitlebar);if($.isFunction(options.beforeclose)&&!$.isFunction(options.beforeClose)){options.beforeClose=options.beforeclose;}
uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection();if(options.draggable&&$.fn.draggable){self._makeDraggable();}
if(options.resizable&&$.fn.resizable){self._makeResizable();}
self._createButtons(options.buttons);self._isOpen=false;if($.fn.bgiframe){uiDialog.bgiframe();}},_init:function(){if(this.options.autoOpen){this.open();}},destroy:function(){var self=this;if(self.overlay){self.overlay.destroy();}
self.uiDialog.hide();self.element.unbind('.dialog').removeData('dialog').removeClass('ui-dialog-content ui-widget-content').hide().appendTo('body');self.uiDialog.remove();if(self.originalTitle){self.element.attr('title',self.originalTitle);}
return self;},widget:function(){return this.uiDialog;},close:function(event){var self=this,maxZ;if(false===self._trigger('beforeClose',event)){return;}
if(self.overlay){self.overlay.destroy();}
self.uiDialog.unbind('keypress.ui-dialog');self._isOpen=false;if(self.options.hide){self.uiDialog.hide(self.options.hide,function(){self._trigger('close',event);});}else{self.uiDialog.hide();self._trigger('close',event);}
$.ui.dialog.overlay.resize();if(self.options.modal){maxZ=0;$('.ui-dialog').each(function(){if(this!==self.uiDialog[0]){maxZ=Math.max(maxZ,$(this).css('z-index'));}});$.ui.dialog.maxZ=maxZ;}
return self;},isOpen:function(){return this._isOpen;},moveToTop:function(force,event){var self=this,options=self.options,saveScroll;if((options.modal&&!force)||(!options.stack&&!options.modal)){return self._trigger('focus',event);}
if(options.zIndex>$.ui.dialog.maxZ){$.ui.dialog.maxZ=options.zIndex;}
if(self.overlay){$.ui.dialog.maxZ+=1;self.overlay.$el.css('z-index',$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ);}
saveScroll={scrollTop:self.element.attr('scrollTop'),scrollLeft:self.element.attr('scrollLeft')};$.ui.dialog.maxZ+=1;self.uiDialog.css('z-index',$.ui.dialog.maxZ);self.element.attr(saveScroll);self._trigger('focus',event);return self;},open:function(){if(this._isOpen){return;}
var self=this,options=self.options,uiDialog=self.uiDialog;self.overlay=options.modal?new $.ui.dialog.overlay(self):null;if(uiDialog.next().length){uiDialog.appendTo('body');}
self._size();self._position(options.position);uiDialog.show(options.show);self.moveToTop(true);if(options.modal){uiDialog.bind('keypress.ui-dialog',function(event){if(event.keyCode!==$.ui.keyCode.TAB){return;}
var tabbables=$(':tabbable',this),first=tabbables.filter(':first'),last=tabbables.filter(':last');if(event.target===last[0]&&!event.shiftKey){first.focus(1);return false;}else if(event.target===first[0]&&event.shiftKey){last.focus(1);return false;}});}
$([]).add(uiDialog.find('.ui-dialog-content :tabbable:first')).add(uiDialog.find('.ui-dialog-buttonpane :tabbable:first')).add(uiDialog).filter(':first').focus();self._trigger('open');self._isOpen=true;return self;},_createButtons:function(buttons){var self=this,hasButtons=false,uiDialogButtonPane=$('<div></div>').addClass('ui-dialog-buttonpane '+'ui-widget-content '+'ui-helper-clearfix');self.uiDialog.find('.ui-dialog-buttonpane').remove();if(typeof buttons==='object'&&buttons!==null){$.each(buttons,function(){return!(hasButtons=true);});}
if(hasButtons){$.each(buttons,function(name,fn){var button=$('<button type="button"></button>').text(name).click(function(){fn.apply(self.element[0],arguments);}).appendTo(uiDialogButtonPane);if($.fn.button){button.button();}});uiDialogButtonPane.appendTo(self.uiDialog);}},_makeDraggable:function(){var self=this,options=self.options,doc=$(document),heightBeforeDrag;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}
self.uiDialog.draggable({cancel:'.ui-dialog-content, .ui-dialog-titlebar-close',handle:'.ui-dialog-titlebar',containment:'document',start:function(event,ui){heightBeforeDrag=options.height==="auto"?"auto":$(this).height();$(this).height($(this).height()).addClass("ui-dialog-dragging");self._trigger('dragStart',event,filteredUi(ui));},drag:function(event,ui){self._trigger('drag',event,filteredUi(ui));},stop:function(event,ui){options.position=[ui.position.left-doc.scrollLeft(),ui.position.top-doc.scrollTop()];$(this).removeClass("ui-dialog-dragging").height(heightBeforeDrag);self._trigger('dragStop',event,filteredUi(ui));$.ui.dialog.overlay.resize();}});},_makeResizable:function(handles){handles=(handles===undefined?this.options.resizable:handles);var self=this,options=self.options,position=self.uiDialog.css('position'),resizeHandles=(typeof handles==='string'?handles:'n,e,s,w,se,sw,ne,nw');function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}
self.uiDialog.resizable({cancel:'.ui-dialog-content',containment:'document',alsoResize:self.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:self._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");self._trigger('resizeStart',event,filteredUi(ui));},resize:function(event,ui){self._trigger('resize',event,filteredUi(ui));},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing");options.height=$(this).height();options.width=$(this).width();self._trigger('resizeStop',event,filteredUi(ui));$.ui.dialog.overlay.resize();}}).css('position',position).find('.ui-resizable-se').addClass('ui-icon ui-icon-grip-diagonal-se');},_minHeight:function(){var options=this.options;if(options.height==='auto'){return options.minHeight;}else{return Math.min(options.minHeight,options.height);}},_position:function(position){var myAt=[],offset=[0,0],isVisible;position=position||$.ui.dialog.prototype.options.position;if(typeof position==='string'||(typeof position==='object'&&'0'in position)){myAt=position.split?position.split(' '):[position[0],position[1]];if(myAt.length===1){myAt[1]=myAt[0];}
$.each(['left','top'],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition;}});}else if(typeof position==='object'){if('left'in position){myAt[0]='left';offset[0]=position.left;}else if('right'in position){myAt[0]='right';offset[0]=-position.right;}
if('top'in position){myAt[1]='top';offset[1]=position.top;}else if('bottom'in position){myAt[1]='bottom';offset[1]=-position.bottom;}}
isVisible=this.uiDialog.is(':visible');if(!isVisible){this.uiDialog.show();}
this.uiDialog.css({top:0,left:0}).position({my:myAt.join(' '),at:myAt.join(' '),offset:offset.join(' '),of:window,collision:'fit',using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css('top',pos.top-topOffset);}}});if(!isVisible){this.uiDialog.hide();}},_setOption:function(key,value){var self=this,uiDialog=self.uiDialog,isResizable=uiDialog.is(':data(resizable)'),resize=false;switch(key){case"beforeclose":key="beforeClose";break;case"buttons":self._createButtons(value);break;case"closeText":self.uiDialogTitlebarCloseText.text(""+value);break;case"dialogClass":uiDialog.removeClass(self.options.dialogClass).addClass(uiDialogClasses+value);break;case"disabled":if(value){uiDialog.addClass('ui-dialog-disabled');}else{uiDialog.removeClass('ui-dialog-disabled');}
break;case"draggable":if(value){self._makeDraggable();}else{uiDialog.draggable('destroy');}
break;case"height":resize=true;break;case"maxHeight":if(isResizable){uiDialog.resizable('option','maxHeight',value);}
resize=true;break;case"maxWidth":if(isResizable){uiDialog.resizable('option','maxWidth',value);}
resize=true;break;case"minHeight":if(isResizable){uiDialog.resizable('option','minHeight',value);}
resize=true;break;case"minWidth":if(isResizable){uiDialog.resizable('option','minWidth',value);}
resize=true;break;case"position":self._position(value);break;case"resizable":if(isResizable&&!value){uiDialog.resizable('destroy');}
if(isResizable&&typeof value==='string'){uiDialog.resizable('option','handles',value);}
if(!isResizable&&value!==false){self._makeResizable(value);}
break;case"title":$(".ui-dialog-title",self.uiDialogTitlebar).html(""+(value||'&#160;'));break;case"width":resize=true;break;}
$.Widget.prototype._setOption.apply(self,arguments);if(resize){self._size();}},_size:function(){var options=this.options,nonContentHeight;this.element.css({width:'auto',minHeight:0,height:0});nonContentHeight=this.uiDialog.css({height:'auto',width:options.width}).height();this.element.css(options.height==='auto'?{minHeight:Math.max(options.minHeight-nonContentHeight,0),height:'auto'}:{minHeight:0,height:Math.max(options.height-nonContentHeight,0)}).show();if(this.uiDialog.is(':data(resizable)')){this.uiDialog.resizable('option','minHeight',this._minHeight());}}});$.extend($.ui.dialog,{version:"1.8.2",uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr('id');if(!id){this.uuid+=1;id=this.uuid;}
return'ui-dialog-title-'+id;},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog);}});$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map('focus,mousedown,mouseup,keydown,keypress,click'.split(','),function(event){return event+'.dialog-overlay';}).join(' '),create:function(dialog){if(this.instances.length===0){setTimeout(function(){if($.ui.dialog.overlay.instances.length){$(document).bind($.ui.dialog.overlay.events,function(event){return($(event.target).zIndex()>=$.ui.dialog.overlay.maxZ);});}},1);$(document).bind('keydown.dialog-overlay',function(event){if(dialog.options.closeOnEscape&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){dialog.close(event);event.preventDefault();}});$(window).bind('resize.dialog-overlay',$.ui.dialog.overlay.resize);}
var $el=(this.oldInstances.pop()||$('<div></div>').addClass('ui-widget-overlay')).appendTo(document.body).css({width:this.width(),height:this.height()});if($.fn.bgiframe){$el.bgiframe();}
this.instances.push($el);return $el;},destroy:function($el){this.oldInstances.push(this.instances.splice($.inArray($el,this.instances),1)[0]);if(this.instances.length===0){$([document,window]).unbind('.dialog-overlay');}
$el.remove();var maxZ=0;$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css('z-index'));});this.maxZ=maxZ;},height:function(){var scrollHeight,offsetHeight;if($.browser.msie&&$.browser.version<7){scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(scrollHeight<offsetHeight){return $(window).height()+'px';}else{return scrollHeight+'px';}}else{return $(document).height()+'px';}},width:function(){var scrollWidth,offsetWidth;if($.browser.msie&&$.browser.version<7){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(scrollWidth<offsetWidth){return $(window).width()+'px';}else{return scrollWidth+'px';}}else{return $(document).width()+'px';}},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this);});$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()});}});$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el);}});}(jQuery));(function($){var numPages=5;$.widget("ui.slider",$.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var self=this,o=this.options;this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");if(o.disabled){this.element.addClass("ui-slider-disabled ui-disabled");}
this.range=$([]);if(o.range){if(o.range===true){this.range=$("<div></div>");if(!o.values){o.values=[this._valueMin(),this._valueMin()];}
if(o.values.length&&o.values.length!==2){o.values=[o.values[0],o.values[0]];}}else{this.range=$("<div></div>");}
this.range.appendTo(this.element).addClass("ui-slider-range");if(o.range==="min"||o.range==="max"){this.range.addClass("ui-slider-range-"+o.range);}
this.range.addClass("ui-widget-header");}
if($(".ui-slider-handle",this.element).length===0){$("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");}
if(o.values&&o.values.length){while($(".ui-slider-handle",this.element).length<o.values.length){$("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");}}
this.handles=$(".ui-slider-handle",this.element).addClass("ui-state-default"+" ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(event){event.preventDefault();}).hover(function(){if(!o.disabled){$(this).addClass("ui-state-hover");}},function(){$(this).removeClass("ui-state-hover");}).focus(function(){if(!o.disabled){$(".ui-slider .ui-state-focus").removeClass("ui-state-focus");$(this).addClass("ui-state-focus");}else{$(this).blur();}}).blur(function(){$(this).removeClass("ui-state-focus");});this.handles.each(function(i){$(this).data("index.ui-slider-handle",i);});this.handles.keydown(function(event){var ret=true,index=$(this).data("index.ui-slider-handle"),allowed,curVal,newVal,step;if(self.options.disabled){return;}
switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:ret=false;if(!self._keySliding){self._keySliding=true;$(this).addClass("ui-state-active");allowed=self._start(event,index);if(allowed===false){return;}}
break;}
step=self.options.step;if(self.options.values&&self.options.values.length){curVal=newVal=self.values(index);}else{curVal=newVal=self.value();}
switch(event.keyCode){case $.ui.keyCode.HOME:newVal=self._valueMin();break;case $.ui.keyCode.END:newVal=self._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=self._trimAlignValue(curVal+((self._valueMax()-self._valueMin())/numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=self._trimAlignValue(curVal-((self._valueMax()-self._valueMin())/numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===self._valueMax()){return;}
newVal=self._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===self._valueMin()){return;}
newVal=self._trimAlignValue(curVal-step);break;}
self._slide(event,index,newVal);return ret;}).keyup(function(event){var index=$(this).data("index.ui-slider-handle");if(self._keySliding){self._keySliding=false;self._stop(event,index);self._change(event,index);$(this).removeClass("ui-state-active");}});this._refreshValue();this._animateOff=false;},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-slider-disabled"+" ui-widget"+" ui-widget-content"+" ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this;},_mouseCapture:function(event){var o=this.options,position,normValue,distance,closestHandle,self,index,allowed,offset,mouseOverHandle;if(o.disabled){return false;}
this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;self=this;this.handles.each(function(i){var thisDistance=Math.abs(normValue-self.values(i));if(distance>thisDistance){distance=thisDistance;closestHandle=$(this);index=i;}});if(o.range===true&&this.values(1)===o.min){index+=1;closestHandle=$(this.handles[index]);}
allowed=this._start(event,index);if(allowed===false){return false;}
this._mouseSliding=true;self._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-
(closestHandle.height()/2)-
(parseInt(closestHandle.css("borderTopWidth"),10)||0)-
(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+
(parseInt(closestHandle.css("marginTop"),10)||0)};normValue=this._normValueFromMouse(position);this._slide(event,index,normValue);this._animateOff=true;return true;},_mouseStart:function(event){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}
percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}
if(percentMouse<0){percentMouse=0;}
if(this.orientation==="vertical"){percentMouse=1-percentMouse;}
valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
return this._trigger("start",event,uiHash);},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if((this.options.values.length===2&&this.options.range===true)&&((index===0&&newVal>otherVal)||(index===1&&newVal<otherVal))){newVal=otherVal;}
if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal,true);}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal);}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._trigger("stop",event,uiHash);},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._trigger("change",event,uiHash);}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);}
return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);}
if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}
this._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if($.isArray(this.options.values)){valsLength=this.options.values.length;}
$.Widget.prototype._setOption.apply(this,arguments);switch(key){case"disabled":if(value){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled");}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled");}
break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i);}
this._animateOff=false;break;}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else{vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}
return vals;}},_trimAlignValue:function(val){if(val<this._valueMin()){return this._valueMin();}
if(val>this._valueMax()){return this._valueMax();}
var step=(this.options.step>0)?this.options.step:1,valModStep=val%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}
return parseFloat(alignValue.toFixed(5));},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.options.max;},_refreshValue:function(){var oRange=this.options.range,o=this.options,self=this,animate=(!this._animateOff)?o.animate:false,valPercent,_set={},lastValPercent,value,valueMin,valueMax;if(this.options.values&&this.options.values.length){this.handles.each(function(i,j){valPercent=(self.values(i)-self._valueMin())/(self._valueMax()-self._valueMin())*100;_set[self.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(self.options.range===true){if(self.orientation==="horizontal"){if(i===0){self.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}
if(i===1){self.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){self.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}
if(i===1){self.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}
lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[self.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:(100-valPercent)+"%"},{queue:false,duration:o.animate});}
if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:(100-valPercent)+"%"},{queue:false,duration:o.animate});}}}});$.extend($.ui.slider,{version:"1.8.2"});}(jQuery));(function($){var tabId=0,listId=0;function getNextTabId(){return++tabId;}
function getNextListId(){return++listId;}
$.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:'click',fx:null,idPrefix:'ui-tabs-',load:null,panelTemplate:'<div></div>',remove:null,select:null,show:null,spinner:'<em>Loading&#8230;</em>',tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'},_create:function(){this._tabify(true);},_setOption:function(key,value){if(key=='selected'){if(this.options.collapsible&&value==this.options.selected){return;}
this.select(value);}
else{this.options[key]=value;this._tabify();}},_tabId:function(a){return a.title&&a.title.replace(/\s/g,'_').replace(/[^A-Za-z0-9\-_:\.]/g,'')||this.options.idPrefix+getNextTabId();},_sanitizeSelector:function(hash){return hash.replace(/:/g,'\\:');},_cookie:function(){var cookie=this.cookie||(this.cookie=this.options.cookie.name||'ui-tabs-'+getNextListId());return $.cookie.apply(null,[cookie].concat($.makeArray(arguments)));},_ui:function(tab,panel){return{tab:tab,panel:panel,index:this.anchors.index(tab)};},_cleanup:function(){this.lis.filter('.ui-state-processing').removeClass('ui-state-processing').find('span:data(label.tabs)').each(function(){var el=$(this);el.html(el.data('label.tabs')).removeData('label.tabs');});},_tabify:function(init){this.list=this.element.find('ol,ul').eq(0);this.lis=$('li:has(a[href])',this.list);this.anchors=this.lis.map(function(){return $('a',this)[0];});this.panels=$([]);var self=this,o=this.options;var fragmentId=/^#.+/;this.anchors.each(function(i,a){var href=$(a).attr('href');var hrefBase=href.split('#')[0],baseEl;if(hrefBase&&(hrefBase===location.toString().split('#')[0]||(baseEl=$('base')[0])&&hrefBase===baseEl.href)){href=a.hash;a.href=href;}
if(fragmentId.test(href)){self.panels=self.panels.add(self._sanitizeSelector(href));}
else if(href!='#'){$.data(a,'href.tabs',href);$.data(a,'load.tabs',href.replace(/#.*$/,''));var id=self._tabId(a);a.href='#'+id;var $panel=$('#'+id);if(!$panel.length){$panel=$(o.panelTemplate).attr('id',id).addClass('ui-tabs-panel ui-widget-content ui-corner-bottom').insertAfter(self.panels[i-1]||self.list);$panel.data('destroy.tabs',true);}
self.panels=self.panels.add($panel);}
else{o.disabled.push(i);}});if(init){this.element.addClass('ui-tabs ui-widget ui-widget-content ui-corner-all');this.list.addClass('ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all');this.lis.addClass('ui-state-default ui-corner-top');this.panels.addClass('ui-tabs-panel ui-widget-content ui-corner-bottom');if(o.selected===undefined){if(location.hash){this.anchors.each(function(i,a){if(a.hash==location.hash){o.selected=i;return false;}});}
if(typeof o.selected!='number'&&o.cookie){o.selected=parseInt(self._cookie(),10);}
if(typeof o.selected!='number'&&this.lis.filter('.ui-tabs-selected').length){o.selected=this.lis.index(this.lis.filter('.ui-tabs-selected'));}
o.selected=o.selected||(this.lis.length?0:-1);}
else if(o.selected===null){o.selected=-1;}
o.selected=((o.selected>=0&&this.anchors[o.selected])||o.selected<0)?o.selected:0;o.disabled=$.unique(o.disabled.concat($.map(this.lis.filter('.ui-state-disabled'),function(n,i){return self.lis.index(n);}))).sort();if($.inArray(o.selected,o.disabled)!=-1){o.disabled.splice($.inArray(o.selected,o.disabled),1);}
this.panels.addClass('ui-tabs-hide');this.lis.removeClass('ui-tabs-selected ui-state-active');if(o.selected>=0&&this.anchors.length){this.panels.eq(o.selected).removeClass('ui-tabs-hide');this.lis.eq(o.selected).addClass('ui-tabs-selected ui-state-active');self.element.queue("tabs",function(){self._trigger('show',null,self._ui(self.anchors[o.selected],self.panels[o.selected]));});this.load(o.selected);}
$(window).bind('unload',function(){self.lis.add(self.anchors).unbind('.tabs');self.lis=self.anchors=self.panels=null;});}
else{o.selected=this.lis.index(this.lis.filter('.ui-tabs-selected'));}
this.element[o.collapsible?'addClass':'removeClass']('ui-tabs-collapsible');if(o.cookie){this._cookie(o.selected,o.cookie);}
for(var i=0,li;(li=this.lis[i]);i++){$(li)[$.inArray(i,o.disabled)!=-1&&!$(li).hasClass('ui-tabs-selected')?'addClass':'removeClass']('ui-state-disabled');}
if(o.cache===false){this.anchors.removeData('cache.tabs');}
this.lis.add(this.anchors).unbind('.tabs');if(o.event!='mouseover'){var addState=function(state,el){if(el.is(':not(.ui-state-disabled)')){el.addClass('ui-state-'+state);}};var removeState=function(state,el){el.removeClass('ui-state-'+state);};this.lis.bind('mouseover.tabs',function(){addState('hover',$(this));});this.lis.bind('mouseout.tabs',function(){removeState('hover',$(this));});this.anchors.bind('focus.tabs',function(){addState('focus',$(this).closest('li'));});this.anchors.bind('blur.tabs',function(){removeState('focus',$(this).closest('li'));});}
var hideFx,showFx;if(o.fx){if($.isArray(o.fx)){hideFx=o.fx[0];showFx=o.fx[1];}
else{hideFx=showFx=o.fx;}}
function resetStyle($el,fx){$el.css({display:''});if(!$.support.opacity&&fx.opacity){$el[0].style.removeAttribute('filter');}}
var showTab=showFx?function(clicked,$show){$(clicked).closest('li').addClass('ui-tabs-selected ui-state-active');$show.hide().removeClass('ui-tabs-hide').animate(showFx,showFx.duration||'normal',function(){resetStyle($show,showFx);self._trigger('show',null,self._ui(clicked,$show[0]));});}:function(clicked,$show){$(clicked).closest('li').addClass('ui-tabs-selected ui-state-active');$show.removeClass('ui-tabs-hide');self._trigger('show',null,self._ui(clicked,$show[0]));};var hideTab=hideFx?function(clicked,$hide){$hide.animate(hideFx,hideFx.duration||'normal',function(){self.lis.removeClass('ui-tabs-selected ui-state-active');$hide.addClass('ui-tabs-hide');resetStyle($hide,hideFx);self.element.dequeue("tabs");});}:function(clicked,$hide,$show){self.lis.removeClass('ui-tabs-selected ui-state-active');$hide.addClass('ui-tabs-hide');self.element.dequeue("tabs");};this.anchors.bind(o.event+'.tabs',function(){var el=this,$li=$(this).closest('li'),$hide=self.panels.filter(':not(.ui-tabs-hide)'),$show=$(self._sanitizeSelector(this.hash));if(($li.hasClass('ui-tabs-selected')&&!o.collapsible)||$li.hasClass('ui-state-disabled')||$li.hasClass('ui-state-processing')||self._trigger('select',null,self._ui(this,$show[0]))===false){this.blur();return false;}
o.selected=self.anchors.index(this);self.abort();if(o.collapsible){if($li.hasClass('ui-tabs-selected')){o.selected=-1;if(o.cookie){self._cookie(o.selected,o.cookie);}
self.element.queue("tabs",function(){hideTab(el,$hide);}).dequeue("tabs");this.blur();return false;}
else if(!$hide.length){if(o.cookie){self._cookie(o.selected,o.cookie);}
self.element.queue("tabs",function(){showTab(el,$show);});self.load(self.anchors.index(this));this.blur();return false;}}
if(o.cookie){self._cookie(o.selected,o.cookie);}
if($show.length){if($hide.length){self.element.queue("tabs",function(){hideTab(el,$hide);});}
self.element.queue("tabs",function(){showTab(el,$show);});self.load(self.anchors.index(this));}
else{throw'jQuery UI Tabs: Mismatching fragment identifier.';}
if($.browser.msie){this.blur();}});this.anchors.bind('click.tabs',function(){return false;});},destroy:function(){var o=this.options;this.abort();this.element.unbind('.tabs').removeClass('ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible').removeData('tabs');this.list.removeClass('ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all');this.anchors.each(function(){var href=$.data(this,'href.tabs');if(href){this.href=href;}
var $this=$(this).unbind('.tabs');$.each(['href','load','cache'],function(i,prefix){$this.removeData(prefix+'.tabs');});});this.lis.unbind('.tabs').add(this.panels).each(function(){if($.data(this,'destroy.tabs')){$(this).remove();}
else{$(this).removeClass(['ui-state-default','ui-corner-top','ui-tabs-selected','ui-state-active','ui-state-hover','ui-state-focus','ui-state-disabled','ui-tabs-panel','ui-widget-content','ui-corner-bottom','ui-tabs-hide'].join(' '));}});if(o.cookie){this._cookie(null,o.cookie);}
return this;},add:function(url,label,index){if(index===undefined){index=this.anchors.length;}
var self=this,o=this.options,$li=$(o.tabTemplate.replace(/#\{href\}/g,url).replace(/#\{label\}/g,label)),id=!url.indexOf('#')?url.replace('#',''):this._tabId($('a',$li)[0]);$li.addClass('ui-state-default ui-corner-top').data('destroy.tabs',true);var $panel=$('#'+id);if(!$panel.length){$panel=$(o.panelTemplate).attr('id',id).data('destroy.tabs',true);}
$panel.addClass('ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide');if(index>=this.lis.length){$li.appendTo(this.list);$panel.appendTo(this.list[0].parentNode);}
else{$li.insertBefore(this.lis[index]);$panel.insertBefore(this.panels[index]);}
o.disabled=$.map(o.disabled,function(n,i){return n>=index?++n:n;});this._tabify();if(this.anchors.length==1){o.selected=0;$li.addClass('ui-tabs-selected ui-state-active');$panel.removeClass('ui-tabs-hide');this.element.queue("tabs",function(){self._trigger('show',null,self._ui(self.anchors[0],self.panels[0]));});this.load(0);}
this._trigger('add',null,this._ui(this.anchors[index],this.panels[index]));return this;},remove:function(index){var o=this.options,$li=this.lis.eq(index).remove(),$panel=this.panels.eq(index).remove();if($li.hasClass('ui-tabs-selected')&&this.anchors.length>1){this.select(index+(index+1<this.anchors.length?1:-1));}
o.disabled=$.map($.grep(o.disabled,function(n,i){return n!=index;}),function(n,i){return n>=index?--n:n;});this._tabify();this._trigger('remove',null,this._ui($li.find('a')[0],$panel[0]));return this;},enable:function(index){var o=this.options;if($.inArray(index,o.disabled)==-1){return;}
this.lis.eq(index).removeClass('ui-state-disabled');o.disabled=$.grep(o.disabled,function(n,i){return n!=index;});this._trigger('enable',null,this._ui(this.anchors[index],this.panels[index]));return this;},disable:function(index){var self=this,o=this.options;if(index!=o.selected){this.lis.eq(index).addClass('ui-state-disabled');o.disabled.push(index);o.disabled.sort();this._trigger('disable',null,this._ui(this.anchors[index],this.panels[index]));}
return this;},select:function(index){if(typeof index=='string'){index=this.anchors.index(this.anchors.filter('[href$='+index+']'));}
else if(index===null){index=-1;}
if(index==-1&&this.options.collapsible){index=this.options.selected;}
this.anchors.eq(index).trigger(this.options.event+'.tabs');return this;},load:function(index){var self=this,o=this.options,a=this.anchors.eq(index)[0],url=$.data(a,'load.tabs');this.abort();if(!url||this.element.queue("tabs").length!==0&&$.data(a,'cache.tabs')){this.element.dequeue("tabs");return;}
this.lis.eq(index).addClass('ui-state-processing');if(o.spinner){var span=$('span',a);span.data('label.tabs',span.html()).html(o.spinner);}
this.xhr=$.ajax($.extend({},o.ajaxOptions,{url:url,success:function(r,s){$(self._sanitizeSelector(a.hash)).html(r);self._cleanup();if(o.cache){$.data(a,'cache.tabs',true);}
self._trigger('load',null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.success(r,s);}
catch(e){}},error:function(xhr,s,e){self._cleanup();self._trigger('load',null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.error(xhr,s,index,a);}
catch(e){}}}));self.element.dequeue("tabs");return this;},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr;}
this._cleanup();return this;},url:function(index,url){this.anchors.eq(index).removeData('cache.tabs').data('load.tabs',url);return this;},length:function(){return this.anchors.length;}});$.extend($.ui.tabs,{version:'1.8.2'});$.extend($.ui.tabs.prototype,{rotation:null,rotate:function(ms,continuing){var self=this,o=this.options;var rotate=self._rotate||(self._rotate=function(e){clearTimeout(self.rotation);self.rotation=setTimeout(function(){var t=o.selected;self.select(++t<self.anchors.length?t:0);},ms);if(e){e.stopPropagation();}});var stop=self._unrotate||(self._unrotate=!continuing?function(e){if(e.clientX){self.rotate(null);}}:function(e){t=o.selected;rotate();});if(ms){this.element.bind('tabsshow',rotate);this.anchors.bind(o.event+'.tabs',stop);rotate();}
else{clearTimeout(self.rotation);this.element.unbind('tabsshow',rotate);this.anchors.unbind(o.event+'.tabs',stop);delete this._rotate;delete this._unrotate;}
return this;}});})(jQuery);(function($){$.extend($.ui,{datepicker:{version:"1.8.2"}});var PROP_NAME='datepicker';var dpuuid=new Date().getTime();function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId='ui-datepicker-div';this._inlineClass='ui-datepicker-inline';this._appendClass='ui-datepicker-append';this._triggerClass='ui-datepicker-trigger';this._dialogClass='ui-datepicker-dialog';this._disableClass='ui-datepicker-disabled';this._unselectableClass='ui-datepicker-unselectable';this._currentClass='ui-datepicker-current-day';this._dayOverClass='ui-datepicker-days-cell-over';this.regional=[];this.regional['']={closeText:'Done',prevText:'Prev',nextText:'Next',currentText:'Today',monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthNamesShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],dayNames:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],dayNamesShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],dayNamesMin:['Su','Mo','Tu','We','Th','Fr','Sa'],weekHeader:'Wk',dateFormat:'mm/dd/yy',firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:''};this._defaults={showOn:'focus',showAnim:'fadeIn',showOptions:{},defaultDate:null,appendText:'',buttonText:'...',buttonImage:'',buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:'c-10:c+10',showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:'+10',minDate:null,maxDate:null,duration:'fast',beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:'',altFormat:'',constrainInput:true,showButtonPanel:false,autoSize:false};$.extend(this._defaults,this.regional['']);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>');}
$.extend(Datepicker.prototype,{markerClassName:'hasDatepicker',log:function(){if(this.debug)
console.log.apply('',arguments);},_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute('date:'+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue);}catch(err){inlineSettings[attrName]=attrValue;}}}
var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=='div'||nodeName=='span');if(!target.id){this.uuid+=1;target.id='dp'+this.uuid;}
var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=='input'){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_])/g,'\\\\$1');return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName))
return;this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value;}).bind("getData.datepicker",function(event,key){return this._get(inst,key);});this._autoSize(inst);$.data(target,PROP_NAME,inst);},_attachments:function(input,inst){var appendText=this._get(inst,'appendText');var isRTL=this._get(inst,'isRTL');if(inst.append)
inst.append.remove();if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+'</span>');input[isRTL?'before':'after'](inst.append);}
input.unbind('focus',this._showDatepicker);if(inst.trigger)
inst.trigger.remove();var showOn=this._get(inst,'showOn');if(showOn=='focus'||showOn=='both')
input.focus(this._showDatepicker);if(showOn=='button'||showOn=='both'){var buttonText=this._get(inst,'buttonText');var buttonImage=this._get(inst,'buttonImage');inst.trigger=$(this._get(inst,'buttonImageOnly')?$('<img/>').addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==''?buttonText:$('<img/>').attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?'before':'after'](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0])
$.datepicker._hideDatepicker();else
$.datepicker._showDatepicker(input[0]);return false;});}},_autoSize:function(inst){if(this._get(inst,'autoSize')&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,'dateFormat');if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?'monthNames':'monthNamesShort'))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?'dayNames':'dayNamesShort')))+20-date.getDay());}
inst.input.attr('size',this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))
return;divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value;}).bind("getData.datepicker",function(event,key){return this._get(inst,key);});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id='dp'+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);$('body').append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst);}
extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}
this._dialogInput.css('left',(this._pos[0]+20)+'px').css('top',this._pos[1]+'px');inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI)
$.blockUI(this.dpDiv);$.data(this._dialogInput[0],PROP_NAME,inst);return this;},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=='input'){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind('focus',this._showDatepicker).unbind('keydown',this._doKeyDown).unbind('keypress',this._doKeyPress).unbind('keyup',this._doKeyUp);}else if(nodeName=='div'||nodeName=='span')
$target.removeClass(this.markerClassName).empty();},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
var nodeName=target.nodeName.toLowerCase();if(nodeName=='input'){target.disabled=false;inst.trigger.filter('button').each(function(){this.disabled=false;}).end().filter('img').css({opacity:'1.0',cursor:''});}
else if(nodeName=='div'||nodeName=='span'){var inline=$target.children('.'+this._inlineClass);inline.children().removeClass('ui-state-disabled');}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
var nodeName=target.nodeName.toLowerCase();if(nodeName=='input'){target.disabled=true;inst.trigger.filter('button').each(function(){this.disabled=true;}).end().filter('img').css({opacity:'0.5',cursor:'default'});}
else if(nodeName=='div'||nodeName=='span'){var inline=$target.children('.'+this._inlineClass);inline.children().addClass('ui-state-disabled');}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target)
return true;}
return false;},_getInst:function(target){try{return $.data(target,PROP_NAME);}
catch(err){throw'Missing instance data for this datepicker';}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=='string'){return(name=='defaults'?$.extend({},$.datepicker._defaults):(inst?(name=='all'?$.extend({},inst.settings):this._get(inst,name)):null));}
var settings=name||{};if(typeof name=='string'){settings={};settings[name]=value;}
if(inst){if(this._curInst==inst){this._hideDatepicker();}
var date=this._getDateDatepicker(target,true);extendRemove(inst.settings,settings);this._attachments($(target),inst);this._autoSize(inst);this._setDateDatepicker(target,date);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline)
this._setDateFromField(inst,noDefault);return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is('.ui-datepicker-rtl');inst._keyEvent=true;if($.datepicker._datepickerShowing)
switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$('td.'+$.datepicker._dayOverClass,inst.dpDiv).add($('td.'+$.datepicker._currentClass,inst.dpDiv));if(sel[0])
$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);else
$.datepicker._hideDatepicker();return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,'stepBigMonths'):-$.datepicker._get(inst,'stepMonths')),'M');break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,'stepBigMonths'):+$.datepicker._get(inst,'stepMonths')),'M');break;case 35:if(event.ctrlKey||event.metaKey)$.datepicker._clearDate(event.target);handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey)$.datepicker._gotoToday(event.target);handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,(isRTL?+1:-1),'D');handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,'stepBigMonths'):-$.datepicker._get(inst,'stepMonths')),'M');break;case 38:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,-7,'D');handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,(isRTL?-1:+1),'D');handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,'stepBigMonths'):+$.datepicker._get(inst,'stepMonths')),'M');break;case 40:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,+7,'D');handled=event.ctrlKey||event.metaKey;break;default:handled=false;}
else if(event.keyCode==36&&event.ctrlKey)
$.datepicker._showDatepicker(this);else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,'constrainInput')){var chars=$.datepicker._possibleChars($.datepicker._get(inst,'dateFormat'));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<' '||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,'dateFormat'),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}
catch(event){$.datepicker.log(event);}}
return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!='input')
input=$('input',input.parentNode)[0];if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input)
return;var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true);}
var beforeShow=$.datepicker._get(inst,'beforeShow');extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog)
input.value='';if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}
var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css('position')=='fixed';return!isFixed;});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop;}
var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.css({position:'absolute',display:'block',top:'-1000px'});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?'static':(isFixed?'fixed':'absolute')),display:'none',left:offset.left+'px',top:offset.top+'px'});if(!inst.inline){var showAnim=$.datepicker._get(inst,'showAnim');var duration=$.datepicker._get(inst,'duration');var postProcess=function(){$.datepicker._datepickerShowing=true;var borders=$.datepicker._getBorders(inst.dpDiv);inst.dpDiv.find('iframe.ui-datepicker-cover').css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()});};inst.dpDiv.zIndex($(input).zIndex()+1);if($.effects&&$.effects[showAnim])
inst.dpDiv.show(showAnim,$.datepicker._get(inst,'showOptions'),duration,postProcess);else
inst.dpDiv[showAnim||'show']((showAnim?duration:null),postProcess);if(!showAnim||!duration)
postProcess();if(inst.input.is(':visible')&&!inst.input.is(':disabled'))
inst.input.focus();$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){var self=this;var borders=$.datepicker._getBorders(inst.dpDiv);inst.dpDiv.empty().append(this._generateHTML(inst)).find('iframe.ui-datepicker-cover').css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()}).end().find('button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a').bind('mouseout',function(){$(this).removeClass('ui-state-hover');if(this.className.indexOf('ui-datepicker-prev')!=-1)$(this).removeClass('ui-datepicker-prev-hover');if(this.className.indexOf('ui-datepicker-next')!=-1)$(this).removeClass('ui-datepicker-next-hover');}).bind('mouseover',function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents('.ui-datepicker-calendar').find('a').removeClass('ui-state-hover');$(this).addClass('ui-state-hover');if(this.className.indexOf('ui-datepicker-prev')!=-1)$(this).addClass('ui-datepicker-prev-hover');if(this.className.indexOf('ui-datepicker-next')!=-1)$(this).addClass('ui-datepicker-next-hover');}}).end().find('.'+this._dayOverClass+' a').trigger('mouseover').end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1)
inst.dpDiv.addClass('ui-datepicker-multi-'+cols).css('width',(width*cols)+'em');else
inst.dpDiv.removeClass('ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4').width('');inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?'add':'remove')+'Class']('ui-datepicker-multi');inst.dpDiv[(this._get(inst,'isRTL')?'add':'remove')+'Class']('ui-datepicker-rtl');if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(':visible')&&!inst.input.is(':disabled'))
inst.input.focus();},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value;};return[parseFloat(convert(elem.css('border-left-width'))),parseFloat(convert(elem.css('border-top-width')))];},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+$(document).scrollLeft();var viewHeight=document.documentElement.clientHeight+$(document).scrollTop();offset.left-=(this._get(inst,'isRTL')?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,'isRTL');while(obj&&(obj.type=='hidden'||obj.nodeType!=1)){obj=obj[isRTL?'previousSibling':'nextSibling'];}
var position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME)))
return;if(this._datepickerShowing){var showAnim=this._get(inst,'showAnim');var duration=this._get(inst,'duration');var postProcess=function(){$.datepicker._tidyDialog(inst);this._curInst=null;};if($.effects&&$.effects[showAnim])
inst.dpDiv.hide(showAnim,$.datepicker._get(inst,'showOptions'),duration,postProcess);else
inst.dpDiv[(showAnim=='slideDown'?'slideUp':(showAnim=='fadeIn'?'fadeOut':'hide'))]((showAnim?duration:null),postProcess);if(!showAnim)
postProcess();var onClose=this._get(inst,'onClose');if(onClose)
onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():''),inst]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:'absolute',left:'0',top:'-100px'});if($.blockUI){$.unblockUI();$('body').append(this.dpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind('.ui-datepicker-calendar');},_checkExternalClick:function(event){if(!$.datepicker._curInst)
return;var $target=$(event.target);if($target[0].id!=$.datepicker._mainDivId&&$target.parents('#'+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI))
$.datepicker._hideDatepicker();},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}
this._adjustInstDate(inst,offset+
(period=='M'?this._get(inst,'showCurrentAtPos'):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,'gotoCurrent')&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}
else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}
this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst['selected'+(period=='M'?'Month':'Year')]=inst['draw'+(period=='M'?'Month':'Year')]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear&&!$.browser.msie)
inst.input.focus();inst._selectingMonthYear=!inst._selectingMonthYear;},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}
var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$('a',td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,'');},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input)
inst.input.val(dateStr);this._updateAlternate(inst);var onSelect=this._get(inst,'onSelect');if(onSelect)
onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);else if(inst.input)
inst.input.trigger('change');if(inst.inline)
this._updateDatepicker(inst);else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!='object')
inst.input.focus();this._lastInput=null;}},_updateAlternate:function(inst){var altField=this._get(inst,'altField');if(altField){var altFormat=this._get(inst,'altFormat')||this._get(inst,'dateFormat');var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),''];},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null)
throw'Invalid arguments';value=(typeof value=='object'?value.toString():value+'');if(value=='')
return null;var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches)
iFormat++;return matches;};var getNumber=function(match){lookAhead(match);var size=(match=='@'?14:(match=='!'?20:(match=='y'?4:(match=='o'?3:2))));var digits=new RegExp('^\\d{1,'+size+'}');var num=value.substring(iValue).match(digits);if(!num)
throw'Missing number at position '+iValue;iValue+=num[0].length;return parseInt(num[0],10);};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length)==names[i]){iValue+=names[i].length;return i+1;}}
throw'Unknown name at position '+iValue;};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat))
throw'Unexpected literal at position '+iValue;iValue++;};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal)
if(format.charAt(iFormat)=="'"&&!lookAhead("'"))
literal=false;else
checkLiteral();else
switch(format.charAt(iFormat)){case'd':day=getNumber('d');break;case'D':getName('D',dayNamesShort,dayNames);break;case'o':doy=getNumber('o');break;case'm':month=getNumber('m');break;case'M':month=getName('M',monthNamesShort,monthNames);break;case'y':year=getNumber('y');break;case'@':var date=new Date(getNumber('@'));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case'!':var date=new Date((getNumber('!')-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'"))
checkLiteral();else
literal=true;break;default:checkLiteral();}}
if(year==-1)
year=new Date().getFullYear();else if(year<100)
year+=new Date().getFullYear()-new Date().getFullYear()%100+
(year<=shortYearCutoff?0:-100);if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim)
break;month++;day-=dim;}while(true);}
var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day)
throw'Invalid date';return date;},ATOM:'yy-mm-dd',COOKIE:'D, dd M yy',ISO_8601:'yy-mm-dd',RFC_822:'D, d M y',RFC_850:'DD, dd-M-y',RFC_1036:'D, d M y',RFC_1123:'D, d M yy',RFC_2822:'D, d M yy',RSS:'D, d M y',TICKS:'!',TIMESTAMP:'@',W3C:'yy-mm-dd',_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date)
return'';var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches)
iFormat++;return matches;};var formatNumber=function(match,value,len){var num=''+value;if(lookAhead(match))
while(num.length<len)
num='0'+num;return num;};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);};var output='';var literal=false;if(date)
for(var iFormat=0;iFormat<format.length;iFormat++){if(literal)
if(format.charAt(iFormat)=="'"&&!lookAhead("'"))
literal=false;else
output+=format.charAt(iFormat);else
switch(format.charAt(iFormat)){case'd':output+=formatNumber('d',date.getDate(),2);break;case'D':output+=formatName('D',date.getDay(),dayNamesShort,dayNames);break;case'o':output+=formatNumber('o',(date.getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000,3);break;case'm':output+=formatNumber('m',date.getMonth()+1,2);break;case'M':output+=formatName('M',date.getMonth(),monthNamesShort,monthNames);break;case'y':output+=(lookAhead('y')?date.getFullYear():(date.getYear()%100<10?'0':'')+date.getYear()%100);break;case'@':output+=date.getTime();break;case'!':output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'"))
output+="'";else
literal=true;break;default:output+=format.charAt(iFormat);}}
return output;},_possibleChars:function(format){var chars='';var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches)
iFormat++;return matches;};for(var iFormat=0;iFormat<format.length;iFormat++)
if(literal)
if(format.charAt(iFormat)=="'"&&!lookAhead("'"))
literal=false;else
chars+=format.charAt(iFormat);else
switch(format.charAt(iFormat)){case'd':case'm':case'y':case'@':chars+='0123456789';break;case'D':case'M':return null;case"'":if(lookAhead("'"))
chars+="'";else
literal=true;break;default:chars+=format.charAt(iFormat);}
return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return;}
var dateFormat=this._get(inst,'dateFormat');var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){this.log(event);dates=(noDefault?'':dates);}
inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,'defaultDate'),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,'dateFormat'),offset,$.datepicker._getFormatConfig(inst));}
catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||'d'){case'd':case'D':day+=parseInt(matches[1],10);break;case'w':case'W':day+=parseInt(matches[1],10)*7;break;case'm':case'M':month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case'y':case'Y':year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day);};date=(date==null?defaultDate:(typeof date=='string'?offsetString(date):(typeof date=='number'?(isNaN(date)?defaultDate:offsetNumeric(date)):date)));date=(date&&date.toString()=='Invalid Date'?defaultDate:date);if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);}
return this._daylightSavingAdjust(date);},_daylightSavingAdjust:function(date){if(!date)return null;date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!(date);var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;date=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=date.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=date.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=date.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange)
this._notifyChange(inst);this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?'':this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=='')?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,'isRTL');var showButtonPanel=this._get(inst,'showButtonPanel');var hideIfNoPrevNext=this._get(inst,'hideIfNoPrevNext');var navigationAsDateFormat=this._get(inst,'navigationAsDateFormat');var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,'showCurrentAtPos');var stepMonths=this._get(inst,'stepMonths');var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,'min');var maxDate=this._getMinMaxDate(inst,'max');var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,'prevText');prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._adjustDate(\'#'+inst.id+'\', -'+stepMonths+', \'M\');"'+' title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?'e':'w')+'">'+prevText+'</span></a>':(hideIfNoPrevNext?'':'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?'e':'w')+'">'+prevText+'</span></a>'));var nextText=this._get(inst,'nextText');nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._adjustDate(\'#'+inst.id+'\', +'+stepMonths+', \'M\');"'+' title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?'w':'e')+'">'+nextText+'</span></a>':(hideIfNoPrevNext?'':'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?'w':'e')+'">'+nextText+'</span></a>'));var currentText=this._get(inst,'currentText');var gotoDate=(this._get(inst,'gotoCurrent')&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(inst,'closeText')+'</button>':'');var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:'')+
(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._gotoToday(\'#'+inst.id+'\');"'+'>'+currentText+'</button>':'')+(isRTL?'':controls)+'</div>':'';var firstDay=parseInt(this._get(inst,'firstDay'),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,'showWeek');var dayNames=this._get(inst,'dayNames');var dayNamesShort=this._get(inst,'dayNamesShort');var dayNamesMin=this._get(inst,'dayNamesMin');var monthNames=this._get(inst,'monthNames');var monthNamesShort=this._get(inst,'monthNamesShort');var beforeShowDay=this._get(inst,'beforeShowDay');var showOtherMonths=this._get(inst,'showOtherMonths');var selectOtherMonths=this._get(inst,'selectOtherMonths');var calculateWeek=this._get(inst,'calculateWeek')||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html='';for(var row=0;row<numMonths[0];row++){var group='';for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=' ui-corner-all';var calender='';if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1)
switch(col){case 0:calender+=' ui-datepicker-group-first';cornerClass=' ui-corner-'+(isRTL?'right':'left');break;case numMonths[1]-1:calender+=' ui-datepicker-group-last';cornerClass=' ui-corner-'+(isRTL?'left':'right');break;default:calender+=' ui-datepicker-group-middle';cornerClass='';break;}
calender+='">';}
calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+
(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):'')+
(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):'')+
this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead>'+'<tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,'weekHeader')+'</th>':'');for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+='<th'+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':'')+'>'+'<span title="'+dayNames[day]+'">'+dayNamesMin[day]+'</span></th>';}
calender+=thead+'</tr></thead><tbody>';var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth)
inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+='<tr>';var tbody=(!showWeek?'':'<td class="ui-datepicker-week-col">'+
this._get(inst,'calculateWeek')(printDate)+'</td>');for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,'']);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+
((dow+firstDay+6)%7>=5?' ui-datepicker-week-end':'')+
(otherMonth?' ui-datepicker-other-month':'')+
((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?' '+this._dayOverClass:'')+
(unselectable?' '+this._unselectableClass+' ui-state-disabled':'')+
(otherMonth&&!showOtherMonths?'':' '+daySettings[1]+
(printDate.getTime()==currentDate.getTime()?' '+this._currentClass:'')+
(printDate.getTime()==today.getTime()?' ui-datepicker-today':''))+'"'+
((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':'')+
(unselectable?'':' onclick="DP_jQuery_'+dpuuid+'.datepicker._selectDay(\'#'+
inst.id+'\','+printDate.getMonth()+','+printDate.getFullYear()+', this);return false;"')+'>'+
(otherMonth&&!showOtherMonths?'&#xa0;':(unselectable?'<span class="ui-state-default">'+printDate.getDate()+'</span>':'<a class="ui-state-default'+
(printDate.getTime()==today.getTime()?' ui-state-highlight':'')+
(printDate.getTime()==currentDate.getTime()?' ui-state-active':'')+
(otherMonth?' ui-priority-secondary':'')+'" href="#">'+printDate.getDate()+'</a>'))+'</td>';printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
calender+=tbody+'</tr>';}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
calender+='</tbody></table>'+(isMultiMonth?'</div>'+
((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':''):'');group+=calender;}
html+=group;}
html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':'');inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,'changeMonth');var changeYear=this._get(inst,'changeYear');var showMonthAfterYear=this._get(inst,'showMonthAfterYear');var html='<div class="ui-datepicker-title">';var monthHtml='';if(secondary||!changeMonth)
monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+'</span>';else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" '+'onchange="DP_jQuery_'+dpuuid+'.datepicker._selectMonthYear(\'#'+inst.id+'\', this, \'M\');" '+'onclick="DP_jQuery_'+dpuuid+'.datepicker._clickMonthYear(\'#'+inst.id+'\');"'+'>';for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth()))
monthHtml+='<option value="'+month+'"'+
(month==drawMonth?' selected="selected"':'')+'>'+monthNamesShort[month]+'</option>';}
monthHtml+='</select>';}
if(!showMonthAfterYear)
html+=monthHtml+(secondary||!(changeMonth&&changeYear)?'&#xa0;':'');if(secondary||!changeYear)
html+='<span class="ui-datepicker-year">'+drawYear+'</span>';else{var years=this._get(inst,'yearRange').split(':');var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||''));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);html+='<select class="ui-datepicker-year" '+'onchange="DP_jQuery_'+dpuuid+'.datepicker._selectMonthYear(\'#'+inst.id+'\', this, \'Y\');" '+'onclick="DP_jQuery_'+dpuuid+'.datepicker._clickMonthYear(\'#'+inst.id+'\');"'+'>';for(;year<=endYear;year++){html+='<option value="'+year+'"'+
(year==drawYear?' selected="selected"':'')+'>'+year+'</option>';}
html+='</select>';}
html+=this._get(inst,'yearSuffix');if(showMonthAfterYear)
html+=(secondary||!(changeMonth&&changeYear)?'&#xa0;':'')+monthHtml;html+='</div>';return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=='Y'?offset:0);var month=inst.drawMonth+(period=='M'?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+
(period=='D'?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=='M'||period=='Y')
this._notifyChange(inst);},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,'min');var maxDate=this._getMinMaxDate(inst,'max');date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);return date;},_notifyChange:function(inst){var onChange=this._get(inst,'onChangeMonthYear');if(onChange)
onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,'numberOfMonths');return(numMonths==null?[1,1]:(typeof numMonths=='number'?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+'Date'),null);},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0)
date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));return this._isInRange(inst,date);},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,'min');var maxDate=this._getMinMaxDate(inst,'max');return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,'shortYearCutoff');shortYearCutoff=(typeof shortYearCutoff!='string'?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,'dayNamesShort'),dayNames:this._get(inst,'dayNames'),monthNamesShort:this._get(inst,'monthNamesShort'),monthNames:this._get(inst,'monthNames')};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}
var date=(day?(typeof day=='object'?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,'dateFormat'),date,this._getFormatConfig(inst));}});function extendRemove(target,props){$.extend(target,props);for(var name in props)
if(props[name]==null||props[name]==undefined)
target[name]=props[name];return target;};function isArray(a){return(a&&(($.browser.safari&&typeof a=='object'&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))));};$.fn.datepicker=function(options){if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find('body').append($.datepicker.dpDiv);$.datepicker.initialized=true;}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=='string'&&(options=='isDisabled'||options=='getDate'||options=='widget'))
return $.datepicker['_'+options+'Datepicker'].apply($.datepicker,[this[0]].concat(otherArgs));if(options=='option'&&arguments.length==2&&typeof arguments[1]=='string')
return $.datepicker['_'+options+'Datepicker'].apply($.datepicker,[this[0]].concat(otherArgs));return this.each(function(){typeof options=='string'?$.datepicker['_'+options+'Datepicker'].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.8.2";window['DP_jQuery_'+dpuuid]=$;})(jQuery);(function($){$.widget("ui.progressbar",{options:{value:0},_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this._valueMin(),"aria-valuemax":this._valueMax(),"aria-valuenow":this._value()});this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue();},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();$.Widget.prototype.destroy.apply(this,arguments);},value:function(newValue){if(newValue===undefined){return this._value();}
this._setOption("value",newValue);return this;},_setOption:function(key,value){switch(key){case"value":this.options.value=value;this._refreshValue();this._trigger("change");break;}
$.Widget.prototype._setOption.apply(this,arguments);},_value:function(){var val=this.options.value;if(typeof val!=="number"){val=0;}
if(val<this._valueMin()){val=this._valueMin();}
if(val>this._valueMax()){val=this._valueMax();}
return val;},_valueMin:function(){return 0;},_valueMax:function(){return 100;},_refreshValue:function(){var value=this.value();this.valueDiv
[value===this._valueMax()?"addClass":"removeClass"]("ui-corner-right").width(value+"%");this.element.attr("aria-valuenow",value);}});$.extend($.ui.progressbar,{version:"1.8.2"});})(jQuery);;jQuery.effects||(function($){$.effects={};$.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','color','outlineColor'],function(i,attr){$.fx.step[attr]=function(fx){if(!fx.colorInit){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);fx.colorInit=true;}
fx.elem.style[attr]='rgb('+
Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0],10),255),0)+','+
Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1],10),255),0)+','+
Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2],10),255),0)+')';};});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3)
return color;if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))
return[parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10)];if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))
return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))
return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))
return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];if(result=/rgba\(0, 0, 0, 0\)/.exec(color))
return colors['transparent'];return colors[$.trim(color).toLowerCase()];}
function getColor(elem,attr){var color;do{color=$.curCSS(elem,attr);if(color!=''&&color!='transparent'||$.nodeName(elem,"body"))
break;attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);};var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var classAnimationActions=['add','remove','toggle'],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function getElementStyles(){var style=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={},key,camelCase;if(style&&style.length&&style[0]&&style[style[0]]){var len=style.length;while(len--){key=style[len];if(typeof style[key]=='string'){camelCase=key.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase();});newStyle[camelCase]=style[key];}}}else{for(key in style){if(typeof style[key]==='string'){newStyle[key]=style[key];}}}
return newStyle;}
function filterStyles(styles){var name,value;for(name in styles){value=styles[name];if(value==null||$.isFunction(value)||name in shorthandStyles||(/scrollbar/).test(name)||(!(/color/i).test(name)&&isNaN(parseFloat(value)))){delete styles[name];}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={_:0},name;for(name in newStyle){if(oldStyle[name]!=newStyle[name]){diff[name]=newStyle[name];}}
return diff;}
$.effects.animateClass=function(value,duration,easing,callback){if($.isFunction(easing)){callback=easing;easing=null;}
return this.each(function(){var that=$(this),originalStyleAttr=that.attr('style')||' ',originalStyle=filterStyles(getElementStyles.call(this)),newStyle,className=that.attr('className');$.each(classAnimationActions,function(i,action){if(value[action]){that[action+'Class'](value[action]);}});newStyle=filterStyles(getElementStyles.call(this));that.attr('className',className);that.animate(styleDifference(originalStyle,newStyle),duration,easing,function(){$.each(classAnimationActions,function(i,action){if(value[action]){that[action+'Class'](value[action]);}});if(typeof that.attr('style')=='object'){that.attr('style').cssText='';that.attr('style').cssText=originalStyleAttr;}else{that.attr('style',originalStyleAttr);}
if(callback){callback.apply(this,arguments);}});});};$.fn.extend({_addClass:$.fn.addClass,addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{add:classNames},speed,easing,callback]):this._addClass(classNames);},_removeClass:$.fn.removeClass,removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{remove:classNames},speed,easing,callback]):this._removeClass(classNames);},_toggleClass:$.fn.toggleClass,toggleClass:function(classNames,force,speed,easing,callback){if(typeof force=="boolean"||force===undefined){if(!speed){return this._toggleClass(classNames,force);}else{return $.effects.animateClass.apply(this,[(force?{add:classNames}:{remove:classNames}),speed,easing,callback]);}}else{return $.effects.animateClass.apply(this,[{toggle:classNames},force,speed,easing]);}},switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.apply(this,[{add:add,remove:remove},speed,easing,callback]);}});$.extend($.effects,{version:"1.8.2",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null)element.data("ec.storage."+set[i],element[0].style[set[i]]);}},restore:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null)element.css(set[i],element.data("ec.storage."+set[i]));}},setMode:function(el,mode){if(mode=='toggle')mode=el.is(':hidden')?'show':'hide';return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case'top':y=0;break;case'middle':y=0.5;break;case'bottom':y=1;break;default:y=origin[0]/original.height;};switch(origin[1]){case'left':x=0;break;case'center':x=0.5;break;case'right':x=1;break;default:x=origin[1]/original.width;};return{x:x,y:y};},createWrapper:function(element){if(element.parent().is('.ui-effects-wrapper')){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),'float':element.css('float')},wrapper=$('<div></div>').addClass('ui-effects-wrapper').css({fontSize:'100%',background:'transparent',border:'none',margin:0,padding:0});element.wrap(wrapper);wrapper=element.parent();if(element.css('position')=='static'){wrapper.css({position:'relative'});element.css({position:'relative'});}else{$.extend(props,{position:element.css('position'),zIndex:element.css('z-index')});$.each(['top','left','bottom','right'],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]='auto';}});element.css({position:'relative',top:0,left:0});}
return wrapper.css(props).show();},removeWrapper:function(element){if(element.parent().is('.ui-effects-wrapper'))
return element.parent().replaceWith(element);return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){unit=element.cssUnit(x);if(unit[0]>0)value[x]=unit[0]*factor+unit[1];});return value;}});function _normalizeArguments(effect,options,speed,callback){if(typeof effect=='object'){callback=options;speed=null;options=effect;effect=options.effect;}
if($.isFunction(options)){callback=options;speed=null;options={};}
if($.isFunction(speed)){callback=speed;speed=null;}
if(typeof options=='number'||$.fx.speeds[options]){callback=speed;speed=options;options={};}
options=options||{};speed=speed||options.duration;speed=$.fx.off?0:typeof speed=='number'?speed:$.fx.speeds[speed]||$.fx.speeds._default;callback=callback||options.complete;return[effect,options,speed,callback];}
$.fn.extend({effect:function(effect,options,speed,callback){var args=_normalizeArguments.apply(this,arguments),args2={options:args[1],duration:args[2],callback:args[3]},effectMethod=$.effects[effect];return effectMethod&&!$.fx.off?effectMethod.call(this,args2):this;},_show:$.fn.show,show:function(speed){if(!speed||typeof speed=='number'||$.fx.speeds[speed]){return this._show.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='show';return this.effect.apply(this,args);}},_hide:$.fn.hide,hide:function(speed){if(!speed||typeof speed=='number'||$.fx.speeds[speed]){return this._hide.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='hide';return this.effect.apply(this,args);}},__toggle:$.fn.toggle,toggle:function(speed){if(!speed||typeof speed=='number'||$.fx.speeds[speed]||typeof speed=='boolean'||$.isFunction(speed)){return this.__toggle.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='toggle';return this.effect.apply(this,args);}},cssUnit:function(key){var style=this.css(key),val=[];$.each(['em','px','%','pt'],function(i,unit){if(style.indexOf(unit)>0)
val=[parseFloat(style),unit];});return val;}});$.easing.jswing=$.easing.swing;$.extend($.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return $.easing[$.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-$.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return $.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return $.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});})(jQuery);(function($){$.effects.blind=function(o){return this.queue(function(){var el=$(this),props=['position','top','left'];var mode=$.effects.setMode(el,o.options.mode||'hide');var direction=o.options.direction||'vertical';$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:'hidden'});var ref=(direction=='vertical')?'height':'width';var distance=(direction=='vertical')?wrapper.height():wrapper.width();if(mode=='show')wrapper.css(ref,0);var animation={};animation[ref]=mode=='show'?distance:0;wrapper.animate(animation,o.duration,o.options.easing,function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue();});});};})(jQuery);(function($){$.effects.bounce=function(o){return this.queue(function(){var el=$(this),props=['position','top','left'];var mode=$.effects.setMode(el,o.options.mode||'effect');var direction=o.options.direction||'up';var distance=o.options.distance||20;var times=o.options.times||5;var speed=o.duration||250;if(/show|hide/.test(mode))props.push('opacity');$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var distance=o.options.distance||(ref=='top'?el.outerHeight({margin:true})/3:el.outerWidth({margin:true})/3);if(mode=='show')el.css('opacity',0).css(ref,motion=='pos'?-distance:distance);if(mode=='hide')distance=distance/(times*2);if(mode!='hide')times--;if(mode=='show'){var animation={opacity:1};animation[ref]=(motion=='pos'?'+=':'-=')+distance;el.animate(animation,speed/2,o.options.easing);distance=distance/2;times--;};for(var i=0;i<times;i++){var animation1={},animation2={};animation1[ref]=(motion=='pos'?'-=':'+=')+distance;animation2[ref]=(motion=='pos'?'+=':'-=')+distance;el.animate(animation1,speed/2,o.options.easing).animate(animation2,speed/2,o.options.easing);distance=(mode=='hide')?distance*2:distance/2;};if(mode=='hide'){var animation={opacity:0};animation[ref]=(motion=='pos'?'-=':'+=')+distance;el.animate(animation,speed/2,o.options.easing,function(){el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);});}else{var animation1={},animation2={};animation1[ref]=(motion=='pos'?'-=':'+=')+distance;animation2[ref]=(motion=='pos'?'+=':'-=')+distance;el.animate(animation1,speed/2,o.options.easing).animate(animation2,speed/2,o.options.easing,function(){$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);});};el.queue('fx',function(){el.dequeue();});el.dequeue();});};})(jQuery);(function($){$.effects.clip=function(o){return this.queue(function(){var el=$(this),props=['position','top','left','height','width'];var mode=$.effects.setMode(el,o.options.mode||'hide');var direction=o.options.direction||'vertical';$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:'hidden'});var animate=el[0].tagName=='IMG'?wrapper:el;var ref={size:(direction=='vertical')?'height':'width',position:(direction=='vertical')?'top':'left'};var distance=(direction=='vertical')?animate.height():animate.width();if(mode=='show'){animate.css(ref.size,0);animate.css(ref.position,distance/2);}
var animation={};animation[ref.size]=mode=='show'?distance:0;animation[ref.position]=mode=='show'?0:distance/2;animate.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue();}});});};})(jQuery);(function($){$.effects.drop=function(o){return this.queue(function(){var el=$(this),props=['position','top','left','opacity'];var mode=$.effects.setMode(el,o.options.mode||'hide');var direction=o.options.direction||'left';$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var distance=o.options.distance||(ref=='top'?el.outerHeight({margin:true})/2:el.outerWidth({margin:true})/2);if(mode=='show')el.css('opacity',0).css(ref,motion=='pos'?-distance:distance);var animation={opacity:mode=='show'?1:0};animation[ref]=(mode=='show'?(motion=='pos'?'+=':'-='):(motion=='pos'?'-=':'+='))+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue();}});});};})(jQuery);(function($){$.effects.explode=function(o){return this.queue(function(){var rows=o.options.pieces?Math.round(Math.sqrt(o.options.pieces)):3;var cells=o.options.pieces?Math.round(Math.sqrt(o.options.pieces)):3;o.options.mode=o.options.mode=='toggle'?($(this).is(':visible')?'hide':'show'):o.options.mode;var el=$(this).show().css('visibility','hidden');var offset=el.offset();offset.top-=parseInt(el.css("marginTop"),10)||0;offset.left-=parseInt(el.css("marginLeft"),10)||0;var width=el.outerWidth(true);var height=el.outerHeight(true);for(var i=0;i<rows;i++){for(var j=0;j<cells;j++){el.clone().appendTo('body').wrap('<div></div>').css({position:'absolute',visibility:'visible',left:-j*(width/cells),top:-i*(height/rows)}).parent().addClass('ui-effects-explode').css({position:'absolute',overflow:'hidden',width:width/cells,height:height/rows,left:offset.left+j*(width/cells)+(o.options.mode=='show'?(j-Math.floor(cells/2))*(width/cells):0),top:offset.top+i*(height/rows)+(o.options.mode=='show'?(i-Math.floor(rows/2))*(height/rows):0),opacity:o.options.mode=='show'?0:1}).animate({left:offset.left+j*(width/cells)+(o.options.mode=='show'?0:(j-Math.floor(cells/2))*(width/cells)),top:offset.top+i*(height/rows)+(o.options.mode=='show'?0:(i-Math.floor(rows/2))*(height/rows)),opacity:o.options.mode=='show'?1:0},o.duration||500);}}
setTimeout(function(){o.options.mode=='show'?el.css({visibility:'visible'}):el.css({visibility:'visible'}).hide();if(o.callback)o.callback.apply(el[0]);el.dequeue();$('div.ui-effects-explode').remove();},o.duration||500);});};})(jQuery);(function($){$.effects.fold=function(o){return this.queue(function(){var el=$(this),props=['position','top','left'];var mode=$.effects.setMode(el,o.options.mode||'hide');var size=o.options.size||15;var horizFirst=!(!o.options.horizFirst);var duration=o.duration?o.duration/2:$.fx.speeds._default/2;$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:'hidden'});var widthFirst=((mode=='show')!=horizFirst);var ref=widthFirst?['width','height']:['height','width'];var distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()];var percent=/([0-9]+)%/.exec(size);if(percent)size=parseInt(percent[1],10)/100*distance[mode=='hide'?0:1];if(mode=='show')wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0});var animation1={},animation2={};animation1[ref[0]]=mode=='show'?distance[0]:size;animation2[ref[1]]=mode=='show'?distance[1]:0;wrapper.animate(animation1,duration,o.options.easing).animate(animation2,duration,o.options.easing,function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue();});});};})(jQuery);(function($){$.effects.highlight=function(o){return this.queue(function(){var elem=$(this),props=['backgroundImage','backgroundColor','opacity'],mode=$.effects.setMode(elem,o.options.mode||'show'),animation={backgroundColor:elem.css('backgroundColor')};if(mode=='hide'){animation.opacity=0;}
$.effects.save(elem,props);elem.show().css({backgroundImage:'none',backgroundColor:o.options.color||'#ffff99'}).animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){(mode=='hide'&&elem.hide());$.effects.restore(elem,props);(mode=='show'&&!$.support.opacity&&this.style.removeAttribute('filter'));(o.callback&&o.callback.apply(this,arguments));elem.dequeue();}});});};})(jQuery);(function($){$.effects.pulsate=function(o){return this.queue(function(){var elem=$(this),mode=$.effects.setMode(elem,o.options.mode||'show');times=((o.options.times||5)*2)-1;duration=o.duration?o.duration/2:$.fx.speeds._default/2,isVisible=elem.is(':visible'),animateTo=0;if(!isVisible){elem.css('opacity',0).show();animateTo=1;}
if((mode=='hide'&&isVisible)||(mode=='show'&&!isVisible)){times--;}
for(var i=0;i<times;i++){elem.animate({opacity:animateTo},duration,o.options.easing);animateTo=(animateTo+1)%2;}
elem.animate({opacity:animateTo},duration,o.options.easing,function(){if(animateTo==0){elem.hide();}
(o.callback&&o.callback.apply(this,arguments));});elem.queue('fx',function(){elem.dequeue();}).dequeue();});};})(jQuery);(function($){$.effects.puff=function(o){return this.queue(function(){var elem=$(this),mode=$.effects.setMode(elem,o.options.mode||'hide'),percent=parseInt(o.options.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width()};$.extend(o.options,{fade:true,mode:mode,percent:mode=='hide'?percent:100,from:mode=='hide'?original:{height:original.height*factor,width:original.width*factor}});elem.effect('scale',o.options,o.duration,o.callback);elem.dequeue();});};$.effects.scale=function(o){return this.queue(function(){var el=$(this);var options=$.extend(true,{},o.options);var mode=$.effects.setMode(el,o.options.mode||'effect');var percent=parseInt(o.options.percent,10)||(parseInt(o.options.percent,10)==0?0:(mode=='hide'?0:100));var direction=o.options.direction||'both';var origin=o.options.origin;if(mode!='effect'){options.origin=origin||['middle','center'];options.restore=true;}
var original={height:el.height(),width:el.width()};el.from=o.options.from||(mode=='show'?{height:0,width:0}:original);var factor={y:direction!='horizontal'?(percent/100):1,x:direction!='vertical'?(percent/100):1};el.to={height:original.height*factor.y,width:original.width*factor.x};if(o.options.fade){if(mode=='show'){el.from.opacity=0;el.to.opacity=1;};if(mode=='hide'){el.from.opacity=1;el.to.opacity=0;};};options.from=el.from;options.to=el.to;options.mode=mode;el.effect('size',options,o.duration,o.callback);el.dequeue();});};$.effects.size=function(o){return this.queue(function(){var el=$(this),props=['position','top','left','width','height','overflow','opacity'];var props1=['position','top','left','overflow','opacity'];var props2=['width','height','overflow'];var cProps=['fontSize'];var vProps=['borderTopWidth','borderBottomWidth','paddingTop','paddingBottom'];var hProps=['borderLeftWidth','borderRightWidth','paddingLeft','paddingRight'];var mode=$.effects.setMode(el,o.options.mode||'effect');var restore=o.options.restore||false;var scale=o.options.scale||'both';var origin=o.options.origin;var original={height:el.height(),width:el.width()};el.from=o.options.from||original;el.to=o.options.to||original;if(origin){var baseline=$.effects.getBaseline(origin,original);el.from.top=(original.height-el.from.height)*baseline.y;el.from.left=(original.width-el.from.width)*baseline.x;el.to.top=(original.height-el.to.height)*baseline.y;el.to.left=(original.width-el.to.width)*baseline.x;};var factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}};if(scale=='box'||scale=='both'){if(factor.from.y!=factor.to.y){props=props.concat(vProps);el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to);};if(factor.from.x!=factor.to.x){props=props.concat(hProps);el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from);el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to);};};if(scale=='content'||scale=='both'){if(factor.from.y!=factor.to.y){props=props.concat(cProps);el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to);};};$.effects.save(el,restore?props:props1);el.show();$.effects.createWrapper(el);el.css('overflow','hidden').css(el.from);if(scale=='content'||scale=='both'){vProps=vProps.concat(['marginTop','marginBottom']).concat(cProps);hProps=hProps.concat(['marginLeft','marginRight']);props2=props.concat(vProps).concat(hProps);el.find("*[width]").each(function(){child=$(this);if(restore)$.effects.save(child,props2);var c_original={height:child.height(),width:child.width()};child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x};child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x};if(factor.from.y!=factor.to.y){child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from);child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to);};if(factor.from.x!=factor.to.x){child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from);child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to);};child.css(child.from);child.animate(child.to,o.duration,o.options.easing,function(){if(restore)$.effects.restore(child,props2);});});};el.animate(el.to,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(el.to.opacity===0){el.css('opacity',el.from.opacity);}
if(mode=='hide')el.hide();$.effects.restore(el,restore?props:props1);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue();}});});};})(jQuery);(function($){$.effects.shake=function(o){return this.queue(function(){var el=$(this),props=['position','top','left'];var mode=$.effects.setMode(el,o.options.mode||'effect');var direction=o.options.direction||'left';var distance=o.options.distance||20;var times=o.options.times||3;var speed=o.duration||o.options.duration||140;$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var animation={},animation1={},animation2={};animation[ref]=(motion=='pos'?'-=':'+=')+distance;animation1[ref]=(motion=='pos'?'+=':'-=')+distance*2;animation2[ref]=(motion=='pos'?'-=':'+=')+distance*2;el.animate(animation,speed,o.options.easing);for(var i=1;i<times;i++){el.animate(animation1,speed,o.options.easing).animate(animation2,speed,o.options.easing);};el.animate(animation1,speed,o.options.easing).animate(animation,speed/2,o.options.easing,function(){$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);});el.queue('fx',function(){el.dequeue();});el.dequeue();});};})(jQuery);(function($){$.effects.slide=function(o){return this.queue(function(){var el=$(this),props=['position','top','left'];var mode=$.effects.setMode(el,o.options.mode||'show');var direction=o.options.direction||'left';$.effects.save(el,props);el.show();$.effects.createWrapper(el).css({overflow:'hidden'});var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var distance=o.options.distance||(ref=='top'?el.outerHeight({margin:true}):el.outerWidth({margin:true}));if(mode=='show')el.css(ref,motion=='pos'?-distance:distance);var animation={};animation[ref]=(mode=='show'?(motion=='pos'?'+=':'-='):(motion=='pos'?'-=':'+='))+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue();}});});};})(jQuery);(function($){$.effects.transfer=function(o){return this.queue(function(){var elem=$(this),target=$(o.options.to),endPosition=target.offset(),animation={top:endPosition.top,left:endPosition.left,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(o.options.className).css({top:startPosition.top,left:startPosition.left,height:elem.innerHeight(),width:elem.innerWidth(),position:'absolute'}).animate(animation,o.duration,o.options.easing,function(){transfer.remove();(o.callback&&o.callback.apply(elem[0],arguments));elem.dequeue();});});};})(jQuery);jQuery(function($){var csrf_token=$('meta[name=csrf-token]').attr('content'),csrf_param=$('meta[name=csrf-param]').attr('content');$.fn.extend({triggerAndReturn:function(name,data){var event=new $.Event(name);this.trigger(event,data);return event.result!==false;},callRemote:function(){var el=this,data=el.is('form')?el.serializeArray():[],method=el.attr('method')||el.attr('data-method')||'GET',url=el.attr('action')||el.attr('href');if(url===undefined){throw"No URL specified for remote call (action or href must be present).";}else{if(el.triggerAndReturn('ajax:before')){$.ajax({url:url,data:data,dataType:'script',type:method.toUpperCase(),beforeSend:function(xhr){el.trigger('ajax:loading',xhr);},success:function(data,status,xhr){el.trigger('ajax:success',[data,status,xhr]);},complete:function(xhr){el.trigger('ajax:complete',xhr);},error:function(xhr,status,error){el.trigger('ajax:failure',[xhr,status,error]);}});}
el.trigger('ajax:after');}}});$('a[data-confirm],input[data-confirm]').live('click',function(){var el=$(this);if(el.triggerAndReturn('confirm')){if(!confirm(el.attr('data-confirm'))){return false;}}});$('form[data-remote]').live('submit',function(e){$(this).callRemote();e.preventDefault();});$('a[data-remote],input[data-remote]').live('click',function(e){$(this).callRemote();e.preventDefault();});$('a[data-method]:not([data-remote])').live('click',function(e){var link=$(this),href=link.attr('href'),method=link.attr('data-method'),form=$('<form method="post" action="'+href+'">'),metadata_input='<input name="_method" value="'+method+'" type="hidden" />';if(csrf_param!=null&&csrf_token!=null){metadata_input+='<input name="'+csrf_param+'" value="'+csrf_token+'" type="hidden" />';}
form.hide().append(metadata_input).appendTo('body');e.preventDefault();form.submit();});var disable_with_input_selector='input[data-disable-with]';var disable_with_form_selector='form[data-remote]:has('+disable_with_input_selector+')';$(disable_with_form_selector).live('ajax:before',function(){$(this).find(disable_with_input_selector).each(function(){var input=$(this);input.data('enable-with',input.val()).attr('value',input.attr('data-disable-with')).attr('disabled','disabled');});});$(disable_with_form_selector).live('ajax:after',function(){$(this).find(disable_with_input_selector).each(function(){var input=$(this);input.removeAttr('disabled').val(input.data('enable-with'));});});});(function($){$.widget('ui.toggleboxes',{options:{active:0,animated:'slide',autoHeight:true,clearStyle:false,collapsible:false,event:'click',fillSpace:false,header:'> li > :first-child,> :not(li):even',boxclass:'ui-accordion',icons:{header:'ui-icon-triangle-1-e',headerSelected:'ui-icon-triangle-1-s'},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase();}},_create:function(){var o=this.options,self=this;this.running=0;this.element.addClass(o.boxclass+' ui-widget ui-helper-reset');if(this.element[0].nodeName=='UL'){this.element.children('li').addClass(o.boxclass+'-li-fix');}
this.headers=this.element.find(o.header).addClass(o.boxclass+'-header ui-helper-reset ui-state-default ui-corner-all').bind('mouseenter.toggleboxes',function(){$(this).addClass('ui-state-hover');}).bind('mouseleave.toggleboxes',function(){$(this).removeClass('ui-state-hover');}).bind('focus.toggleboxes',function(){$(this).addClass('ui-state-focus');}).bind('blur.toggleboxes',function(){$(this).removeClass('ui-state-focus');});this.headers.next().addClass(o.boxclass+'-content ui-helper-reset ui-widget-content ui-corner-bottom');if(o.navigation){var current=this.element.find('a').filter(o.navigationFilter);if(current.length){var header=current.closest('.'+o.boxclass+'-header');if(header.length){this.active=header;}else{this.active=current.closest('.'+o.boxclass+'-content').prev();}}}
this.active=this._findActive(this.active||o.active).toggleClass('ui-state-default').toggleClass('ui-state-active').toggleClass('ui-corner-all').toggleClass('ui-corner-top');this.active.next().addClass(o.boxclass+'-content-active');this._createIcons();if($.browser.msie){this.element.find('a').css('zoom','1');}
this.resize();this.element.attr('role','tablist');this.headers.attr('role','tab').bind('keydown',function(event){return self._keydown(event);}).next().attr('role','tabpanel');this.headers.not(this.active||'').attr('aria-expanded','false').attr('tabIndex','-1').next().hide();if(!this.active.length){this.headers.eq(0).attr('tabIndex','0');}else{this.active.attr('aria-expanded','true').attr('tabIndex','0');}
if(!$.browser.safari){this.headers.find('a').attr('tabIndex','-1');}
if(o.event){this.headers.bind((o.event)+'.toggleboxes',function(event){self._clickHandler.call(self,event,this);event.preventDefault();});}},_createIcons:function(){var o=this.options;if(o.icons){$('<span/>').addClass('ui-icon '+o.icons.header).prependTo(this.headers);this.active.find('.ui-icon').toggleClass(o.icons.header).toggleClass(o.icons.headerSelected);this.element.addClass(o.boxclass+'-icons');}},_destroyIcons:function(){this.headers.children('.ui-icon').remove();this.element.removeClass(o.boxclass+'-icons');},destroy:function(){var o=this.options;this.element.removeClass(o.boxclass+' ui-widget ui-helper-reset').removeAttr('role').unbind('.toggleboxes').removeData('toggleboxes');this.headers.unbind('.toggleboxes').removeClass(o.boxclass+'-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top').removeAttr('role').removeAttr('aria-expanded').removeAttr('tabindex');this.headers.find('a').removeAttr('tabindex');this._destroyIcons();var contents=this.headers.next().css('display','').removeAttr('role').removeClass('ui-helper-reset ui-widget-content ui-corner-bottom '+o.boxclass+'-content '+o.boxclass+'-content-active');if(o.autoHeight||o.fillHeight){contents.css('height','');}
return this;},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key=='active'){this.activate(value);}
if(key=='icons'){this._destroyIcons();if(value){this._createIcons();}}},_keydown:function(event){var o=this.options,keyCode=$.ui.keyCode;if(o.disabled||event.altKey||event.ctrlKey){return;}
var length=this.headers.length;var currentIndex=this.headers.index(event.target);var toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._clickHandler({target:event.target},event.target);event.preventDefault();}
if(toFocus){$(event.target).attr('tabIndex','-1');$(toFocus).attr('tabIndex','0');toFocus.focus();return false;}
return true;},resize:function(){var o=this.options,maxHeight;if(o.fillSpace){if($.browser.msie){var defOverflow=this.element.parent().css('overflow');this.element.parent().css('overflow','hidden');}
maxHeight=this.element.parent().height();if($.browser.msie){this.element.parent().css('overflow',defOverflow);}
this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()));}).css('overflow','auto');}else if(o.autoHeight){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).height());}).height(maxHeight);}
return this;},activate:function(index){this.options.active=index;var active=this._findActive(index)[0];this._clickHandler({target:active},active);return this;},_findActive:function(selector){return selector?typeof selector=='number'?this.headers.filter(':eq('+selector+')'):this.headers.not(this.headers.not(selector)):selector===false?$([]):this.headers.filter(':eq(0)');},_clickHandler:function(event,target){var o=this.options;if(o.disabled){return false;}
var h=$(event.currentTarget||target);if(h.next().length==0&&o.navigation){var go=h.attr('href');if(typeof go=="undefined"){go=h.children('a').attr('href');}
window.location=go;}
if((h.attr('aria-expanded')=='true')){h.removeClass('ui-state-active ui-corner-top').addClass('ui-state-default ui-corner-all').find('.ui-icon').removeClass(o.icons.headerSelected).addClass(o.icons.header);var toHide=h.next(),data={options:o},toShow=$([]),down=1;h.attr('aria-expanded','false');}else{h.removeClass('ui-state-default ui-corner-all').addClass('ui-state-active ui-corner-top').find('.ui-icon').removeClass(o.icons.header).addClass(o.icons.headerSelected);h.next().removeClass(o.boxclass+'-content-active').addClass(o.boxclass+'-content-active');var toShow=h.next(),data={options:o},toHide=$([]),down=0;h.attr('aria-expanded','true');}
if(this.running){return false;}
this._toggle(toShow,toHide,data,down);return false;},_toggle:function(toShow,toHide,data,down){var t=this,o=t.options;t.toShow=toShow;t.toHide=toHide;t.data=data;var complete=function(){if(!t){return;}
return t._completed.apply(t,arguments);};t._trigger('changestart',null,t.data);t.running=toHide.size()===0?toShow.size():toHide.size();if(o.animated){var animOptions={toShow:toShow,toHide:toHide,complete:complete,down:down,autoHeight:o.autoHeight||o.fillSpace};if(!o.proxied){o.proxied=o.animated;}
if(!o.proxiedDuration){o.proxiedDuration=o.duration;}
o.animated=$.isFunction(o.proxied)?o.proxied(animOptions):o.proxied;o.duration=$.isFunction(o.proxiedDuration)?o.proxiedDuration(animOptions):o.proxiedDuration;var animations=$.ui.toggleboxes.animations,duration=o.duration,easing=o.animated;if(!animations[easing]){animations[easing]=function(options){this.slide(options,{easing:easing,duration:duration||700});};}
animations[easing](animOptions);}else{toHide.hide();toShow.show();complete(true);}
toHide.prev().attr('aria-expanded','false').attr('tabIndex','-1').blur();toShow.prev().attr('aria-expanded','true').attr('tabIndex','0').focus();},_completed:function(cancel){var o=this.options;this.running=cancel?0:--this.running;if(this.running){return;}
if(o.clearStyle){this.toShow.add(this.toHide).css({'height':'','overflow':''});}
this.toHide.removeClass(o.boxclass+'-content-active');this._trigger('change',null,this.data);}});$.extend($.ui.toggleboxes,{version:'1.8',animations:{slide:function(options,additions){options=$.extend({easing:'swing',duration:300},options,additions);if(!options.toHide.size()){options.toShow.animate({'height':'show'},options);return;}
if(!options.toShow.size()){options.toHide.animate({'height':'hide'},options);return;}
var overflow=options.toShow.css('overflow'),percentDone=0,showProps={},hideProps={},fxAttrs=['height','paddingTop','paddingBottom'],originalWidth;var s=options.toShow;originalWidth=s[0].style.width;s.width(parseInt(s.parent().width(),10)-parseInt(s.css('paddingLeft'),10)-parseInt(s.css('paddingRight'),10)-(parseInt(s.css('borderLeftWidth'),10)||0)-(parseInt(s.css('borderRightWidth'),10)||0));$.each(fxAttrs,function(i,prop){hideProps[prop]='hide';var parts=(''+$.css(options.toShow[0],prop)).match(/^([\d+-.]+)(.*)$/);showProps[prop]={'value':parts[1],'unit':parts[2]||'px'};});options.toShow.css({'height':0,'overflow':'hidden'}).show();options.toHide.filter(':hidden').each(options.complete).end().filter(':visible').animate(hideProps,{step:function(now,settings){if(settings.prop=='height'){percentDone=(settings.end-settings.start===0)?0:(settings.now-settings.start)/(settings.end-settings.start);}
options.toShow[0].style[settings.prop]=(percentDone*showProps[settings.prop].value)+showProps[settings.prop].unit;},duration:options.duration,easing:options.easing,complete:function(){if(!options.autoHeight){options.toShow.css('height','');}
options.toShow.css('width',originalWidth);options.toShow.css({'overflow':overflow});options.complete();}});},bounceslide:function(options){this.slide(options,{easing:options.down?'easeOutBounce':'swing',duration:options.down?1000:200});}}});})(jQuery);(function($){$.fn.tipTip=function(options){var defaults={activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){}};var opts=$.extend(defaults,options);if($("#tiptip_holder").length<=0){var tiptip_holder=$('<div id="tiptip_holder" style="max-width:'+opts.maxWidth+';"></div>');var tiptip_content=$('<div id="tiptip_content"></div>');var tiptip_arrow=$('<div id="tiptip_arrow"></div>');$("body").append(tiptip_holder.html(tiptip_content).prepend(tiptip_arrow.html('<div id="tiptip_arrow_inner"></div>')));}else{var tiptip_holder=$("#tiptip_holder");var tiptip_content=$("#tiptip_content");var tiptip_arrow=$("#tiptip_arrow");}
return this.each(function(){var org_elem=$(this);if(opts.content){var org_title=opts.content;}else{var org_title=org_elem.attr(opts.attribute);}
if(org_title!=""){if(!opts.content){org_elem.removeAttr(opts.attribute);}
var timeout=false;if(opts.activation=="hover"){org_elem.hover(function(){active_tiptip();},function(){if(!opts.keepAlive){deactive_tiptip();}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip();});}}else if(opts.activation=="focus"){org_elem.focus(function(){active_tiptip();}).blur(function(){deactive_tiptip();});}else if(opts.activation=="click"){org_elem.click(function(){active_tiptip();return false;}).hover(function(){},function(){if(!opts.keepAlive){deactive_tiptip();}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip();});}}
function active_tiptip(){opts.enter.call(this);tiptip_content.html(org_title);tiptip_holder.hide().removeAttr("class").css("margin","0");tiptip_arrow.removeAttr("style");var top=parseInt(org_elem.offset()['top']);var left=parseInt(org_elem.offset()['left']);var org_width=parseInt(org_elem.outerWidth());var org_height=parseInt(org_elem.outerHeight());var tip_w=tiptip_holder.outerWidth();var tip_h=tiptip_holder.outerHeight();var w_compare=Math.round((org_width-tip_w)/2);var h_compare=Math.round((org_height-tip_h)/2);var marg_left=Math.round(left+w_compare);var marg_top=Math.round(top+org_height+opts.edgeOffset);var t_class="";var arrow_top="";var arrow_left=Math.round(tip_w-12)/2;if(opts.defaultPosition=="bottom"){t_class="_bottom";}else if(opts.defaultPosition=="top"){t_class="_top";}else if(opts.defaultPosition=="left"){t_class="_left";}else if(opts.defaultPosition=="right"){t_class="_right";}
var right_compare=(w_compare+left)<parseInt($(window).scrollLeft());var left_compare=(tip_w+left)>parseInt($(window).width());if((right_compare&&w_compare<0)||(t_class=="_right"&&!left_compare)||(t_class=="_left"&&left<(tip_w+opts.edgeOffset+5))){t_class="_right";arrow_top=Math.round(tip_h-13)/2;arrow_left=-12;marg_left=Math.round(left+org_width+opts.edgeOffset);marg_top=Math.round(top+h_compare);}else if((left_compare&&w_compare<0)||(t_class=="_left"&&!right_compare)){t_class="_left";arrow_top=Math.round(tip_h-13)/2;arrow_left=Math.round(tip_w);marg_left=Math.round(left-(tip_w+opts.edgeOffset+5));marg_top=Math.round(top+h_compare);}
var top_compare=(top+org_height+opts.edgeOffset+tip_h+8)>parseInt($(window).height()+$(window).scrollTop());var bottom_compare=((top+org_height)-(opts.edgeOffset+tip_h+8))<0;if(top_compare||(t_class=="_bottom"&&top_compare)||(t_class=="_top"&&!bottom_compare)){if(t_class=="_top"||t_class=="_bottom"){t_class="_top";}else{t_class=t_class+"_top";}
arrow_top=tip_h;marg_top=Math.round(top-(tip_h+5+opts.edgeOffset));}else if(bottom_compare|(t_class=="_top"&&bottom_compare)||(t_class=="_bottom"&&!top_compare)){if(t_class=="_top"||t_class=="_bottom"){t_class="_bottom";}else{t_class=t_class+"_bottom";}
arrow_top=-12;marg_top=Math.round(top+org_height+opts.edgeOffset);}
if(t_class=="_right_top"||t_class=="_left_top"){marg_top=marg_top+5;}else if(t_class=="_right_bottom"||t_class=="_left_bottom"){marg_top=marg_top-5;}
if(t_class=="_left_top"||t_class=="_left_bottom"){marg_left=marg_left+5;}
tiptip_arrow.css({"margin-left":arrow_left+"px","margin-top":arrow_top+"px"});tiptip_holder.css({"margin-left":marg_left+"px","margin-top":marg_top+"px"}).attr("class","tip"+t_class);if(timeout){clearTimeout(timeout);}
timeout=setTimeout(function(){tiptip_holder.stop(true,true).fadeIn(opts.fadeIn);},opts.delay);}
function deactive_tiptip(){opts.exit.call(this);if(timeout){clearTimeout(timeout);}
tiptip_holder.fadeOut(opts.fadeOut);}}});}})(jQuery);;(function($){$.jgrid={defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:['equal','not equal','less','less or equal','greater','greater or equal','begins with','does not begin with','is in','is not in','ends with','does not end with','contains','does not contain'],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:" match",rulesText:" rules"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:" ",defaultValue:'0'},number:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,defaultValue:'0.00'},currency:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,prefix:"",suffix:"",defaultValue:'0.00'},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(j){return j<11||j>13?['st','nd','rd','th'][Math.min((j-1)%10,3)]:'th'},srcformat:'Y-m-d',newformat:'d/m/Y',masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:false},baseLinkUrl:'',showAction:'',target:'',checkbox:{disabled:true},idName:'id'}};})(jQuery);;(function($){$.jgrid=$.jgrid||{};$.extend($.jgrid,{htmlDecode:function(value){if(value=='&nbsp;'||value=='&#160;'||(value.length==1&&value.charCodeAt(0)==160)){return"";}
return!value?value:String(value).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"');},htmlEncode:function(value){return!value?value:String(value).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;");},format:function(format){var args=$.makeArray(arguments).slice(1);if(format===undefined){format="";}
return format.replace(/\{(\d+)\}/g,function(m,i){return args[i];});},getCellIndex:function(cell){cell=$(cell);cell=(!cell.is('td')&&!cell.is('th')?cell.closest("td,th"):cell)[0];if($.browser.msie){return $.inArray(cell,cell.parentNode.cells);}
return cell.cellIndex;},stripHtml:function(v){v=v+"";var regexp=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(v){v=v.replace(regexp,"");return(v&&v!=='&nbsp;'&&v!=='&#160;')?v.replace(/\"/g,"'"):"";}else{return v;}},stringToDoc:function(xmlString){var xmlDoc;if(typeof xmlString!=='string'){return xmlString;}
try{var parser=new DOMParser();xmlDoc=parser.parseFromString(xmlString,"text/xml");}
catch(e){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(xmlString);}
return(xmlDoc&&xmlDoc.documentElement&&xmlDoc.documentElement.tagName!='parsererror')?xmlDoc:null;},parse:function(jsonString){var js=jsonString;if(js.substr(0,9)=="while(1);"){js=js.substr(9);}
if(js.substr(0,2)=="/*"){js=js.substr(2,js.length-4);}
if(!js){js="{}";}
return($.jgrid.useJSON===true&&typeof(JSON)==='object'&&typeof(JSON.parse)==='function')?JSON.parse(js):eval('('+js+')');},jqID:function(sid){sid=sid+"";return sid.replace(/([\.\:\[\]])/g,"\\$1");},ajaxOptions:{},extend:function(methods){$.extend($.fn.jqGrid,methods);if(!this.no_legacy_api){$.fn.extend(methods);}}});$.fn.jqGrid=function(pin){if(typeof pin=='string'){var fn=$.fn.jqGrid[pin];if(!fn){throw("jqGrid - No such method: "+pin);}
var args=$.makeArray(arguments).slice(1);return fn.apply(this,args);}
return this.each(function(){if(this.grid){return;}
var p=$.extend(true,{url:"",height:150,page:1,rowNum:20,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:'nested',treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,"top"],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:25,rownumbers:false,pagerpos:'center',recordpos:'right',footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:'ui-priority-secondary',viewsortcols:[false,'vertical',true],resizeclass:'',autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:true,headertitles:false,scrollTimeout:200,restful:false},$.jgrid.defaults,pin||{});var grid={headers:[],cols:[],footers:[],dragStart:function(i,x,y){this.resizing={idx:i,startX:x.clientX,sOL:y[0]};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+p.id,"#gbox_"+p.id);this.curGbox.css({display:"block",left:y[0],top:y[1],height:y[2]});if($.isFunction(p.resizeStart)){p.resizeStart.call(this,x,i);}
document.onselectstart=function(){return false;};},dragMove:function(x){if(this.resizing){var diff=x.clientX-this.resizing.startX,h=this.headers[this.resizing.idx],newWidth=p.direction==="ltr"?h.width+diff:h.width-diff,hn,nWn;if(newWidth>33){this.curGbox.css({left:this.resizing.sOL+diff});if(p.forceFit===true){hn=this.headers[this.resizing.idx+p.nv];nWn=p.direction==="ltr"?hn.width-diff:hn.width+diff;if(nWn>33){h.newWidth=newWidth;hn.newWidth=nWn;}}else{this.newWidth=p.direction==="ltr"?p.tblwidth+diff:p.tblwidth-diff;h.newWidth=newWidth;}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var idx=this.resizing.idx,nw=this.headers[idx].newWidth||this.headers[idx].width;nw=parseInt(nw,10);this.resizing=false;$("#rs_m"+p.id).css("display","none");p.colModel[idx].width=nw;this.headers[idx].width=nw;this.headers[idx].el.style.width=nw+"px";if(this.cols.length>0){this.cols[idx].style.width=nw+"px";}
if(this.footers.length>0){this.footers[idx].style.width=nw+"px";}
if(p.forceFit===true){nw=this.headers[idx+p.nv].newWidth||this.headers[idx+p.nv].width;this.headers[idx+p.nv].width=nw;this.headers[idx+p.nv].el.style.width=nw+"px";if(this.cols.length>0){this.cols[idx+p.nv].style.width=nw+"px";}
if(this.footers.length>0){this.footers[idx+p.nv].style.width=nw+"px";}
p.colModel[idx+p.nv].width=nw;}else{p.tblwidth=this.newWidth||p.tblwidth;$('table:first',this.bDiv).css("width",p.tblwidth+"px");$('table:first',this.hDiv).css("width",p.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(p.footerrow){$('table:first',this.sDiv).css("width",p.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft;}}
if($.isFunction(p.resizeStop)){p.resizeStop.call(this,nw,idx);}}
this.curGbox=null;document.onselectstart=function(){return true;};},populateVisible:function(){if(grid.timer){clearTimeout(grid.timer);}
grid.timer=null;var dh=$(grid.bDiv).height();if(!dh){return;}
var table=$("table:first",grid.bDiv);var rows=$("> tbody > tr:visible:first",table);var rh=rows.outerHeight()||grid.prevRowHeight;if(!rh){return;}
grid.prevRowHeight=rh;var rn=p.rowNum;var scrollTop=grid.scrollTop=grid.bDiv.scrollTop;var ttop=Math.round(table.position().top)-scrollTop;var tbot=ttop+table.height();var div=rh*rn;var page,npage,empty;if(ttop<=0&&(p.lastpage===undefined||parseInt((tbot+scrollTop+div-1)/div,10)<=p.lastpage))
{npage=parseInt((dh-tbot+div-1)/div,10);if(tbot>=0||npage<2||p.scroll===true){page=Math.round((tbot+scrollTop)/div)+1;ttop=-1;}else{ttop=1;}}
if(ttop>0){page=parseInt(scrollTop/div,10)+1;npage=parseInt((scrollTop+dh)/div,10)+2-page;empty=true;}
if(npage){if(p.lastpage&&page>p.lastpage){return;}
if(grid.hDiv.loading){grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout);}else{p.page=page;if(empty){grid.selectionPreserver(table[0]);grid.emptyRows(grid.bDiv,false);}
grid.populate(npage);}}},scrollGrid:function(){if(p.scroll){var scrollTop=grid.bDiv.scrollTop;if(scrollTop!=grid.scrollTop){grid.scrollTop=scrollTop;if(grid.timer){clearTimeout(grid.timer);}
grid.timer=setTimeout(grid.populateVisible,200);}}
grid.hDiv.scrollLeft=grid.bDiv.scrollLeft;if(p.footerrow){grid.sDiv.scrollLeft=grid.bDiv.scrollLeft;}},selectionPreserver:function(ts){var p=ts.p;var sr=p.selrow,sra=p.selarrrow?$.makeArray(p.selarrrow):null;var left=ts.grid.bDiv.scrollLeft;var complete=p.gridComplete;p.gridComplete=function(){p.selrow=null;p.selarrrow=[];if(p.multiselect&&sra&&sra.length>0){for(var i=0;i<sra.length;i++){if(sra[i]!=sr){$(ts).jqGrid("setSelection",sra[i],false);}}}
if(sr){$(ts).jqGrid("setSelection",sr,false);}
ts.grid.bDiv.scrollLeft=left;p.gridComplete=complete;if(p.gridComplete){complete();}};}};this.p=p;var i,dir,ts;if(this.p.colNames.length===0){for(i=0;i<this.p.colModel.length;i++){this.p.colNames[i]=this.p.colModel[i].label||this.p.colModel[i].name;}}
if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.errors.model);return;}
var gv=$("<div class='ui-jqgrid-view'></div>"),ii,isMSIE=$.browser.msie?true:false,isSafari=$.browser.safari?true:false;ts=this;ts.p.direction=$.trim(ts.p.direction.toLowerCase());if($.inArray(ts.p.direction,["ltr","rtl"])==-1){ts.p.direction="ltr";}
dir=ts.p.direction;$(gv).insertBefore(this);$(this).appendTo(gv).removeClass("scroll");var eg=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(eg).insertBefore(gv).attr({"id":"gbox_"+this.id,"dir":dir});$(gv).appendTo(eg).attr("id","gview_"+this.id);if(isMSIE&&$.browser.version<=6){ii='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>';}else{ii="";}
$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(ii).insertBefore(gv);$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(gv);$(this).attr({cellSpacing:"0",cellPadding:"0",border:"0","role":"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var sortkeys=["shiftKey","altKey","ctrlKey"],intNum=function(val,defval){val=parseInt(val,10);if(isNaN(val)){return defval?defval:0;}
else{return val;}},formatCol=function(pos,rowInd,tv){var cm=ts.p.colModel[pos],ral=cm.align,result="style=\"",clas=cm.classes,nm=cm.name;if(ral){result+="text-align:"+ral+";";}
if(cm.hidden===true){result+="display:none;";}
if(rowInd===0){result+="width: "+grid.headers[pos].width+"px;";}
result+="\""+(clas!==undefined?(" class=\""+clas+"\""):"")+((cm.title&&tv)?(" title=\""+$.jgrid.stripHtml(tv)+"\""):"");result+=" aria-describedby=\""+ts.p.id+"_"+nm+"\"";return result;},cellVal=function(val){return val===undefined||val===null||val===""?"&#160;":(ts.p.autoencode?$.jgrid.htmlEncode(val):val+"");},formatter=function(rowId,cellval,colpos,rwdat,_act){var cm=ts.p.colModel[colpos],v;if(typeof cm.formatter!=='undefined'){var opts={rowId:rowId,colModel:cm,gid:ts.p.id};if($.isFunction(cm.formatter)){v=cm.formatter.call(ts,cellval,opts,rwdat,_act);}else if($.fmatter){v=$.fn.fmatter(cm.formatter,cellval,opts,rwdat,_act);}else{v=cellVal(cellval);}}else{v=cellVal(cellval);}
return v;},addCell=function(rowId,cell,pos,irow,srvr){var v,prp;v=formatter(rowId,cell,pos,srvr,'add');prp=formatCol(pos,irow,v);return"<td role=\"gridcell\" "+prp+">"+v+"</td>";},addMulti=function(rowid,pos,irow){var v="<input role=\"checkbox\" type=\"checkbox\""+" id=\"jqg_"+rowid+"\" class=\"cbox\" name=\"jqg_"+rowid+"\"/>",prp=formatCol(pos,irow,'');return"<td role=\"gridcell\" aria-describedby=\""+ts.p.id+"_cb\" "+prp+">"+v+"</td>";},addRowNum=function(pos,irow,pG,rN){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow,prp=formatCol(pos,irow,'');return"<td role=\"gridcell\" aria-describedby=\""+ts.p.id+"_rn\" class=\"ui-state-default jqgrid-rownum\" "+prp+">"+v+"</td>";},reader=function(datatype){var field,f=[],j=0,i;for(i=0;i<ts.p.colModel.length;i++){field=ts.p.colModel[i];if(field.name!=='cb'&&field.name!=='subgrid'&&field.name!=='rn'){f[j]=(datatype=="xml")?field.xmlmap||field.name:field.jsonmap||field.name;j++;}}
return f;},orderedCols=function(offset){var order=ts.p.remapColumns;if(!order||!order.length){order=$.map(ts.p.colModel,function(v,i){return i;});}
if(offset){order=$.map(order,function(v){return v<offset?null:v-offset;});}
return order;},emptyRows=function(parent,scroll){if(ts.p.deepempty){$("tbody:first tr",parent).remove();}
else{$("tbody:first",parent).empty();}
if(scroll&&ts.p.scroll){$(">div:first",parent).css({height:"auto"}).children("div:first").css({height:0,display:"none"});parent.scrollTop=0;}},getAccessor=function(obj,expr){var ret,p,prm,i;if(typeof expr==='function'){return expr(obj);}
ret=obj[expr];if(ret===undefined){if(typeof expr==='string'){prm=expr.split('.');}
try{i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p];}}}catch(e){}}
return ret;},addXmlData=function(xml,t,rcnt,more,adjust){var startReq=new Date();ts.p.reccount=0;if($.isXMLDoc(xml)){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows(t,false);rcnt=0;}else{rcnt=rcnt>0?rcnt:0;}}else{return;}
var i,fpos,ir=0,v,row,gi=0,si=0,ni=0,idn,getId,f=[],F,rd={},rl=ts.rows.length,xmlr,rid,rowData=[],ari=0,cn=(ts.p.altRows===true)?" "+ts.p.altclass:"",cn1;if(!ts.p.xmlReader.repeatitems){f=reader("xml");}
if(ts.p.keyIndex===false){idn=ts.p.xmlReader.id;}else{idn=ts.p.keyIndex;}
if(f.length>0&&!isNaN(idn)){if(ts.p.remapColumns&&ts.p.remapColumns.length){idn=$.inArray(idn,ts.p.remapColumns);}
idn=f[idn];}
if((idn+"").indexOf("[")===-1){if(f.length){getId=function(trow,k){return $(idn,trow).text()||k;};}else{getId=function(trow,k){return $(ts.p.xmlReader.cell,trow).eq(idn).text()||k;};}}
else{getId=function(trow,k){return trow.getAttribute(idn.replace(/[\[\]]/g,""))||k;};}
ts.p.userData={};$(ts.p.xmlReader.page,xml).each(function(){ts.p.page=this.textContent||this.text||0;});$(ts.p.xmlReader.total,xml).each(function(){ts.p.lastpage=this.textContent||this.text;if(ts.p.lastpage===undefined){ts.p.lastpage=1;}});$(ts.p.xmlReader.records,xml).each(function(){ts.p.records=this.textContent||this.text||0;});$(ts.p.xmlReader.userdata,xml).each(function(){ts.p.userData[this.getAttribute("name")]=this.textContent||this.text;});var gxml=$(ts.p.xmlReader.root+" "+ts.p.xmlReader.row,xml),gl=gxml.length,j=0;if(gxml&&gl){var rn=parseInt(ts.p.rowNum,10),br=ts.p.scroll?(parseInt(ts.p.page,10)-1)*rn+1:1,altr;if(adjust){rn*=adjust+1;}
var afterInsRow=$.isFunction(ts.p.afterInsertRow);while(j<gl){xmlr=gxml[j];rid=getId(xmlr,br+j);altr=rcnt===0?0:rcnt+1;cn1=(altr+j)%2==1?cn:'';rowData[ari++]="<tr id=\""+rid+"\" role=\"row\" class =\"ui-widget-content jqgrow ui-row-"+ts.p.direction+""+cn1+"\">";if(ts.p.rownumbers===true){rowData[ari++]=addRowNum(0,j,ts.p.page,ts.p.rowNum);ni=1;}
if(ts.p.multiselect===true){rowData[ari++]=addMulti(rid,ni,j);gi=1;}
if(ts.p.subGrid===true){rowData[ari++]=$(ts).jqGrid("addSubGridCell",gi+ni,j+rcnt);si=1;}
if(ts.p.xmlReader.repeatitems){if(!F){F=orderedCols(gi+si+ni);}
var cells=$(ts.p.xmlReader.cell,xmlr);$.each(F,function(k){var cell=cells[this];if(!cell){return false;}
v=cell.textContent||cell.text;rd[ts.p.colModel[k+gi+si+ni].name]=v;rowData[ari++]=addCell(rid,v,k+gi+si+ni,j+rcnt,xmlr);});}else{for(i=0;i<f.length;i++){v=$(f[i],xmlr).text();rd[ts.p.colModel[i+gi+si+ni].name]=v;rowData[ari++]=addCell(rid,v,i+gi+si+ni,j+rcnt,xmlr);}}
rowData[ari++]="</tr>";if(ts.p.gridview===false){if(ts.p.treeGrid===true){fpos=ts.p.treeANode>=-1?ts.p.treeANode:0;row=$(rowData.join(''))[0];try{$(ts).jqGrid("setTreeNode",rd,row);}catch(e){}
if(rl===0){$("tbody:first",t).append(row);}else{$(ts.rows[j+fpos+rcnt]).after(row);}}else{$("tbody:first",t).append(rowData.join(''));}
if(ts.p.subGrid===true){try{$(ts).jqGrid("addSubGrid",ts.rows[ts.rows.length-1],gi+ni);}catch(_){}}
if(afterInsRow){ts.p.afterInsertRow.call(ts,rid,rd,xmlr);}
rowData=[];ari=0;}
rd={};ir++;j++;if(ir==rn){break;}}}
if(ts.p.gridview===true){$("tbody:first",t).append(rowData.join(''));}
ts.p.totaltime=new Date()-startReq;if(ir>0){ts.grid.cols=ts.rows[0].cells;if(ts.p.records===0){ts.p.records=gl;}}
rowData=null;if(!ts.p.treeGrid&&!ts.p.scroll){ts.grid.bDiv.scrollTop=0;}
ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){$(ts).jqGrid("footerData","set",ts.p.userData,true);}
if(!more){updatepager(false,true);}},addJSONData=function(data,t,rcnt,more,adjust){var startReq=new Date();ts.p.reccount=0;if(data){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows(t,false);rcnt=0;}else{rcnt=rcnt>0?rcnt:0;}}else{return;}
var ir=0,v,i,j,row,f=[],F,cur,gi=0,si=0,ni=0,len,drows,idn,rd={},fpos,rl=ts.rows.length,idr,rowData=[],ari=0,cn=(ts.p.altRows===true)?" "+ts.p.altclass:"",cn1,lp;ts.p.page=getAccessor(data,ts.p.jsonReader.page)||0;lp=getAccessor(data,ts.p.jsonReader.total);ts.p.lastpage=lp===undefined?1:lp;ts.p.records=getAccessor(data,ts.p.jsonReader.records)||0;ts.p.userData=getAccessor(data,ts.p.jsonReader.userdata)||{};if(!ts.p.jsonReader.repeatitems){F=f=reader("json");}
if(ts.p.keyIndex===false){idn=ts.p.jsonReader.id;}else{idn=ts.p.keyIndex;}
if(f.length>0&&!isNaN(idn)){if(ts.p.remapColumns&&ts.p.remapColumns.length){idn=$.inArray(idn,ts.p.remapColumns);}
idn=f[idn];}
drows=getAccessor(data,ts.p.jsonReader.root);if(drows){len=drows.length;i=0;var rn=parseInt(ts.p.rowNum,10),br=ts.p.scroll?(parseInt(ts.p.page,10)-1)*rn+1:1,altr;if(adjust){rn*=adjust+1;}
var afterInsRow=$.isFunction(ts.p.afterInsertRow);while(i<len){cur=drows[i];idr=getAccessor(cur,idn);if(idr===undefined){idr=br+i;if(f.length===0){if(ts.p.jsonReader.cell){var ccur=cur[ts.p.jsonReader.cell];idr=ccur[idn]||idr;ccur=null;}}}
altr=rcnt===0?0:rcnt+1;cn1=(altr+i)%2==1?cn:'';rowData[ari++]="<tr id=\""+idr+"\" role=\"row\" class= \"ui-widget-content jqgrow ui-row-"+ts.p.direction+""+cn1+"\">";if(ts.p.rownumbers===true){rowData[ari++]=addRowNum(0,i,ts.p.page,ts.p.rowNum);ni=1;}
if(ts.p.multiselect){rowData[ari++]=addMulti(idr,ni,i);gi=1;}
if(ts.p.subGrid){rowData[ari++]=$(ts).jqGrid("addSubGridCell",gi+ni,i+rcnt);si=1;}
if(ts.p.jsonReader.repeatitems){if(ts.p.jsonReader.cell){cur=getAccessor(cur,ts.p.jsonReader.cell);}
if(!F){F=orderedCols(gi+si+ni);}}
for(j=0;j<F.length;j++){v=getAccessor(cur,F[j]);rowData[ari++]=addCell(idr,v,j+gi+si+ni,i+rcnt,cur);rd[ts.p.colModel[j+gi+si+ni].name]=v;}
rowData[ari++]="</tr>";if(ts.p.gridview===false){if(ts.p.treeGrid===true){fpos=ts.p.treeANode>=-1?ts.p.treeANode:0;row=$(rowData.join(''))[0];try{$(ts).jqGrid("setTreeNode",rd,row);}catch(e){}
if(rl===0){$("tbody:first",t).append(row);}else{$(ts.rows[i+fpos+rcnt]).after(row);}}else{$("tbody:first",t).append(rowData.join(''));}
if(ts.p.subGrid===true){try{$(ts).jqGrid("addSubGrid",ts.rows[ts.rows.length-1],gi+ni);}catch(_){}}
if(afterInsRow){ts.p.afterInsertRow.call(ts,idr,rd,cur);}
rowData=[];ari=0;}
rd={};ir++;i++;if(ir==rn){break;}}
if(ts.p.gridview===true){$("tbody:first",t).append(rowData.join(''));}
ts.p.totaltime=new Date()-startReq;if(ir>0){ts.grid.cols=ts.rows[0].cells;if(ts.p.records===0){ts.p.records=len;}}}
if(!ts.p.treeGrid&&!ts.p.scroll){ts.grid.bDiv.scrollTop=0;}
ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){$(ts).jqGrid("footerData","set",ts.p.userData,true);}
if(!more){updatepager(false,true);}},updatepager=function(rn,dnd){var cp,last,base,from,to,tot,fmt,pgboxes="";base=parseInt(ts.p.page,10)-1;if(base<0){base=0;}
base=base*parseInt(ts.p.rowNum,10);to=base+ts.p.reccount;if(ts.p.scroll){var rows=$("tbody:first > tr",ts.grid.bDiv);base=to-rows.length;var rh=rows.outerHeight();if(rh){var top=base*rh;var height=parseInt(ts.p.records,10)*rh;$(">div:first",ts.grid.bDiv).css({height:height}).children("div:first").css({height:top,display:top?"":"none"});}}
pgboxes=ts.p.pager?ts.p.pager:"";pgboxes+=ts.p.toppager?(pgboxes?","+ts.p.toppager:ts.p.toppager):"";if(pgboxes){fmt=$.jgrid.formatter.integer||{};if(ts.p.loadonce){cp=last=1;ts.p.lastpage=ts.page=1;$(".selbox",pgboxes).attr("disabled",true);}else{cp=intNum(ts.p.page);last=intNum(ts.p.lastpage);$(".selbox",pgboxes).attr("disabled",false);}
if(ts.p.pginput===true){$('.ui-pg-input',pgboxes).val(ts.p.page);$('#sp_1',pgboxes).html($.fmatter?$.fmatter.util.NumberFormat(ts.p.lastpage,fmt):ts.p.lastpage);}
if(ts.p.viewrecords){if(ts.p.reccount===0){$(".ui-paging-info",pgboxes).html(ts.p.emptyrecords);}else{from=base+1;tot=ts.p.records;if($.fmatter){from=$.fmatter.util.NumberFormat(from,fmt);to=$.fmatter.util.NumberFormat(to,fmt);tot=$.fmatter.util.NumberFormat(tot,fmt);}
$(".ui-paging-info",pgboxes).html($.jgrid.format(ts.p.recordtext,from,to,tot));}}
if(ts.p.pgbuttons===true){if(cp<=0){cp=last=0;}
if(cp==1||cp===0){$("#first, #prev",ts.p.pager).addClass('ui-state-disabled').removeClass('ui-state-hover');if(ts.p.toppager){$("#first_t, #prev_t",ts.p.toppager).addClass('ui-state-disabled').removeClass('ui-state-hover');}}else{$("#first, #prev",ts.p.pager).removeClass('ui-state-disabled');if(ts.p.toppager){$("#first_t, #prev_t",ts.p.toppager).removeClass('ui-state-disabled');}}
if(cp==last||cp===0){$("#next, #last",ts.p.pager).addClass('ui-state-disabled').removeClass('ui-state-hover');if(ts.p.toppager){$("#next_t, #last_t",ts.p.toppager).addClass('ui-state-disabled').removeClass('ui-state-hover');}}else{$("#next, #last",ts.p.pager).removeClass('ui-state-disabled');if(ts.p.toppager){$("#next_t, #last_t",ts.p.toppager).removeClass('ui-state-disabled');}}}}
if(rn===true&&ts.p.rownumbers===true){$("td.jqgrid-rownum",ts.rows).each(function(i){$(this).html(base+1+i);});}
if(dnd&&ts.p.jqgdnd){$(ts).jqGrid('gridDnD','updateDnD');}
if($.isFunction(ts.p.gridComplete)){ts.p.gridComplete.call(ts);}},populate=function(npage){if(!ts.grid.hDiv.loading){var pvis=ts.p.scroll&&npage===false;var prm={},dt,dstr,pN=ts.p.prmNames;if(ts.p.page<=0){ts.p.page=1;}
if(pN.search!==null){prm[pN.search]=ts.p.search;}if(pN.nd!==null){prm[pN.nd]=new Date().getTime();}
if(pN.rows!==null){prm[pN.rows]=ts.p.rowNum;}if(pN.page!==null){prm[pN.page]=ts.p.page;}
if(pN.sort!==null){prm[pN.sort]=ts.p.sortname;}if(pN.order!==null){prm[pN.order]=ts.p.sortorder;}
var lc=ts.p.loadComplete;var lcf=$.isFunction(lc);if(!lcf){lc=null;}
var adjust=0;npage=npage||1;if(npage>1){if(pN.npage!==null){prm[pN.npage]=npage;adjust=npage-1;npage=1;}else{lc=function(req){if(lcf){ts.p.loadComplete.call(ts,req);}
ts.grid.hDiv.loading=false;ts.p.page++;populate(npage-1);};}}else if(pN.npage!==null){delete ts.p.postData[pN.npage];}
$.extend(ts.p.postData,prm);var rcnt=!ts.p.scroll?0:ts.rows.length-1;if($.isFunction(ts.p.datatype)){ts.p.datatype.call(ts,ts.p.postData,"load_"+ts.p.id);return;}
else if($.isFunction(ts.p.beforeRequest)){ts.p.beforeRequest.call(ts);}
dt=ts.p.datatype.toLowerCase();switch(dt)
{case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:ts.p.url,type:ts.p.mtype,dataType:dt,data:$.isFunction(ts.p.serializeGridData)?ts.p.serializeGridData.call(ts,ts.p.postData):ts.p.postData,success:function(req,st){if(dt==="xml"){addXmlData(req,ts.grid.bDiv,rcnt,npage>1,adjust);}
else{addJSONData(req,ts.grid.bDiv,rcnt,npage>1,adjust);}
if(lc){lc.call(ts,req);}
if(pvis){ts.grid.populateVisible();}
if(ts.p.loadonce||ts.p.treeGrid){ts.p.datatype="local";}
req=null;endReq();},error:function(xhr,st,err){if($.isFunction(ts.p.loadError)){ts.p.loadError.call(ts,xhr,st,err);}
endReq();xhr=null;},beforeSend:function(xhr){beginReq();if($.isFunction(ts.p.loadBeforeSend)){ts.p.loadBeforeSend.call(ts,xhr);}}},$.jgrid.ajaxOptions,ts.p.ajaxGridOptions));break;case"xmlstring":beginReq();dstr=$.jgrid.stringToDoc(ts.p.datastr);if(lcf){ts.p.loadComplete.call(ts,dstr);}
addXmlData(dstr,ts.grid.bDiv);ts.p.datatype="local";ts.p.datastr=null;endReq();break;case"jsonstring":beginReq();if(typeof ts.p.datastr=='string'){dstr=$.jgrid.parse(ts.p.datastr);}
else{dstr=ts.p.datastr;}
if(lcf){ts.p.loadComplete.call(ts,dstr);}
addJSONData(dstr,ts.grid.bDiv);ts.p.datatype="local";ts.p.datastr=null;endReq();break;case"local":case"clientside":beginReq();ts.p.datatype="local";if(lcf){ts.p.loadComplete.call(ts,"");}
sortArrayData();updatepager(true,true);endReq();break;}}},beginReq=function(){ts.grid.hDiv.loading=true;if(ts.p.hiddengrid){return;}
switch(ts.p.loadui){case"disable":break;case"enable":$("#load_"+ts.p.id).show();break;case"block":$("#lui_"+ts.p.id).show();$("#load_"+ts.p.id).show();break;}},endReq=function(){ts.grid.hDiv.loading=false;switch(ts.p.loadui){case"disable":break;case"enable":$("#load_"+ts.p.id).hide();break;case"block":$("#lui_"+ts.p.id).hide();$("#load_"+ts.p.id).hide();break;}},sortArrayData=function(){var stripNum=/[\$,%]/g;var rows=[],col=0,st,sv,findSortKey,newDir=(ts.p.sortorder=="asc")?1:-1,reverse=false,cm;$.each(ts.p.colModel,function(i,v){if(this.index==ts.p.sortname||this.name==ts.p.sortname){if(ts.p.lastsort==i){reverse=true;}
col=i;st=this.sorttype;return false;}});if(st=='float'||st=='number'||st=='currency'){findSortKey=function($cell){var key=parseFloat($cell.replace(stripNum,''));return isNaN(key)?0:key;};}else if(st=='int'||st=='integer'){findSortKey=function($cell){return intNum($cell.replace(stripNum,''),0);};}else if(st=='date'||st=='datetime'){findSortKey=function($cell){var fd=ts.p.colModel[col].datefmt||"Y-m-d";return parseDate(fd,$cell).getTime();};}else if($.isFunction(st)){findSortKey=st;}else{findSortKey=function($cell){return $.trim($cell.toUpperCase());};}
cm=ts.p.colModel[col];$.each(ts.rows,function(index,row){try{sv=$.unformat($(row).children('td').eq(col),{rowId:row.id,colModel:cm},col,true);}
catch(_){sv=$(row).children('td').eq(col).text();}
row.sortKey=findSortKey(sv);rows[index]=this;});if(ts.p.treeGrid){$(ts).jqGrid("SortTree",newDir);}else{if(reverse){rows.reverse();}else{rows.sort(function(a,b){if(a.sortKey<b.sortKey){return-newDir;}
if(a.sortKey>b.sortKey){return newDir;}
return 0;});}
if(rows[0]){$("td",rows[0]).each(function(k){$(this).css("width",grid.headers[k].width+"px");});ts.grid.cols=rows[0].cells;}
var cn="";if(ts.p.altRows){cn=ts.p.altclass;}
$.each(rows,function(i,row){if(cn){if(i%2==1){$(row).addClass(cn);}
else{$(row).removeClass(cn);}}
$('tbody',ts.grid.bDiv).append(row);row.sortKey=null;});}
ts.grid.bDiv.scrollTop=0;},parseDate=function(format,date){var tsp={m:1,d:1,y:1970,h:0,i:0,s:0},k,hl,dM;date=$.trim(date);if(date){date=date.split(/[\\\/:_;.\t\T\s-]/);format=format.split(/[\\\/:_;.\t\T\s-]/);var dfmt=$.jgrid.formatter.date.monthNames;var afmt=$.jgrid.formatter.date.AmPm;var h12to24=function(ampm,h){if(ampm===0){if(h==12){h=0;}}
else{if(h!=12){h+=12;}}
return h;};for(k=0,hl=format.length;k<hl;k++){if(format[k]=='M'){dM=$.inArray(date[k],dfmt);if(dM!==-1&&dM<12){date[k]=dM+1;}}
if(format[k]=='F'){dM=$.inArray(date[k],dfmt);if(dM!==-1&&dM>11){date[k]=dM+1-12;}}
if(format[k]=='a'){dM=$.inArray(date[k],afmt);if(dM!==-1&&dM<2&&date[k]==afmt[dM]){date[k]=dM;tsp.h=h12to24(date[k],tsp.h);}}
if(format[k]=='A'){dM=$.inArray(date[k],afmt);if(dM!==-1&&dM>1&&date[k]==afmt[dM]){date[k]=dM-2;tsp.h=h12to24(date[k],tsp.h);}}
tsp[format[k].toLowerCase()]=parseInt(date[k],10);}
tsp.m=parseInt(tsp.m,10)-1;var ty=tsp.y;if(ty>=70&&ty<=99){tsp.y=1900+tsp.y;}
else if(ty>=0&&ty<=69){tsp.y=2000+tsp.y;}}
return new Date(tsp.y,tsp.m,tsp.d,tsp.h,tsp.i,tsp.s,0);},setPager=function(pgid,tp){var sep="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",pginp="",pgl="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",str="",pgcnt,lft,cent,rgt,twd,tdw,i,clearVals=function(onpaging){var ret;if($.isFunction(ts.p.onPaging)){ret=ts.p.onPaging.call(ts,onpaging);}
ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];$('#cb_'+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false);}
ts.p.savedRow=[];if(ret=='stop'){return false;}
return true;};pgid=pgid.substr(1);pgcnt="pg_"+pgid;lft=pgid+"_left";cent=pgid+"_center";rgt=pgid+"_right";$("#"+pgid).append("<div id='"+pgcnt+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;' role='row'><tbody><tr><td id='"+lft+"' align='left'></td><td id='"+cent+"' align='center' style='white-space:pre;'></td><td id='"+rgt+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(ts.p.rowList.length>0){str="<td dir='"+dir+"'>";str+="<select class='ui-pg-selbox' role='listbox'>";for(i=0;i<ts.p.rowList.length;i++){str+="<option role='option' value='"+ts.p.rowList[i]+"'"+((ts.p.rowNum==ts.p.rowList[i])?' selected':'')+">"+ts.p.rowList[i]+"</option>";}
str+="</select></td>";}
if(dir=="rtl"){pgl+=str;}
if(ts.p.pginput===true){pginp="<td dir='"+dir+"'>"+$.jgrid.format(ts.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'></span>")+"</td>";}
if(ts.p.pgbuttons===true){var po=["first"+tp,"prev"+tp,"next"+tp,"last"+tp];if(dir=="rtl"){po.reverse();}
pgl+="<td id='"+po[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>";pgl+="<td id='"+po[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>";pgl+=pginp!=""?sep+pginp+sep:"";pgl+="<td id='"+po[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>";pgl+="<td id='"+po[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>";}else if(pginp!=""){pgl+=pginp;}
if(dir=="ltr"){pgl+=str;}
pgl+="</tr></tbody></table>";if(ts.p.viewrecords===true){$("td#"+pgid+"_"+ts.p.recordpos,"#"+pgcnt).append("<div dir='"+dir+"' style='text-align:"+ts.p.recordpos+"' class='ui-paging-info'></div>");}
$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).append(pgl);tdw=$(".ui-jqgrid").css("font-size")||"11px";$('body').append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+tdw+";visibility:hidden;' ></div>");twd=$(pgl).clone().appendTo("#testpg").width();$("#testpg").remove();if(twd>0){if(pginp!=""){twd+=50;}
$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).width(twd);}
ts.p._nvtd=[];ts.p._nvtd[0]=twd?Math.floor((ts.p.width-twd)/2):Math.floor(ts.p.width/3);ts.p._nvtd[1]=0;pgl=null;$('.ui-pg-selbox',"#"+pgcnt).bind('change',function(){ts.p.page=Math.round(ts.p.rowNum*(ts.p.page-1)/this.value-0.5)+1;ts.p.rowNum=this.value;if(tp){$('.ui-pg-selbox',ts.p.pager).val(this.value);}
else if(ts.p.toppager){$('.ui-pg-selbox',ts.p.toppager).val(this.value);}
if(!clearVals('records')){return false;}
populate();return false;});if(ts.p.pgbuttons===true){$(".ui-pg-button","#"+pgcnt).hover(function(e){if($(this).hasClass('ui-state-disabled')){this.style.cursor='default';}else{$(this).addClass('ui-state-hover');this.style.cursor='pointer';}},function(e){if($(this).hasClass('ui-state-disabled')){}else{$(this).removeClass('ui-state-hover');this.style.cursor="default";}});$("#first"+tp+", #prev"+tp+", #next"+tp+", #last"+tp,"#"+pgid).click(function(e){var cp=intNum(ts.p.page,1),last=intNum(ts.p.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false;}
else if(last>1&&cp>=1){if(cp===1){fp=false;pp=false;}
else if(cp>1&&cp<last){}
else if(cp===last){np=false;lp=false;}}else if(last>1&&cp===0){np=false;lp=false;cp=last-1;}
if(this.id==='first'+tp&&fp){ts.p.page=1;selclick=true;}
if(this.id==='prev'+tp&&pp){ts.p.page=(cp-1);selclick=true;}
if(this.id==='next'+tp&&np){ts.p.page=(cp+1);selclick=true;}
if(this.id==='last'+tp&&lp){ts.p.page=last;selclick=true;}
if(selclick){if(!clearVals(this.id)){return false;}
populate();}
return false;});}
if(ts.p.pginput===true){$('input.ui-pg-input',"#"+pgcnt).keypress(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){ts.p.page=($(this).val()>0)?$(this).val():ts.p.page;if(!clearVals('user')){return false;}
populate();return false;}
return this;});}},sortData=function(index,idxcol,reload,sor){if(!ts.p.colModel[idxcol].sortable){return;}
var so;if(ts.p.savedRow.length>0){return;}
if(!reload){if(ts.p.lastsort==idxcol){if(ts.p.sortorder=='asc'){ts.p.sortorder='desc';}else if(ts.p.sortorder=='desc'){ts.p.sortorder='asc';}}else{ts.p.sortorder=ts.p.colModel[idxcol].firstsortorder||'asc';}
ts.p.page=1;}
if(sor){if(ts.p.lastsort==idxcol&&ts.p.sortorder==sor&&!reload){return;}
else{ts.p.sortorder=sor;}}
var thd=$("thead:first",ts.grid.hDiv).get(0);$("tr th:eq("+ts.p.lastsort+") span.ui-grid-ico-sort",thd).addClass('ui-state-disabled');$("tr th:eq("+ts.p.lastsort+")",thd).attr("aria-selected","false");$("tr th:eq("+idxcol+") span.ui-icon-"+ts.p.sortorder,thd).removeClass('ui-state-disabled');$("tr th:eq("+idxcol+")",thd).attr("aria-selected","true");if(!ts.p.viewsortcols[0]){if(ts.p.lastsort!=idxcol){$("tr th:eq("+ts.p.lastsort+") span.s-ico",thd).hide();$("tr th:eq("+idxcol+") span.s-ico",thd).show();}}
index=index.substring(5);ts.p.sortname=ts.p.colModel[idxcol].index||index;so=ts.p.sortorder;if($.isFunction(ts.p.onSortCol)){if(ts.p.onSortCol.call(ts,index,idxcol,so)=='stop'){ts.p.lastsort=idxcol;return;}}
if(ts.p.datatype=="local"){if(ts.p.deselectAfterSort){$(ts).jqGrid("resetSelection");}}else{ts.p.selrow=null;if(ts.p.multiselect){$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false);}
ts.p.selarrrow=[];ts.p.savedRow=[];if(ts.p.scroll){emptyRows(ts.grid.bDiv,true);}}
if(ts.p.subGrid&&ts.p.datatype=='local'){$("td.sgexpanded","#"+ts.p.id).each(function(){$(this).trigger("click");});}
populate();ts.p.lastsort=idxcol;if(ts.p.sortname!=index&&idxcol){ts.p.lastsort=idxcol;}},setColWidth=function(){var initwidth=0,brd=ts.p.cellLayout,vc=0,lvc,scw=ts.p.scrollOffset,cw,hs=false,aw,tw=0,gw=0,cl=0,cr;if(isSafari){brd=0;}
$.each(ts.p.colModel,function(i){if(typeof this.hidden==='undefined'){this.hidden=false;}
if(this.hidden===false){initwidth+=intNum(this.width,0);if(this.fixed){tw+=this.width;gw+=this.width+brd;}else{vc++;}
cl++;}});if(isNaN(ts.p.width)){ts.p.width=grid.width=initwidth;}
else{grid.width=ts.p.width;}
ts.p.tblwidth=initwidth;if(ts.p.shrinkToFit===false&&ts.p.forceFit===true){ts.p.forceFit=false;}
if(ts.p.shrinkToFit===true&&vc>0){aw=grid.width-brd*vc-gw;if(isNaN(ts.p.height)){}else{aw-=scw;hs=true;}
initwidth=0;$.each(ts.p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=Math.round(aw*this.width/(ts.p.tblwidth-tw));this.width=cw;initwidth+=cw;lvc=i;}});cr=0;if(hs){if(grid.width-gw-(initwidth+brd*vc)!==scw){cr=grid.width-gw-(initwidth+brd*vc)-scw;}}else if(!hs&&Math.abs(grid.width-gw-(initwidth+brd*vc))!==1){cr=grid.width-gw-(initwidth+brd*vc);}
ts.p.colModel[lvc].width+=cr;ts.p.tblwidth=initwidth+cr+tw+cl*brd;if(ts.p.tblwidth>ts.p.width){ts.p.colModel[lvc].width-=(ts.p.tblwidth-parseInt(ts.p.width,10));ts.p.tblwidth=ts.p.width;}}},nextVisible=function(iCol){var ret=iCol,j=iCol,i;for(i=iCol+1;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].hidden!==true){j=i;break;}}
return j-ret;},getOffset=function(iCol){var i,ret={},brd1=isSafari?0:ts.p.cellLayout;ret[0]=ret[1]=ret[2]=0;for(i=0;i<=iCol;i++){if(ts.p.colModel[i].hidden===false){ret[0]+=ts.p.colModel[i].width+brd1;}}
if(ts.p.direction=="rtl"){ret[0]=ts.p.width-ret[0];}
ret[0]=ret[0]-ts.grid.bDiv.scrollLeft;if($(ts.grid.cDiv).is(":visible")){ret[1]+=$(ts.grid.cDiv).height()+parseInt($(ts.grid.cDiv).css("padding-top"),10)+parseInt($(ts.grid.cDiv).css("padding-bottom"),10);}
if(ts.p.toolbar[0]===true&&(ts.p.toolbar[1]=='top'||ts.p.toolbar[1]=='both')){ret[1]+=$(ts.grid.uDiv).height()+parseInt($(ts.grid.uDiv).css("border-top-width"),10)+parseInt($(ts.grid.uDiv).css("border-bottom-width"),10);}
if(ts.p.toppager){ret[1]+=$(ts.grid.topDiv).height()+parseInt($(ts.grid.topDiv).css("border-bottom-width"),10);}
ret[2]+=$(ts.grid.bDiv).height()+$(ts.grid.hDiv).height();return ret;};this.p.id=this.id;if($.inArray(ts.p.multikey,sortkeys)==-1){ts.p.multikey=false;}
ts.p.keyIndex=false;for(i=0;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].key===true){ts.p.keyIndex=i;break;}}
ts.p.sortorder=ts.p.sortorder.toLowerCase();if(this.p.treeGrid===true){try{$(this).jqGrid("setTreeGrid");}catch(_){}}
if(this.p.subGrid){try{$(ts).jqGrid("setSubGrid");}catch(_){}}
if(this.p.multiselect){this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:'cb',width:isSafari?ts.p.multiselectWidth+ts.p.cellLayout:ts.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:'center',fixed:true});}
if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:'rn',width:ts.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:'center',fixed:true});}
ts.p.xmlReader=$.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},ts.p.xmlReader);ts.p.jsonReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ts.p.jsonReader);if(ts.p.scroll){ts.p.pgbuttons=false;ts.p.pginput=false;ts.p.rowList=[];}
var thead="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",tdc,idn,w,res,sort,td,ptr,tbody,imgs,iac="",idc="";if(ts.p.shrinkToFit===true&&ts.p.forceFit===true){for(i=ts.p.colModel.length-1;i>=0;i--){if(!ts.p.colModel[i].hidden){ts.p.colModel[i].resizable=false;break;}}}
if(ts.p.viewsortcols[1]=='horizontal'){iac=" ui-i-asc";idc=" ui-i-desc";}
tdc=isMSIE?"class='ui-th-div-ie'":"";imgs="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+iac+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+dir+"'></span>";imgs+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+idc+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+dir+"'></span></span>";for(i=0;i<this.p.colNames.length;i++){var tooltip=ts.p.headertitles?(" title=\""+$.jgrid.stripHtml(ts.p.colNames[i])+"\""):"";thead+="<th id='"+ts.p.id+"_"+ts.p.colModel[i].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+dir+"'"+tooltip+">";idn=ts.p.colModel[i].index||ts.p.colModel[i].name;thead+="<div id='jqgh_"+ts.p.colModel[i].name+"' "+tdc+">"+ts.p.colNames[i];if(!ts.p.colModel[i].width){ts.p.colModel[i].width=150;}
else{ts.p.colModel[i].width=parseInt(ts.p.colModel[i].width,10);}
if(typeof(ts.p.colModel[i].title)!=="boolean"){ts.p.colModel[i].title=true;}
if(idn==ts.p.sortname){ts.p.lastsort=i;}
thead+=imgs+"</div></th>";}
thead+="</tr></thead>";$(this).append(thead);$("thead tr:first th",this).hover(function(){$(this).addClass('ui-state-hover');},function(){$(this).removeClass('ui-state-hover');});if(this.p.multiselect){var emp=[],chk;$('#cb_'+$.jgrid.jqID(ts.p.id),this).bind('click',function(){if(this.checked){$("[id^=jqg_]",ts.rows).attr("checked",true);$(ts.rows).each(function(i){if(!$(this).hasClass("subgrid")){$(this).addClass("ui-state-highlight").attr("aria-selected","true");ts.p.selarrrow[i]=ts.p.selrow=this.id;}});chk=true;emp=[];}
else{$("[id^=jqg_]",ts.rows).attr("checked",false);$(ts.rows).each(function(i){if(!$(this).hasClass("subgrid")){$(this).removeClass("ui-state-highlight").attr("aria-selected","false");emp[i]=this.id;}});ts.p.selarrrow=[];ts.p.selrow=null;chk=false;}
if($.isFunction(ts.p.onSelectAll)){ts.p.onSelectAll.call(ts,chk?ts.p.selarrrow:emp,chk);}});}
if(ts.p.autowidth===true){var pw=$(eg).innerWidth();ts.p.width=pw>0?pw:'nw';}
setColWidth();$(eg).css("width",grid.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+ts.p.id+"'>&#160;</div>");$(gv).css("width",grid.width+"px");thead=$("thead:first",ts).get(0);var tfoot="<table role='grid' style='width:"+ts.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+dir+"'>";var thr=$("tr:first",thead);ts.p.disableClick=false;$("th",thr).each(function(j){w=ts.p.colModel[j].width;if(typeof ts.p.colModel[j].resizable==='undefined'){ts.p.colModel[j].resizable=true;}
if(ts.p.colModel[j].resizable){res=document.createElement("span");$(res).html("&#160;").addClass('ui-jqgrid-resize ui-jqgrid-resize-'+dir);if(!$.browser.opera){$(res).css("cursor","col-resize");}
$(this).addClass(ts.p.resizeclass);}else{res="";}
$(this).css("width",w+"px").prepend(res);if(ts.p.colModel[j].hidden){$(this).css("display","none");}
grid.headers[j]={width:w,el:this};sort=ts.p.colModel[j].sortable;if(typeof sort!=='boolean'){ts.p.colModel[j].sortable=true;sort=true;}
var nm=ts.p.colModel[j].name;if(!(nm=='cb'||nm=='subgrid'||nm=='rn')){if(ts.p.viewsortcols[2]){$("div",this).addClass('ui-jqgrid-sortable');}}
if(sort){if(ts.p.viewsortcols[0]){$("div span.s-ico",this).show();if(j==ts.p.lastsort){$("div span.ui-icon-"+ts.p.sortorder,this).removeClass("ui-state-disabled");}}
else if(j==ts.p.lastsort){$("div span.s-ico",this).show();$("div span.ui-icon-"+ts.p.sortorder,this).removeClass("ui-state-disabled");}}
tfoot+="<td role='gridcell' "+formatCol(j,0,'')+">&#160;</td>";}).mousedown(function(e){if($(e.target).closest("th>span.ui-jqgrid-resize").length!=1){return;}
var ci=$.jgrid.getCellIndex(this);if(ts.p.forceFit===true){ts.p.nv=nextVisible(ci);}
grid.dragStart(ci,e,getOffset(ci));return false;}).click(function(e){if(ts.p.disableClick){ts.p.disableClick=false;return false;}
var s="th>div.ui-jqgrid-sortable",r,d;if(!ts.p.viewsortcols[2]){s="th>div>span>span.ui-grid-ico-sort";}
var t=$(e.target).closest(s);if(t.length!=1){return;}
var ci=$.jgrid.getCellIndex(this);if(!ts.p.viewsortcols[2]){r=true;d=t.attr("sort");}
sortData($('div',this)[0].id,ci,r,d);return false;});if(ts.p.sortable&&$.fn.sortable){try{$(ts).jqGrid("sortableColumns",thr);}catch(e){}}
tfoot+="</tr></tbody></table>";tbody=document.createElement("tbody");this.appendChild(tbody);$(this).addClass('ui-jqgrid-btable');var hTable=$("<table class='ui-jqgrid-htable' style='width:"+ts.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(thead),hg=(ts.p.caption&&ts.p.hiddengrid===true)?true:false,hb=$("<div class='ui-jqgrid-hbox"+(dir=="rtl"?"-rtl":"")+"'></div>");grid.hDiv=document.createElement("div");$(grid.hDiv).css({width:grid.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(hb);$(hb).append(hTable);if(hg){$(grid.hDiv).hide();}
if(ts.p.pager){if(typeof ts.p.pager=="string"){if(ts.p.pager.substr(0,1)!="#"){ts.p.pager="#"+ts.p.pager;}}
else{ts.p.pager="#"+$(ts.p.pager).attr("id");}
$(ts.p.pager).css({width:grid.width+"px"}).appendTo(eg).addClass('ui-state-default ui-jqgrid-pager ui-corner-bottom');if(hg){$(ts.p.pager).hide();}
setPager(ts.p.pager,'');}
if(ts.p.cellEdit===false&&ts.p.hoverrows===true){$(ts).bind('mouseover',function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="subgrid"){$(ptr).addClass("ui-state-hover");}
return false;}).bind('mouseout',function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass("ui-state-hover");return false;});}
var ri,ci;$(ts).before(grid.hDiv).click(function(e){td=e.target;var scb=$(td).hasClass("cbox");ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return this;}
var cSel=true;if($.isFunction(ts.p.beforeSelectRow)){cSel=ts.p.beforeSelectRow.call(ts,ptr[0].id,e);}
if(td.tagName=='A'||((td.tagName=='INPUT'||td.tagName=='TEXTAREA'||td.tagName=='OPTION'||td.tagName=='SELECT')&&!scb)){return this;}
if(cSel===true){if(ts.p.cellEdit===true){if(ts.p.multiselect&&scb){$(ts).jqGrid("setSelection",ptr[0].id,true);}else{ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);try{$(ts).jqGrid("editCell",ri,ci,true);}catch(_){}}}else if(!ts.p.multikey){if(ts.p.multiselect&&ts.p.multiboxonly){if(scb){$(ts).jqGrid("setSelection",ptr[0].id,true);}
else{$(ts.p.selarrrow).each(function(i,n){var ind=ts.rows.namedItem(n);$(ind).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(n),ind).attr("checked",false);});ts.p.selarrrow=[];$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false);$(ts).jqGrid("setSelection",ptr[0].id,true);}}else{$(ts).jqGrid("setSelection",ptr[0].id,true);}}else{if(e[ts.p.multikey]){$(ts).jqGrid("setSelection",ptr[0].id,true);}else if(ts.p.multiselect&&scb){scb=$("[id^=jqg_]",ptr).attr("checked");$("[id^=jqg_]",ptr).attr("checked",!scb);}}
if($.isFunction(ts.p.onCellSelect)){ri=ptr[0].id;ci=$.jgrid.getCellIndex(td);ts.p.onCellSelect.call(ts,ri,ci,$(td).html(),e);}
e.stopPropagation();}else{return this;}}).bind('reloadGrid',function(e,opts){if(ts.p.treeGrid===true){ts.p.datatype=ts.p.treedatatype;}
if(opts&&opts.current){ts.grid.selectionPreserver(ts);}
if(ts.p.datatype=="local"){$(ts).jqGrid("resetSelection");}
else if(!ts.p.treeGrid){ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];$('#cb_'+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false);}
ts.p.savedRow=[];if(ts.p.scroll){emptyRows(ts.grid.bDiv,true);}}
if(opts&&opts.page){var page=opts.page;if(page>ts.p.lastpage){page=ts.p.lastpage;}
if(page<1){page=1;}
ts.p.page=page;if(ts.grid.prevRowHeight){ts.grid.bDiv.scrollTop=(page-1)*ts.grid.prevRowHeight*ts.p.rowNum;}else{ts.grid.bDiv.scrollTop=0;}}
if(ts.grid.prevRowHeight&&ts.p.scroll){delete ts.p.lastpage;ts.grid.populateVisible();}else{ts.grid.populate();}
return false;});if($.isFunction(this.p.ondblClickRow)){$(this).dblclick(function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return false;}
ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);ts.p.ondblClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);return false;});}
if($.isFunction(this.p.onRightClickRow)){$(this).bind('contextmenu',function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return false;}
if(!ts.p.multiselect){$(ts).jqGrid("setSelection",ptr[0].id,true);}
ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);ts.p.onRightClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);return false;});}
grid.bDiv=document.createElement("div");$(grid.bDiv).append($('<div style="position:relative;'+(isMSIE&&$.browser.version<8?"height:0.01%;":"")+'"></div>').append('<div></div>').append(this)).addClass("ui-jqgrid-bdiv").css({height:ts.p.height+(isNaN(ts.p.height)?"":"px"),width:(grid.width)+"px"}).scroll(grid.scrollGrid);$("table:first",grid.bDiv).css({width:ts.p.tblwidth+"px"});if(isMSIE){if($("tbody",this).size()==2){$("tbody:first",this).remove();}
if(ts.p.multikey){$(grid.bDiv).bind("selectstart",function(){return false;});}}else{if(ts.p.multikey){$(grid.bDiv).bind("mousedown",function(){return false;});}}
if(hg){$(grid.bDiv).hide();}
grid.cDiv=document.createElement("div");var arf=ts.p.hidegrid===true?$("<a role='link' href='javascript:void(0)'/>").addClass('ui-jqgrid-titlebar-close HeaderButton').hover(function(){arf.addClass('ui-state-hover');},function(){arf.removeClass('ui-state-hover');}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css((dir=="rtl"?"left":"right"),"0px"):"";$(grid.cDiv).append(arf).append("<span class='ui-jqgrid-title"+(dir=="rtl"?"-rtl":"")+"'>"+ts.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");$(grid.cDiv).insertBefore(grid.hDiv);if(ts.p.toolbar[0]){grid.uDiv=document.createElement("div");if(ts.p.toolbar[1]=="top"){$(grid.uDiv).insertBefore(grid.hDiv);}
else if(ts.p.toolbar[1]=="bottom"){$(grid.uDiv).insertAfter(grid.hDiv);}
if(ts.p.toolbar[1]=="both"){grid.ubDiv=document.createElement("div");$(grid.uDiv).insertBefore(grid.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);$(grid.ubDiv).insertAfter(grid.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id);if(hg){$(grid.ubDiv).hide();}}else{$(grid.uDiv).width(grid.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);}
if(hg){$(grid.uDiv).hide();}}
if(ts.p.toppager){ts.p.toppager=ts.p.id+"_toppager";grid.topDiv=$("<div id='"+ts.p.toppager+"'></div>")[0];ts.p.toppager="#"+ts.p.toppager;$(grid.topDiv).insertBefore(grid.hDiv).addClass('ui-state-default ui-jqgrid-toppager').width(grid.width);setPager(ts.p.toppager,'_t');}
if(ts.p.footerrow){grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];hb=$("<div class='ui-jqgrid-hbox"+(dir=="rtl"?"-rtl":"")+"'></div>");$(grid.sDiv).append(hb).insertAfter(grid.hDiv).width(grid.width);$(hb).append(tfoot);grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells;if(ts.p.rownumbers){grid.footers[0].className='ui-state-default jqgrid-rownum';}
if(hg){$(grid.sDiv).hide();}}
if(ts.p.caption){var tdt=ts.p.datatype;if(ts.p.hidegrid===true){$(".ui-jqgrid-titlebar-close",grid.cDiv).click(function(e){var onHdCl=$.isFunction(ts.p.onHeaderClick);if(ts.p.gridstate=='visible'){$(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+ts.p.id).slideUp("fast");if(ts.p.pager){$(ts.p.pager).slideUp("fast");}
if(ts.p.toppager){$(ts.p.toppager).slideUp("fast");}
if(ts.p.toolbar[0]===true){if(ts.p.toolbar[1]=='both'){$(grid.ubDiv).slideUp("fast");}
$(grid.uDiv).slideUp("fast");}
if(ts.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+ts.p.id).slideUp("fast");}
$("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");ts.p.gridstate='hidden';if($("#gbox_"+ts.p.id).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+ts.p.id).hide();}
if(onHdCl){if(!hg){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e);}}}else if(ts.p.gridstate=='hidden'){$(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+ts.p.id).slideDown("fast");if(ts.p.pager){$(ts.p.pager).slideDown("fast");}
if(ts.p.toppager){$(ts.p.toppager).slideDown("fast");}
if(ts.p.toolbar[0]===true){if(ts.p.toolbar[1]=='both'){$(grid.ubDiv).slideDown("fast");}
$(grid.uDiv).slideDown("fast");}
if(ts.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+ts.p.id).slideDown("fast");}
$("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(hg){ts.p.datatype=tdt;populate();hg=false;}
ts.p.gridstate='visible';if($("#gbox_"+ts.p.id).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+ts.p.id).show();}
if(onHdCl){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e);}}
return false;});if(hg){ts.p.datatype="local";$(".ui-jqgrid-titlebar-close",grid.cDiv).trigger("click");}}}else{$(grid.cDiv).hide();}
$(grid.hDiv).after(grid.bDiv).mousemove(function(e){if(grid.resizing){grid.dragMove(e);return false;}});$(".ui-jqgrid-labels",grid.hDiv).bind("selectstart",function(){return false;});$(document).mouseup(function(e){if(grid.resizing){grid.dragEnd();return false;}
return true;});this.updateColumns=function(){var r=this.rows[0],self=this;if(r){$("td",r).each(function(k){$(this).css("width",self.grid.headers[k].width+"px");});this.grid.cols=r.cells;}
return this;};ts.formatCol=formatCol;ts.sortData=sortData;ts.updatepager=updatepager;ts.formatter=function(rowId,cellval,colpos,rwdat,act){return formatter(rowId,cellval,colpos,rwdat,act);};$.extend(grid,{populate:populate,emptyRows:emptyRows});this.grid=grid;ts.addXmlData=function(d){addXmlData(d,ts.grid.bDiv);};ts.addJSONData=function(d){addJSONData(d,ts.grid.bDiv);};populate();ts.p.hiddengrid=false;$(window).unload(function(){ts=null;});});};$.jgrid.extend({getGridParam:function(pName){var $t=this[0];if(!$t.grid){return;}
if(!pName){return $t.p;}
else{return typeof($t.p[pName])!="undefined"?$t.p[pName]:null;}},setGridParam:function(newParams){return this.each(function(){if(this.grid&&typeof(newParams)==='object'){$.extend(true,this.p,newParams);}});},getDataIDs:function(){var ids=[],i=0,len;this.each(function(){len=this.rows.length;if(len&&len>0){while(i<len){ids[i]=this.rows[i].id;i++;}}});return ids;},setSelection:function(selection,onsr){return this.each(function(){var $t=this,stat,pt,ner,ia,tpsr;if(selection===undefined){return;}
onsr=onsr===false?false:true;pt=$t.rows.namedItem(selection+"");if(!pt){return;}
function scrGrid(iR){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,rpos=$t.rows[iR].offsetTop,rh=$t.rows[iR].clientHeight;if(rpos+rh>=ch+st){$($t.grid.bDiv)[0].scrollTop=rpos-(ch+st)+rh+st;}
else if(rpos<ch+st){if(rpos<st){$($t.grid.bDiv)[0].scrollTop=rpos;}}}
if($t.p.scrollrows===true){ner=$t.rows.namedItem(selection).rowIndex;if(ner>=0){scrGrid(ner);}}
if(!$t.p.multiselect){if(pt.className!=="ui-subgrid"){if($t.p.selrow){$($t.rows.namedItem($t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");}
$t.p.selrow=pt.id;$(pt).addClass("ui-state-highlight").attr("aria-selected","true");if($t.p.onSelectRow&&onsr){$t.p.onSelectRow.call($t,$t.p.selrow,true);}}}else{$t.p.selrow=pt.id;ia=$.inArray($t.p.selrow,$t.p.selarrrow);if(ia===-1){if(pt.className!=="ui-subgrid"){$(pt).addClass("ui-state-highlight").attr("aria-selected","true");}
stat=true;$("#jqg_"+$.jgrid.jqID($t.p.selrow),$t.rows[pt.rowIndex]).attr("checked",stat);$t.p.selarrrow.push($t.p.selrow);if($t.p.onSelectRow&&onsr){$t.p.onSelectRow.call($t,$t.p.selrow,stat);}}else{if(pt.className!=="ui-subgrid"){$(pt).removeClass("ui-state-highlight").attr("aria-selected","false");}
stat=false;$("#jqg_"+$.jgrid.jqID($t.p.selrow),$t.rows[pt.rowIndex]).attr("checked",stat);$t.p.selarrrow.splice(ia,1);if($t.p.onSelectRow&&onsr){$t.p.onSelectRow.call($t,$t.p.selrow,stat);}
tpsr=$t.p.selarrrow[0];$t.p.selrow=(tpsr===undefined)?null:tpsr;}}});},resetSelection:function(){return this.each(function(){var t=this,ind;if(!t.p.multiselect){if(t.p.selrow){$("tr#"+$.jgrid.jqID(t.p.selrow),t.grid.bDiv).removeClass("ui-state-highlight").attr("aria-selected","false");t.p.selrow=null;}}else{$(t.p.selarrrow).each(function(i,n){ind=t.rows.namedItem(n);$(ind).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(n),ind).attr("checked",false);});$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",false);t.p.selarrrow=[];}
t.p.savedRow=[];});},getRowData:function(rowid){var res={},resall,getall=false,len,j=0;this.each(function(){var $t=this,nm,ind;if(typeof(rowid)=='undefined'){getall=true;resall=[];len=$t.rows.length;}else{ind=$t.rows.namedItem(rowid);if(!ind){return res;}
len=1;}
while(j<len){if(getall){ind=$t.rows[j];}
$('td',ind).each(function(i){nm=$t.p.colModel[i].name;if(nm!=='cb'&&nm!=='subgrid'){if($t.p.treeGrid===true&&nm==$t.p.ExpandColumn){res[nm]=$.jgrid.htmlDecode($("span:first",this).html());}else{try{res[nm]=$.unformat(this,{rowId:ind.id,colModel:$t.p.colModel[i]},i);}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html());}}}});j++;if(getall){resall.push(res);res={};}}});return resall?resall:res;},delRowData:function(rowid){var success=false,rowInd,ia,ri;this.each(function(){var $t=this;rowInd=$t.rows.namedItem(rowid);if(!rowInd){return false;}
else{ri=rowInd.rowIndex;$(rowInd).remove();$t.p.records--;$t.p.reccount--;$t.updatepager(true,false);success=true;if($t.p.multiselect){ia=$.inArray(rowid,$t.p.selarrrow);if(ia!=-1){$t.p.selarrrow.splice(ia,1);}}
if(rowid==$t.p.selrow){$t.p.selrow=null;}}
if(ri===0&&success){$t.updateColumns();}
if($t.p.altRows===true&&success){var cn=$t.p.altclass;$($t.rows).each(function(i){if(i%2==1){$(this).addClass(cn);}
else{$(this).removeClass(cn);}});}});return success;},setRowData:function(rowid,data,cssp){var nm,success=false,title;this.each(function(){var t=this,vl,ind,cp=typeof cssp;if(!t.grid){return false;}
ind=t.rows.namedItem(rowid);if(!ind){return false;}
if(data){$(this.p.colModel).each(function(i){nm=this.name;if(data[nm]!==undefined){vl=t.formatter(rowid,data[nm],i,data,'edit');title=this.title?{"title":$.jgrid.stripHtml(vl)}:{};if(t.p.treeGrid===true&&nm==t.p.ExpandColumn){$("td:eq("+i+") > span:first",ind).html(vl).attr(title);}else{$("td:eq("+i+")",ind).html(vl).attr(title);}
success=true;}});}
if(cp==='string'){$(ind).addClass(cssp);}else if(cp==='object'){$(ind).css(cssp);}});return success;},addRowData:function(rowid,rdata,pos,src){if(!pos){pos="last";}
var success=false,nm,row,gi,si,ni,sind,i,v,prp="",aradd,cnm,cn,data;if(rdata){if($.isArray(rdata)){aradd=true;pos="last";cnm=rowid;}else{rdata=[rdata];aradd=false;}
this.each(function(){var t=this,datalen=rdata.length;ni=t.p.rownumbers===true?1:0;gi=t.p.multiselect===true?1:0;si=t.p.subGrid===true?1:0;if(!aradd){if(typeof(rowid)!='undefined'){rowid=rowid+"";}
else{rowid=(t.p.records+1)+"";if(t.p.keyIndex!==false){cnm=t.p.colModel[t.p.keyIndex+gi+si+ni].name;if(typeof rdata[0][cnm]!="undefined"){rowid=rdata[0][cnm];}}}}
cn=t.p.altclass;var k=0,cna="",air=$.isFunction(t.p.afterInsertRow)?true:false;while(k<datalen){data=rdata[k];row="";if(aradd){try{rowid=data[cnm];}
catch(e){rowid=t.p.records+1;}
cna=t.p.altRows===true?(t.rows.length-1)%2===0?cn:"":"";}
if(ni){prp=t.formatCol(ni,1,'');row+="<td role=\"gridcell\" aria-describedby=\""+t.p.id+"_rn\" class=\"ui-state-default jqgrid-rownum\" "+prp+">0</td>";}
if(gi){v="<input role=\"checkbox\" type=\"checkbox\""+" id=\"jqg_"+rowid+"\" class=\"cbox\"/>";prp=t.formatCol(ni,1,'');row+="<td role=\"gridcell\" aria-describedby=\""+t.p.id+"_cb\" "+prp+">"+v+"</td>";}
if(si){row+=$(t).jqGrid("addSubGridCell",gi+ni,1);}
for(i=gi+si+ni;i<this.p.colModel.length;i++){nm=this.p.colModel[i].name;v=t.formatter(rowid,data[nm],i,data,'add');prp=t.formatCol(i,1,v);row+="<td role=\"gridcell\" aria-describedby=\""+t.p.id+"_"+nm+"\" "+prp+">"+v+"</td>";}
row="<tr id=\""+rowid+"\" role=\"row\" class=\"ui-widget-content jqgrow ui-row-"+t.p.direction+" "+cna+"\">"+row+"</tr>";if(t.p.subGrid===true){row=$(row)[0];$(t).jqGrid("addSubGrid",row,gi+ni);}
if(t.rows.length===0){$("table:first",t.grid.bDiv).append(row);}else{switch(pos){case'last':$(t.rows[t.rows.length-1]).after(row);break;case'first':$(t.rows[0]).before(row);break;case'after':sind=t.rows.namedItem(src);if(sind){if($(t.rows[sind.rowIndex+1]).hasClass("ui-subgrid")){$(t.rows[sind.rowIndex+1]).after(row);}
else{$(sind).after(row);}}
break;case'before':sind=t.rows.namedItem(src);if(sind){$(sind).before(row);sind=sind.rowIndex;}
break;}}
t.p.records++;t.p.reccount++;if(!t.grid.cols||!t.grid.cols.length){t.grid.cols=t.rows[0].cells;}
if(pos==='first'||(pos==='before'&&sind<=1)||t.rows.length===1){t.updateColumns();}
if(air){t.p.afterInsertRow.call(t,rowid,data,data);}
k++;}
if(t.p.altRows===true&&!aradd){if(pos=="last"){if((t.rows.length-1)%2==1){$(t.rows[t.rows.length-1]).addClass(cn);}}else{$(t.rows).each(function(i){if(i%2==1){$(this).addClass(cn);}
else{$(this).removeClass(cn);}});}}
t.updatepager(true,true);success=true;});}
return success;},footerData:function(action,data,format){var nm,success=false,res={},title;function isEmpty(obj){for(var i in obj){if(obj.hasOwnProperty(i)){return false;}}
return true;}
if(typeof(action)=="undefined"){action="get";}
if(typeof(format)!="boolean"){format=true;}
action=action.toLowerCase();this.each(function(){var t=this,vl;if(!t.grid||!t.p.footerrow){return false;}
if(action=="set"){if(isEmpty(data)){return false;}}
success=true;$(this.p.colModel).each(function(i){nm=this.name;if(action=="set"){if(data[nm]!==undefined){vl=format?t.formatter("",data[nm],i,data,'edit'):data[nm];title=this.title?{"title":$.jgrid.stripHtml(vl)}:{};$("tr.footrow td:eq("+i+")",t.grid.sDiv).html(vl).attr(title);success=true;}}else if(action=="get"){res[nm]=$("tr.footrow td:eq("+i+")",t.grid.sDiv).html();}});});return action=="get"?res:success;},ShowHideCol:function(colname,show){return this.each(function(){var $t=this,fndh=false;if(!$t.grid){return;}
if(typeof colname==='string'){colname=[colname];}
show=show!="none"?"":"none";var sw=show==""?true:false;$(this.p.colModel).each(function(i){if($.inArray(this.name,colname)!==-1&&this.hidden===sw){$("tr",$t.grid.hDiv).each(function(){$("th:eq("+i+")",this).css("display",show);});$($t.rows).each(function(j){$("td:eq("+i+")",$t.rows[j]).css("display",show);});if($t.p.footerrow){$("td:eq("+i+")",$t.grid.sDiv).css("display",show);}
if(show=="none"){$t.p.tblwidth-=this.width;}else{$t.p.tblwidth+=this.width;}
this.hidden=!sw;fndh=true;}});if(fndh===true){$("table:first",$t.grid.hDiv).width($t.p.tblwidth);$("table:first",$t.grid.bDiv).width($t.p.tblwidth);$t.grid.hDiv.scrollLeft=$t.grid.bDiv.scrollLeft;if($t.p.footerrow){$("table:first",$t.grid.sDiv).width($t.p.tblwidth);$t.grid.sDiv.scrollLeft=$t.grid.bDiv.scrollLeft;}}});},hideCol:function(colname){return this.each(function(){$(this).jqGrid("ShowHideCol",colname,"none");});},showCol:function(colname){return this.each(function(){$(this).jqGrid("ShowHideCol",colname,"");});},remapColumns:function(permutation,updateCells,keepHeader)
{function resortArray(a){var ac;if(a.length){ac=$.makeArray(a);}else{ac=$.extend({},a);}
$.each(permutation,function(i){a[i]=ac[this];});}
var ts=this.get(0);function resortRows(parent,clobj){$(">tr"+(clobj||""),parent).each(function(){var row=this;var elems=$.makeArray(row.cells);$.each(permutation,function(){var e=elems[this];if(e){row.appendChild(e);}});});}
resortArray(ts.p.colModel);resortArray(ts.p.colNames);resortArray(ts.grid.headers);resortRows($("thead:first",ts.grid.hDiv),keepHeader&&":not(.ui-jqgrid-labels)");if(updateCells){resortRows($("tbody:first",ts.grid.bDiv),".jqgrow");}
if(ts.p.footerrow){resortRows($("tbody:first",ts.grid.sDiv));}
if(ts.p.remapColumns){if(!ts.p.remapColumns.length){ts.p.remapColumns=$.makeArray(permutation);}else{resortArray(ts.p.remapColumns);}}
ts.p.lastsort=$.inArray(ts.p.lastsort,permutation);if(ts.p.treeGrid){ts.p.expColInd=$.inArray(ts.p.expColInd,permutation);}},setGridWidth:function(nwidth,shrink){return this.each(function(){var $t=this,cw,initwidth=0,brd=$t.p.cellLayout,lvc,vc=0,hs=false,scw=$t.p.scrollOffset,aw,gw=0,tw=0,cl=0,cr;if(!$t.grid){return;}
if(typeof shrink!='boolean'){shrink=$t.p.shrinkToFit;}
if(isNaN(nwidth)){return;}
else{nwidth=parseInt(nwidth,10);$t.grid.width=$t.p.width=nwidth;}
$("#gbox_"+$t.p.id).css("width",nwidth+"px");$("#gview_"+$t.p.id).css("width",nwidth+"px");$($t.grid.bDiv).css("width",nwidth+"px");$($t.grid.hDiv).css("width",nwidth+"px");if($t.p.pager){$($t.p.pager).css("width",nwidth+"px");}
if($t.p.toppager){$($t.p.toppager).css("width",nwidth+"px");}
if($t.p.toolbar[0]===true){$($t.grid.uDiv).css("width",nwidth+"px");if($t.p.toolbar[1]=="both"){$($t.grid.ubDiv).css("width",nwidth+"px");}}
if($t.p.footerrow){$($t.grid.sDiv).css("width",nwidth+"px");}
if(shrink===false&&$t.p.forceFit===true){$t.p.forceFit=false;}
if(shrink===true){if($.browser.safari){brd=0;}
$.each($t.p.colModel,function(i){if(this.hidden===false){initwidth+=parseInt(this.width,10);if(this.fixed){tw+=this.width;gw+=this.width+brd;}else{vc++;}
cl++;}});if(vc===0){return;}
$t.p.tblwidth=initwidth;aw=nwidth-brd*vc-gw;if(!isNaN($t.p.height)){if($($t.grid.bDiv)[0].clientHeight<$($t.grid.bDiv)[0].scrollHeight){hs=true;aw-=scw;}}
initwidth=0;var cle=$t.grid.cols.length>0;$.each($t.p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=Math.round(aw*this.width/($t.p.tblwidth-tw));if(cw<0){return;}
this.width=cw;initwidth+=cw;$t.grid.headers[i].width=cw;$t.grid.headers[i].el.style.width=cw+"px";if($t.p.footerrow){$t.grid.footers[i].style.width=cw+"px";}
if(cle){$t.grid.cols[i].style.width=cw+"px";}
lvc=i;}});cr=0;if(hs){if(nwidth-gw-(initwidth+brd*vc)!==scw){cr=nwidth-gw-(initwidth+brd*vc)-scw;}}else if(Math.abs(nwidth-gw-(initwidth+brd*vc))!==1){cr=nwidth-gw-(initwidth+brd*vc);}
$t.p.colModel[lvc].width+=cr;$t.p.tblwidth=initwidth+cr+tw+brd*cl;if($t.p.tblwidth>nwidth){var delta=$t.p.tblwidth-parseInt(nwidth,10);$t.p.tblwidth=nwidth;cw=$t.p.colModel[lvc].width=$t.p.colModel[lvc].width-delta;}else{cw=$t.p.colModel[lvc].width;}
$t.grid.headers[lvc].width=cw;$t.grid.headers[lvc].el.style.width=cw+"px";if(cle){$t.grid.cols[lvc].style.width=cw+"px";}
$('table:first',$t.grid.bDiv).css("width",$t.p.tblwidth+"px");$('table:first',$t.grid.hDiv).css("width",$t.p.tblwidth+"px");$t.grid.hDiv.scrollLeft=$t.grid.bDiv.scrollLeft;if($t.p.footerrow){$t.grid.footers[lvc].style.width=cw+"px";$('table:first',$t.grid.sDiv).css("width",$t.p.tblwidth+"px");}}});},setGridHeight:function(nh){return this.each(function(){var $t=this;if(!$t.grid){return;}
$($t.grid.bDiv).css({height:nh+(isNaN(nh)?"":"px")});$t.p.height=nh;if($t.p.scroll){$t.grid.populateVisible();}});},setCaption:function(newcap){return this.each(function(){this.p.caption=newcap;$("span.ui-jqgrid-title",this.grid.cDiv).html(newcap);$(this.grid.cDiv).show();});},setLabel:function(colname,nData,prop,attrp){return this.each(function(){var $t=this,pos=-1;if(!$t.grid){return;}
if(isNaN(colname)){$($t.p.colModel).each(function(i){if(this.name==colname){pos=i;return false;}});}else{pos=parseInt(colname,10);}
if(pos>=0){var thecol=$("tr.ui-jqgrid-labels th:eq("+pos+")",$t.grid.hDiv);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico);$t.p.colNames[pos]=nData;}
if(prop){if(typeof prop==='string'){$(thecol).addClass(prop);}else{$(thecol).css(prop);}}
if(typeof attrp==='object'){$(thecol).attr(attrp);}}});},setCell:function(rowid,colname,nData,cssp,attrp,forceupd){return this.each(function(){var $t=this,pos=-1,v,title;if(!$t.grid){return;}
if(isNaN(colname)){$($t.p.colModel).each(function(i){if(this.name==colname){pos=i;return false;}});}else{pos=parseInt(colname,10);}
if(pos>=0){var ind=$t.rows.namedItem(rowid);if(ind){var tcell=$("td:eq("+pos+")",ind);if(nData!==""||forceupd===true){v=$t.formatter(rowid,nData,pos,ind,'edit');title=$t.p.colModel[pos].title?{"title":$.jgrid.stripHtml(v)}:{};if($t.p.treeGrid&&$(".tree-wrap",$(tcell)).length>0){$("span",$(tcell)).html(v).attr(title);}else{$(tcell).html(v).attr(title);}}
if(typeof cssp==='string'){$(tcell).addClass(cssp);}else if(cssp){$(tcell).css(cssp);}
if(typeof attrp==='object'){$(tcell).attr(attrp);}}}});},getCell:function(rowid,col){var ret=false;this.each(function(){var $t=this,pos=-1;if(!$t.grid){return;}
if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){pos=i;return false;}});}else{pos=parseInt(col,10);}
if(pos>=0){var ind=$t.rows.namedItem(rowid);if(ind){try{ret=$.unformat($("td:eq("+pos+")",ind),{rowId:ind.id,colModel:$t.p.colModel[pos]},pos);}catch(e){ret=$.jgrid.htmlDecode($("td:eq("+pos+")",ind).html());}}}});return ret;},getCol:function(col,obj,mathopr){var ret=[],val,sum=0;obj=typeof(obj)!='boolean'?false:obj;if(typeof mathopr=='undefined'){mathopr=false;}
this.each(function(){var $t=this,pos=-1;if(!$t.grid){return;}
if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){pos=i;return false;}});}else{pos=parseInt(col,10);}
if(pos>=0){var ln=$t.rows.length,i=0;if(ln&&ln>0){while(i<ln){try{val=$.unformat($($t.rows[i].cells[pos]),{rowId:$t.rows[i].id,colModel:$t.p.colModel[pos]},pos);}catch(e){val=$.jgrid.htmlDecode($t.rows[i].cells[pos].innerHTML);}
if(mathopr){sum+=parseFloat(val);}
else if(obj){ret.push({id:$t.rows[i].id,value:val});}
else{ret[i]=val;}
i++;}
if(mathopr){switch(mathopr.toLowerCase()){case'sum':ret=sum;break;case'avg':ret=sum/ln;break;case'count':ret=ln;break;}}}}});return ret;},clearGridData:function(clearfooter){return this.each(function(){var $t=this;if(!$t.grid){return;}
if(typeof clearfooter!='boolean'){clearfooter=false;}
$("tbody:first tr",$t.grid.bDiv).remove();if($t.p.footerrow&&clearfooter){$(".ui-jqgrid-ftable td",$t.grid.sDiv).html("&#160;");}
$t.p.selrow=null;$t.p.selarrrow=[];$t.p.savedRow=[];$t.p.records=0;$t.p.page='0';$t.p.lastpage='0';$t.p.reccount=0;$t.updatepager(true,false);});},getInd:function(rowid,rc){var ret=false,rw;this.each(function(){rw=this.rows.namedItem(rowid);if(rw){ret=rc===true?rw:rw.rowIndex;}});return ret;}});})(jQuery);var showModal=function(h){h.w.show();};var closeModal=function(h){h.w.hide().attr("aria-hidden","true");if(h.o){h.o.remove();}};var hideModal=function(selector,o){o=jQuery.extend({jqm:true,gb:''},o||{});if(o.onClose){var oncret=o.onClose(selector);if(typeof oncret=='boolean'&&!oncret){return;}}
if(jQuery.fn.jqm&&o.jqm===true){jQuery(selector).attr("aria-hidden","true").jqmHide();}else{if(o.gb!=''){try{jQuery(".jqgrid-overlay:first",o.gb).hide();}catch(e){}}
jQuery(selector).hide().attr("aria-hidden","true");}};function findPos(obj){var curleft=0,curtop=0;if(obj.offsetParent){do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop;}while(obj=obj.offsetParent);}
return[curleft,curtop];}
var createModal=function(aIDs,content,p,insertSelector,posSelector,appendsel){var mw=document.createElement('div'),rtlsup;rtlsup=jQuery(p.gbox).attr("dir")=="rtl"?true:false;mw.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";mw.id=aIDs.themodal;var mh=document.createElement('div');mh.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";mh.id=aIDs.modalhead;jQuery(mh).append("<span class='ui-jqdialog-title'>"+p.caption+"</span>");var ahr=jQuery("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){ahr.addClass('ui-state-hover');},function(){ahr.removeClass('ui-state-hover');}).append("<span class='ui-icon ui-icon-closethick'></span>");jQuery(mh).append(ahr);if(rtlsup){mw.dir="rtl";jQuery(".ui-jqdialog-title",mh).css("float","right");jQuery(".ui-jqdialog-titlebar-close",mh).css("left",0.3+"em");}else{mw.dir="ltr";jQuery(".ui-jqdialog-title",mh).css("float","left");jQuery(".ui-jqdialog-titlebar-close",mh).css("right",0.3+"em");}
var mc=document.createElement('div');jQuery(mc).addClass("ui-jqdialog-content ui-widget-content").attr("id",aIDs.modalcontent);jQuery(mc).append(content);mw.appendChild(mc);jQuery(mw).prepend(mh);if(appendsel===true){jQuery('body').append(mw);}
else{jQuery(mw).insertBefore(insertSelector);}
if(typeof p.jqModal==='undefined'){p.jqModal=true;}
var coord={};if(jQuery.fn.jqm&&p.jqModal===true){if(p.left===0&&p.top===0){var pos=[];pos=findPos(posSelector);p.left=pos[0]+4;p.top=pos[1]+4;}
coord.top=p.top+"px";coord.left=p.left;}else if(p.left!==0||p.top!==0){coord.left=p.left;coord.top=p.top+"px";}
jQuery("a.ui-jqdialog-titlebar-close",mh).click(function(e){var oncm=jQuery("#"+aIDs.themodal).data("onClose")||p.onClose;var gboxclose=jQuery("#"+aIDs.themodal).data("gbox")||p.gbox;hideModal("#"+aIDs.themodal,{gb:gboxclose,jqm:p.jqModal,onClose:oncm});return false;});if(p.width===0||!p.width){p.width=300;}
if(p.height===0||!p.height){p.height=200;}
if(!p.zIndex){p.zIndex=950;}
var rtlt=0;if(rtlsup&&coord.left&&!appendsel){rtlt=jQuery(p.gbox).width()-(!isNaN(p.width)?parseInt(p.width,10):0)-8;coord.left=parseInt(coord.left,10)+parseInt(rtlt,10);}
if(coord.left){coord.left+="px";}
jQuery(mw).css(jQuery.extend({width:isNaN(p.width)?"auto":p.width+"px",height:isNaN(p.height)?"auto":p.height+"px",zIndex:p.zIndex,overflow:'hidden'},coord)).attr({tabIndex:"-1","role":"dialog","aria-labelledby":aIDs.modalhead,"aria-hidden":"true"});if(typeof p.drag=='undefined'){p.drag=true;}
if(typeof p.resize=='undefined'){p.resize=true;}
if(p.drag){jQuery(mh).css('cursor','move');if(jQuery.fn.jqDrag){jQuery(mw).jqDrag(mh);}else{try{jQuery(mw).draggable({handle:jQuery("#"+mh.id)});}catch(e){}}}
if(p.resize){if(jQuery.fn.jqResize){jQuery(mw).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>");jQuery("#"+aIDs.themodal).jqResize(".jqResize",aIDs.scrollelm?"#"+aIDs.scrollelm:false);}else{try{jQuery(mw).resizable({handles:'se, sw',alsoResize:aIDs.scrollelm?"#"+aIDs.scrollelm:false});}catch(e){}}}
if(p.closeOnEscape===true){jQuery(mw).keydown(function(e){if(e.which==27){var cone=jQuery("#"+aIDs.themodal).data("onClose")||p.onClose;hideModal(this,{gb:p.gbox,jqm:p.jqModal,onClose:cone});}});}};var viewModal=function(selector,o){o=jQuery.extend({toTop:true,overlay:10,modal:false,onShow:showModal,onHide:closeModal,gbox:'',jqm:true,jqM:true},o||{});if(jQuery.fn.jqm&&o.jqm===true){if(o.jqM){jQuery(selector).attr("aria-hidden","false").jqm(o).jqmShow();}
else{jQuery(selector).attr("aria-hidden","false").jqmShow();}}else{if(o.gbox!=''){jQuery(".jqgrid-overlay:first",o.gbox).show();jQuery(selector).data("gbox",o.gbox);}
jQuery(selector).show().attr("aria-hidden","false");try{jQuery(':input:visible',selector)[0].focus();}catch(_){}}};function info_dialog(caption,content,c_b,modalopt){var mopt={width:290,height:'auto',dataheight:'auto',drag:true,resize:false,caption:"<b>"+caption+"</b>",left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:'center',buttonalign:'center',buttons:[]};jQuery.extend(mopt,modalopt||{});var jm=mopt.jqModal;if(jQuery.fn.jqm&&!jm){jm=false;}
var buttstr="";if(mopt.buttons.length>0){for(var i=0;i<mopt.buttons.length;i++){if(typeof mopt.buttons[i].id=="undefined"){mopt.buttons[i].id="info_button_"+i;}
buttstr+="<a href='javascript:void(0)' id='"+mopt.buttons[i].id+"' class='fm-button ui-state-default ui-corner-all'>"+mopt.buttons[i].text+"</a>";}}
var dh=isNaN(mopt.dataheight)?mopt.dataheight:mopt.dataheight+"px",cn="text-align:"+mopt.align+";";var cnt="<div id='info_id'>";cnt+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+dh+";"+cn+"'>"+content+"</div>";cnt+=c_b?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+mopt.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+c_b+"</a>"+buttstr+"</div>":buttstr!=""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+mopt.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+buttstr+"</div>":"";cnt+="</div>";try{if(jQuery("#info_dialog").attr("aria-hidden")=="false"){hideModal("#info_dialog",{jqm:jm});}
jQuery("#info_dialog").remove();}catch(e){}
createModal({themodal:'info_dialog',modalhead:'info_head',modalcontent:'info_content',scrollelm:'infocnt'},cnt,mopt,'','',true);if(buttstr){jQuery.each(mopt.buttons,function(i){jQuery("#"+this.id,"#info_id").bind('click',function(){mopt.buttons[i].onClick.call(jQuery("#info_dialog"));return false;});});}
jQuery("#closedialog","#info_id").click(function(e){hideModal("#info_dialog",{jqm:jm});return false;});jQuery(".fm-button","#info_dialog").hover(function(){jQuery(this).addClass('ui-state-hover');},function(){jQuery(this).removeClass('ui-state-hover');});viewModal("#info_dialog",{onHide:function(h){h.w.hide().remove();if(h.o){h.o.remove();}},modal:mopt.modal,jqm:jm});try{$("#info_dialog").focus();}catch(e){}}
function createEl(eltype,options,vl,autowidth,ajaxso){var elem="";if(options.defaultValue){delete options.defaultValue;}
function bindEv(el,opt){if(jQuery.isFunction(opt.dataInit)){el.id=opt.id;opt.dataInit(el);delete opt.id;delete opt.dataInit;}
if(opt.dataEvents){jQuery.each(opt.dataEvents,function(){if(this.data!==undefined){jQuery(el).bind(this.type,this.data,this.fn);}else{jQuery(el).bind(this.type,this.fn);}});delete opt.dataEvents;}
return opt;}
switch(eltype)
{case"textarea":elem=document.createElement("textarea");if(autowidth){if(!options.cols){jQuery(elem).css({width:"98%"});}}else if(!options.cols){options.cols=20;}
if(!options.rows){options.rows=2;}
if(vl=='&nbsp;'||vl=='&#160;'||(vl.length==1&&vl.charCodeAt(0)==160)){vl="";}
elem.value=vl;options=bindEv(elem,options);jQuery(elem).attr(options).attr({"role":"textbox","multiline":"true"});break;case"checkbox":elem=document.createElement("input");elem.type="checkbox";if(!options.value){var vl1=vl.toLowerCase();if(vl1.search(/(false|0|no|off|undefined)/i)<0&&vl1!==""){elem.checked=true;elem.defaultChecked=true;elem.value=vl;}else{elem.value="on";}
jQuery(elem).attr("offval","off");}else{var cbval=options.value.split(":");if(vl===cbval[0]){elem.checked=true;elem.defaultChecked=true;}
elem.value=cbval[0];jQuery(elem).attr("offval",cbval[1]);try{delete options.value;}catch(e){}}
options=bindEv(elem,options);jQuery(elem).attr(options).attr("role","checkbox");break;case"select":elem=document.createElement("select");elem.setAttribute("role","select");var msl,ovm=[];if(options.multiple===true){msl=true;elem.multiple="multiple";$(elem).attr("aria-multiselectable","true");}else{msl=false;}
if(typeof(options.dataUrl)!="undefined"){jQuery.ajax(jQuery.extend({url:options.dataUrl,type:"GET",complete:function(data,status){try{delete options.dataUrl;delete options.value;}catch(e){}
var a;if(typeof(options.buildSelect)!="undefined"){var b=options.buildSelect(data);a=jQuery(b).html();delete options.buildSelect;}else{a=jQuery(data.responseText).html();}
if(a){jQuery(elem).append(a);options=bindEv(elem,options);if(typeof options.size==='undefined'){options.size=msl?3:1;}
if(msl){ovm=vl.split(",");ovm=jQuery.map(ovm,function(n){return jQuery.trim(n);});}else{ovm[0]=jQuery.trim(vl);}
jQuery(elem).attr(options);setTimeout(function(){jQuery("option",elem).each(function(i){if(i===0){this.selected="";}
$(this).attr("role","option");if(jQuery.inArray(jQuery.trim(jQuery(this).text()),ovm)>-1||jQuery.inArray(jQuery.trim(jQuery(this).val()),ovm)>-1){this.selected="selected";if(!msl){return false;}}});},0);}}},ajaxso||{}));}else if(options.value){var i;if(msl){ovm=vl.split(",");ovm=jQuery.map(ovm,function(n){return jQuery.trim(n);});if(typeof options.size==='undefined'){options.size=3;}}else{options.size=1;}
if(typeof options.value==='function'){options.value=options.value();}
var so,sv,ov;if(typeof options.value==='string'){so=options.value.split(";");for(i=0;i<so.length;i++){sv=so[i].split(":");if(sv.length>2){sv[1]=jQuery.map(sv,function(n,i){if(i>0){return n;}}).join(":");}
ov=document.createElement("option");ov.setAttribute("role","option");ov.value=sv[0];ov.innerHTML=sv[1];if(!msl&&(jQuery.trim(sv[0])==jQuery.trim(vl)||jQuery.trim(sv[1])==jQuery.trim(vl))){ov.selected="selected";}
if(msl&&(jQuery.inArray(jQuery.trim(sv[1]),ovm)>-1||jQuery.inArray(jQuery.trim(sv[0]),ovm)>-1)){ov.selected="selected";}
elem.appendChild(ov);}}else if(typeof options.value==='object'){var oSv=options.value;for(var key in oSv){if(oSv.hasOwnProperty(key)){ov=document.createElement("option");ov.setAttribute("role","option");ov.value=key;ov.innerHTML=oSv[key];if(!msl&&(jQuery.trim(key)==jQuery.trim(vl)||jQuery.trim(oSv[key])==jQuery.trim(vl))){ov.selected="selected";}
if(msl&&(jQuery.inArray(jQuery.trim(oSv[key]),ovm)>-1||jQuery.inArray(jQuery.trim(key),ovm)>-1)){ov.selected="selected";}
elem.appendChild(ov);}}}
options=bindEv(elem,options);try{delete options.value;}catch(e){}
jQuery(elem).attr(options);}
break;case"text":case"password":case"button":var role;if(eltype=="button"){role="button";}
else{role="textbox";}
elem=document.createElement("input");elem.type=eltype;elem.value=vl;options=bindEv(elem,options);if(eltype!="button"){if(autowidth){if(!options.size){jQuery(elem).css({width:"98%"});}}else if(!options.size){options.size=20;}}
jQuery(elem).attr(options).attr("role",role);break;case"image":case"file":elem=document.createElement("input");elem.type=eltype;options=bindEv(elem,options);jQuery(elem).attr(options);break;case"custom":elem=document.createElement("span");try{if(jQuery.isFunction(options.custom_element)){var celm=options.custom_element.call(this,vl,options);if(celm){celm=jQuery(celm).addClass("customelement").attr({id:options.id,name:options.name});jQuery(elem).empty().append(celm);}else{throw"e2";}}else{throw"e1";}}catch(e){if(e=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);}
if(e=="e2"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose);}
else{info_dialog(jQuery.jgrid.errors.errcap,e.message,jQuery.jgrid.edit.bClose);}}
break;}
return elem;}
function daysInFebruary(year){return(((year%4===0)&&(year%100!==0||(year%400===0)))?29:28);}
function DaysArray(n){for(var i=1;i<=n;i++){this[i]=31;if(i==4||i==6||i==9||i==11){this[i]=30;}
if(i==2){this[i]=29;}}
return this;}
function checkDate(format,date){var tsp={},sep;format=format.toLowerCase();if(format.indexOf("/")!=-1){sep="/";}else if(format.indexOf("-")!=-1){sep="-";}else if(format.indexOf(".")!=-1){sep=".";}else{sep="/";}
format=format.split(sep);date=date.split(sep);if(date.length!=3){return false;}
var j=-1,yln,dln=-1,mln=-1;for(var i=0;i<format.length;i++){var dv=isNaN(date[i])?0:parseInt(date[i],10);tsp[format[i]]=dv;yln=format[i];if(yln.indexOf("y")!=-1){j=i;}
if(yln.indexOf("m")!=-1){mln=i;}
if(yln.indexOf("d")!=-1){dln=i;}}
if(format[j]=="y"||format[j]=="yyyy"){yln=4;}else if(format[j]=="yy"){yln=2;}else{yln=-1;}
var daysInMonth=DaysArray(12);var strDate;if(j===-1){return false;}else{strDate=tsp[format[j]].toString();if(yln==2&&strDate.length==1){yln=1;}
if(strDate.length!=yln||(tsp[format[j]]===0&&date[j]!="00")){return false;}}
if(mln===-1){return false;}else{strDate=tsp[format[mln]].toString();if(strDate.length<1||tsp[format[mln]]<1||tsp[format[mln]]>12){return false;}}
if(dln===-1){return false;}else{strDate=tsp[format[dln]].toString();if(strDate.length<1||tsp[format[dln]]<1||tsp[format[dln]]>31||(tsp[format[mln]]==2&&tsp[format[dln]]>daysInFebruary(tsp[format[j]]))||tsp[format[dln]]>daysInMonth[tsp[format[mln]]]){return false;}}
return true;}
function isEmpty(val)
{if(val.match(/^s+$/)||val==""){return true;}else{return false;}}
function checkTime(time){var re=/^(\d{1,2}):(\d{2})([ap]m)?$/,regs;if(!isEmpty(time))
{regs=time.match(re);if(regs){if(regs[3]){if(regs[1]<1||regs[1]>12){return false;}}else{if(regs[1]>23){return false;}}
if(regs[2]>59){return false;}}else{return false;}}
return true;}
function checkValues(val,valref,g){var edtrul,i,nm;if(typeof(valref)=='string'){for(i=0,len=g.p.colModel.length;i<len;i++){if(g.p.colModel[i].name==valref){edtrul=g.p.colModel[i].editrules;valref=i;try{nm=g.p.colModel[i].formoptions.label;}catch(e){}
break;}}}else if(valref>=0){edtrul=g.p.colModel[valref].editrules;}
if(edtrul){if(!nm){nm=g.p.colNames[valref];}
if(edtrul.required===true){if(val.match(/^s+$/)||val==""){return[false,nm+": "+jQuery.jgrid.edit.msg.required,""];}}
var rqfield=edtrul.required===false?false:true;if(edtrul.number===true){if(!(rqfield===false&&isEmpty(val))){if(isNaN(val)){return[false,nm+": "+jQuery.jgrid.edit.msg.number,""];}}}
if(typeof edtrul.minValue!='undefined'&&!isNaN(edtrul.minValue)){if(parseFloat(val)<parseFloat(edtrul.minValue)){return[false,nm+": "+jQuery.jgrid.edit.msg.minValue+" "+edtrul.minValue,""];}}
if(typeof edtrul.maxValue!='undefined'&&!isNaN(edtrul.maxValue)){if(parseFloat(val)>parseFloat(edtrul.maxValue)){return[false,nm+": "+jQuery.jgrid.edit.msg.maxValue+" "+edtrul.maxValue,""];}}
var filter;if(edtrul.email===true){if(!(rqfield===false&&isEmpty(val))){filter=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!filter.test(val)){return[false,nm+": "+jQuery.jgrid.edit.msg.email,""];}}}
if(edtrul.integer===true){if(!(rqfield===false&&isEmpty(val))){if(isNaN(val)){return[false,nm+": "+jQuery.jgrid.edit.msg.integer,""];}
if((val%1!==0)||(val.indexOf('.')!=-1)){return[false,nm+": "+jQuery.jgrid.edit.msg.integer,""];}}}
if(edtrul.date===true){if(!(rqfield===false&&isEmpty(val))){var dft=g.p.colModel[valref].datefmt||"Y-m-d";if(!checkDate(dft,val)){return[false,nm+": "+jQuery.jgrid.edit.msg.date+" - "+dft,""];}}}
if(edtrul.time===true){if(!(rqfield===false&&isEmpty(val))){if(!checkTime(val)){return[false,nm+": "+jQuery.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];}}}
if(edtrul.url===true){if(!(rqfield===false&&isEmpty(val))){filter=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!filter.test(val)){return[false,nm+": "+jQuery.jgrid.edit.msg.url,""];}}}
if(edtrul.custom===true){if(!(rqfield===false&&isEmpty(val))){if(jQuery.isFunction(edtrul.custom_func)){var ret=edtrul.custom_func.call(g,val,nm);if(jQuery.isArray(ret)){return ret;}else{return[false,jQuery.jgrid.edit.msg.customarray,""];}}else{return[false,jQuery.jgrid.edit.msg.customfcheck,""];}}}}
return[true,"",""];};(function($){$.jgrid.extend({getColProp:function(colname){var ret={},$t=this[0];if(!$t.grid){return;}
var cM=$t.p.colModel;for(var i=0;i<cM.length;i++){if(cM[i].name==colname){ret=cM[i];break;}}
return ret;},setColProp:function(colname,obj){return this.each(function(){if(this.grid){if(obj){var cM=this.p.colModel;for(var i=0;i<cM.length;i++){if(cM[i].name==colname){$.extend(this.p.colModel[i],obj);break;}}}}});},sortGrid:function(colname,reload,sor){return this.each(function(){var $t=this,idx=-1;if(!$t.grid){return;}
if(!colname){colname=$t.p.sortname;}
for(var i=0;i<$t.p.colModel.length;i++){if($t.p.colModel[i].index==colname||$t.p.colModel[i].name==colname){idx=i;break;}}
if(idx!=-1){var sort=$t.p.colModel[idx].sortable;if(typeof sort!=='boolean'){sort=true;}
if(typeof reload!=='boolean'){reload=false;}
if(sort){$t.sortData("jqgh_"+colname,idx,reload,sor);}}});},GridDestroy:function(){return this.each(function(){if(this.grid){if(this.p.pager){$(this.p.pager).remove();}
var gid=this.id;try{$("#gbox_"+gid).remove();}catch(_){}}});},GridUnload:function(){return this.each(function(){if(!this.grid){return;}
var defgrid={id:$(this).attr('id'),cl:$(this).attr('class')};if(this.p.pager){$(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");}
var newtable=document.createElement('table');$(newtable).attr({id:defgrid.id});newtable.className=defgrid.cl;var gid=this.id;$(newtable).removeClass("ui-jqgrid-btable");if($(this.p.pager).parents("#gbox_"+gid).length===1){$(newtable).insertBefore("#gbox_"+gid).show();$(this.p.pager).insertBefore("#gbox_"+gid);}else{$(newtable).insertBefore("#gbox_"+gid).show();}
$("#gbox_"+gid).remove();});},setGridState:function(state){return this.each(function(){if(!this.grid){return;}
var $t=this;if(state=='hidden'){$(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$t.p.id).slideUp("fast");if($t.p.pager){$($t.p.pager).slideUp("fast");}
if($t.p.toppager){$($t.p.toppager).slideUp("fast");}
if($t.p.toolbar[0]===true){if($t.p.toolbar[1]=='both'){$($t.grid.ubDiv).slideUp("fast");}
$($t.grid.uDiv).slideUp("fast");}
if($t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$t.p.id).slideUp("fast");}
$(".ui-jqgrid-titlebar-close span",$t.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");$t.p.gridstate='hidden';}else if(state=='visible'){$(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$t.p.id).slideDown("fast");if($t.p.pager){$($t.p.pager).slideDown("fast");}
if($t.p.toppager){$($t.p.toppager).slideDown("fast");}
if($t.p.toolbar[0]===true){if($t.p.toolbar[1]=='both'){$($t.grid.ubDiv).slideDown("fast");}
$($t.grid.uDiv).slideDown("fast");}
if($t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$t.p.id).slideDown("fast");}
$(".ui-jqgrid-titlebar-close span",$t.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");$t.p.gridstate='visible';}});},updateGridRows:function(data,rowidname,jsonreader){var nm,success=false,title;this.each(function(){var t=this,vl,ind,srow,sid;if(!t.grid){return false;}
if(!rowidname){rowidname="id";}
if(data&&data.length>0){$(data).each(function(j){srow=this;ind=t.rows.namedItem(srow[rowidname]);if(ind){sid=srow[rowidname];if(jsonreader===true){if(t.p.jsonReader.repeatitems===true){if(t.p.jsonReader.cell){srow=srow[t.p.jsonReader.cell];}
for(var k=0;k<srow.length;k++){vl=t.formatter(sid,srow[k],k,srow,'edit');title=t.p.colModel[k].title?{"title":$.jgrid.stripHtml(vl)}:{};if(t.p.treeGrid===true&&nm==t.p.ExpandColumn){$("td:eq("+k+") > span:first",ind).html(vl).attr(title);}else{$("td:eq("+k+")",ind).html(vl).attr(title);}}
success=true;return true;}}
$(t.p.colModel).each(function(i){nm=jsonreader===true?this.jsonmap||this.name:this.name;if(srow[nm]!==undefined){vl=t.formatter(sid,srow[nm],i,srow,'edit');title=this.title?{"title":$.jgrid.stripHtml(vl)}:{};if(t.p.treeGrid===true&&nm==t.p.ExpandColumn){$("td:eq("+i+") > span:first",ind).html(vl).attr(title);}else{$("td:eq("+i+")",ind).html(vl).attr(title);}
success=true;}});}});}});return success;},filterGrid:function(gridid,p){p=$.extend({gridModel:false,gridNames:false,gridToolbar:false,filterModel:[],formtype:"horizontal",autosearch:true,formclass:"filterform",tableclass:"filtertable",buttonclass:"filterbutton",searchButton:"Search",clearButton:"Clear",enableSearch:false,enableClear:false,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,url:'',marksearched:true},p||{});return this.each(function(){var self=this;this.p=p;if(this.p.filterModel.length===0&&this.p.gridModel===false){alert("No filter is set");return;}
if(!gridid){alert("No target grid is set!");return;}
this.p.gridid=gridid.indexOf("#")!=-1?gridid:"#"+gridid;var gcolMod=$(this.p.gridid).jqGrid("getGridParam",'colModel');if(gcolMod){if(this.p.gridModel===true){var thegrid=$(this.p.gridid)[0];var sh;$.each(gcolMod,function(i,n){var tmpFil=[];this.search=this.search===false?false:true;if(this.editrules&&this.editrules.searchhidden===true){sh=true;}else{if(this.hidden===true){sh=false;}else{sh=true;}}
if(this.search===true&&sh===true){if(self.p.gridNames===true){tmpFil.label=thegrid.p.colNames[i];}else{tmpFil.label='';}
tmpFil.name=this.name;tmpFil.index=this.index||this.name;tmpFil.stype=this.edittype||'text';if(tmpFil.stype!='select'){tmpFil.stype='text';}
tmpFil.defval=this.defval||'';tmpFil.surl=this.surl||'';tmpFil.sopt=this.editoptions||{};tmpFil.width=this.width;self.p.filterModel.push(tmpFil);}});}else{$.each(self.p.filterModel,function(i,n){for(var j=0;j<gcolMod.length;j++){if(this.name==gcolMod[j].name){this.index=gcolMod[j].index||this.name;break;}}
if(!this.index){this.index=this.name;}});}}else{alert("Could not get grid colModel");return;}
var triggerSearch=function(){var sdata={},j=0,v;var gr=$(self.p.gridid)[0],nm;gr.p.searchdata={};if($.isFunction(self.p.beforeSearch)){self.p.beforeSearch();}
$.each(self.p.filterModel,function(i,n){nm=this.index;switch(this.stype){case'select':v=$("select[name="+nm+"]",self).val();if(v){sdata[nm]=v;if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).addClass("dirty-cell");}
j++;}else{if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).removeClass("dirty-cell");}
try{delete gr.p.postData[this.index];}catch(e){}}
break;default:v=$("input[name="+nm+"]",self).val();if(v){sdata[nm]=v;if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).addClass("dirty-cell");}
j++;}else{if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).removeClass("dirty-cell");}
try{delete gr.p.postData[this.index];}catch(e){}}}});var sd=j>0?true:false;$.extend(gr.p.postData,sdata);var saveurl;if(self.p.url){saveurl=$(gr).jqGrid("getGridParam",'url');$(gr).jqGrid("setGridParam",{url:self.p.url});}
$(gr).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]);if(saveurl){$(gr).jqGrid("setGridParam",{url:saveurl});}
if($.isFunction(self.p.afterSearch)){self.p.afterSearch();}};var clearSearch=function(){var sdata={},v,j=0;var gr=$(self.p.gridid)[0],nm;if($.isFunction(self.p.beforeClear)){self.p.beforeClear();}
$.each(self.p.filterModel,function(i,n){nm=this.index;v=(this.defval)?this.defval:"";if(!this.stype){this.stype='text';}
switch(this.stype){case'select':var v1;$("select[name="+nm+"] option",self).each(function(i){if(i===0){this.selected=true;}
if($(this).text()==v){this.selected=true;v1=$(this).val();return false;}});if(v1){sdata[nm]=v1;if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).addClass("dirty-cell");}
j++;}else{if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).removeClass("dirty-cell");}
try{delete gr.p.postData[this.index];}catch(e){}}
break;case'text':$("input[name="+nm+"]",self).val(v);if(v){sdata[nm]=v;if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).addClass("dirty-cell");}
j++;}else{if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).removeClass("dirty-cell");}
try{delete gr.p.postData[this.index];}catch(e){}}
break;}});var sd=j>0?true:false;$.extend(gr.p.postData,sdata);var saveurl;if(self.p.url){saveurl=$(gr).jqGrid("getGridParam",'url');$(gr).jqGrid("setGridParam",{url:self.p.url});}
$(gr).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]);if(saveurl){$(gr).jqGrid("setGridParam",{url:saveurl});}
if($.isFunction(self.p.afterClear)){self.p.afterClear();}};var formFill=function(){var tr=document.createElement("tr");var tr1,sb,cb,tl,td;if(self.p.formtype=='horizontal'){$(tbl).append(tr);}
$.each(self.p.filterModel,function(i,n){tl=document.createElement("td");$(tl).append("<label for='"+this.name+"'>"+this.label+"</label>");td=document.createElement("td");var $t=this;if(!this.stype){this.stype='text';}
switch(this.stype)
{case"select":if(this.surl){$(td).load(this.surl,function(){if($t.defval){$("select",this).val($t.defval);}
$("select",this).attr({name:$t.index||$t.name,id:"sg_"+$t.name});if($t.sopt){$("select",this).attr($t.sopt);}
if(self.p.gridToolbar===true&&$t.width){$("select",this).width($t.width);}
if(self.p.autosearch===true){$("select",this).change(function(e){triggerSearch();return false;});}});}else{if($t.sopt.value){var oSv=$t.sopt.value;var elem=document.createElement("select");$(elem).attr({name:$t.index||$t.name,id:"sg_"+$t.name}).attr($t.sopt);var so,sv,ov;if(typeof oSv==="string"){so=oSv.split(";");for(var k=0;k<so.length;k++){sv=so[k].split(":");ov=document.createElement("option");ov.value=sv[0];ov.innerHTML=sv[1];if(sv[1]==$t.defval){ov.selected="selected";}
elem.appendChild(ov);}}else if(typeof oSv==="object"){for(var key in oSv){if(oSv.hasOwnProperty(key)){i++;ov=document.createElement("option");ov.value=key;ov.innerHTML=oSv[key];if(oSv[key]==$t.defval){ov.selected="selected";}
elem.appendChild(ov);}}}
if(self.p.gridToolbar===true&&$t.width){$(elem).width($t.width);}
$(td).append(elem);if(self.p.autosearch===true){$(elem).change(function(e){triggerSearch();return false;});}}}
break;case'text':var df=this.defval?this.defval:"";$(td).append("<input type='text' name='"+(this.index||this.name)+"' id='sg_"+this.name+"' value='"+df+"'/>");if($t.sopt){$("input",td).attr($t.sopt);}
if(self.p.gridToolbar===true&&$t.width){if($.browser.msie){$("input",td).width($t.width-4);}else{$("input",td).width($t.width-2);}}
if(self.p.autosearch===true){$("input",td).keypress(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){triggerSearch();return false;}
return this;});}
break;}
if(self.p.formtype=='horizontal'){if(self.p.gridToolbar===true&&self.p.gridNames===false){$(tr).append(td);}else{$(tr).append(tl).append(td);}
$(tr).append(td);}else{tr1=document.createElement("tr");$(tr1).append(tl).append(td);$(tbl).append(tr1);}});td=document.createElement("td");if(self.p.enableSearch===true){sb="<input type='button' id='sButton' class='"+self.p.buttonclass+"' value='"+self.p.searchButton+"'/>";$(td).append(sb);$("input#sButton",td).click(function(){triggerSearch();return false;});}
if(self.p.enableClear===true){cb="<input type='button' id='cButton' class='"+self.p.buttonclass+"' value='"+self.p.clearButton+"'/>";$(td).append(cb);$("input#cButton",td).click(function(){clearSearch();return false;});}
if(self.p.enableClear===true||self.p.enableSearch===true){if(self.p.formtype=='horizontal'){$(tr).append(td);}else{tr1=document.createElement("tr");$(tr1).append("<td>&#160;</td>").append(td);$(tbl).append(tr1);}}};var frm=$("<form name='SearchForm' style=display:inline;' class='"+this.p.formclass+"'></form>");var tbl=$("<table class='"+this.p.tableclass+"' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");$(frm).append(tbl);formFill();$(this).append(frm);this.triggerSearch=triggerSearch;this.clearSearch=clearSearch;});},filterToolbar:function(p){p=$.extend({autosearch:true,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:'',stringResult:false,groupOp:'AND'},p||{});return this.each(function(){var $t=this;var triggerToolbar=function(){var sdata={},j=0,v,nm,sopt={};$.each($t.p.colModel,function(i,n){nm=this.index||this.name;var so=(this.searchoptions&&this.searchoptions.sopt)?this.searchoptions.sopt[0]:"bw";switch(this.stype){case'select':v=$("select[name="+nm+"]",$t.grid.hDiv).val();if(v){sdata[nm]=v;sopt[nm]=so;j++;}else{try{delete $t.p.postData[nm];}catch(e){}}
break;case'text':v=$("input[name="+nm+"]",$t.grid.hDiv).val();if(v){sdata[nm]=v;sopt[nm]=so;j++;}else{try{delete $t.p.postData[nm];}catch(e){}}
break;}});var sd=j>0?true:false;if(!p.stringResult){$.extend($t.p.postData,sdata);}else{var ruleGroup="{\"groupOp\":\""+p.groupOp+"\",\"rules\":[";var gi=0;$.each(sdata,function(i,n){if(gi>0){ruleGroup+=",";}
ruleGroup+="{\"field\":\""+i+"\",";ruleGroup+="\"op\":\""+sopt[i]+"\",";ruleGroup+="\"data\":\""+n+"\"}";gi++;});ruleGroup+="]}";$.extend($t.p.postData,{filters:ruleGroup});}
var saveurl;if($t.p.searchurl){saveurl=$t.p.url;$($t).jqGrid("setGridParam",{url:$t.p.searchurl});}
var bsr=false;if($.isFunction(p.beforeSearch)){bsr=p.beforeSearch.call($t);}
if(!bsr){$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]);}
if(saveurl){$($t).jqGrid("setGridParam",{url:saveurl});}
if($.isFunction(p.afterSearch)){p.afterSearch();}};var clearToolbar=function(trigger){var sdata={},v,j=0,nm;trigger=(typeof trigger!='boolean')?true:trigger;$.each($t.p.colModel,function(i,n){v=(this.searchoptions&&this.searchoptions.defaultValue)?this.searchoptions.defaultValue:"";nm=this.index||this.name;switch(this.stype){case'select':var v1;$("select[name="+nm+"] option",$t.grid.hDiv).each(function(i){if(i===0){this.selected=true;}
if($(this).text()==v){this.selected=true;v1=$(this).val();return false;}});if(v1){sdata[nm]=v1;j++;}else{try{delete $t.p.postData[nm];}catch(e){}}
break;case'text':$("input[name="+nm+"]",$t.grid.hDiv).val(v);if(v){sdata[nm]=v;j++;}else{try{delete $t.p.postData[nm];}catch(e){}}
break;}});var sd=j>0?true:false;if(!p.stringResult){$.extend($t.p.postData,sdata);}else{var ruleGroup="{\"groupOp\":\""+p.groupOp+"\",\"rules\":[";var gi=0;$.each(sdata,function(i,n){if(gi>0){ruleGroup+=",";}
ruleGroup+="{\"field\":\""+i+"\",";ruleGroup+="\"op\":\""+"eq"+"\",";ruleGroup+="\"data\":\""+n+"\"}";gi++;});ruleGroup+="]}";$.extend($t.p.postData,{filters:ruleGroup});}
var saveurl;if($t.p.searchurl){saveurl=$t.p.url;$($t).jqGrid("setGridParam",{url:$t.p.searchurl});}
var bcv=false;if($.isFunction(p.beforeClear)){bcv=p.beforeClear.call($t);}
if(!bcv){if(trigger){$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]);}}
if(saveurl){$($t).jqGrid("setGridParam",{url:saveurl});}
if($.isFunction(p.afterClear)){p.afterClear();}};var toggleToolbar=function(){var trow=$("tr.ui-search-toolbar",$t.grid.hDiv);if(trow.css("display")=='none'){trow.show();}
else{trow.hide();}};function bindEvents(selector,events){var jElem=$(selector);if(jElem[0]){jQuery.each(events,function(){if(this.data!==undefined){jElem.bind(this.type,this.data,this.fn);}else{jElem.bind(this.type,this.fn);}});}}
var tr=$("<tr class='ui-search-toolbar' role='rowheader'></tr>");var timeoutHnd;$.each($t.p.colModel,function(i,n){var cm=this,thd,th,soptions,surl,self;th=$("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+$t.p.direction+"'></th>");thd=$("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>");if(this.hidden===true){$(th).css("display","none");}
this.search=this.search===false?false:true;if(typeof this.stype=='undefined'){this.stype='text';}
soptions=$.extend({},this.searchoptions||{});if(this.search){switch(this.stype)
{case"select":surl=this.surl||soptions.dataUrl;if(surl){self=thd;$.ajax($.extend({url:surl,dataType:"html",complete:function(res,status){if(soptions.buildSelect!==undefined){var d=soptions.buildSelect(res);if(d){$(self).append(d);}}else{$(self).append(res.responseText);}
if(soptions.defaultValue){$("select",self).val(soptions.defaultValue);}
$("select",self).attr({name:cm.index||cm.name,id:"gs_"+cm.name});if(soptions.attr){$("select",self).attr(soptions.attr);}
$("select",self).css({width:"100%"});if(soptions.dataInit!==undefined){soptions.dataInit($("select",self)[0]);}
if(soptions.dataEvents!==undefined){bindEvents($("select",self)[0],soptions.dataEvents);}
if(p.autosearch===true){$("select",self).change(function(e){triggerToolbar();return false;});}
res=null;}},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));}else{var oSv;if(cm.searchoptions&&cm.searchoptions.value){oSv=cm.searchoptions.value;}else if(cm.editoptions&&cm.editoptions.value){oSv=cm.editoptions.value;}
if(oSv){var elem=document.createElement("select");elem.style.width="100%";$(elem).attr({name:cm.index||cm.name,id:"gs_"+cm.name});var so,sv,ov;if(typeof oSv==="string"){so=oSv.split(";");for(var k=0;k<so.length;k++){sv=so[k].split(":");ov=document.createElement("option");ov.value=sv[0];ov.innerHTML=sv[1];elem.appendChild(ov);}}else if(typeof oSv==="object"){for(var key in oSv){if(oSv.hasOwnProperty(key)){ov=document.createElement("option");ov.value=key;ov.innerHTML=oSv[key];elem.appendChild(ov);}}}
if(soptions.defaultValue){$(elem).val(soptions.defaultValue);}
if(soptions.attr){$(elem).attr(soptions.attr);}
if(soptions.dataInit!==undefined){soptions.dataInit(elem);}
if(soptions.dataEvents!==undefined){bindEvents(elem,soptions.dataEvents);}
$(thd).append(elem);if(p.autosearch===true){$(elem).change(function(e){triggerToolbar();return false;});}}}
break;case'text':var df=soptions.defaultValue?soptions.defaultValue:"";$(thd).append("<input type='text' style='width:95%;padding:0px;' name='"+(cm.index||cm.name)+"' id='gs_"+cm.name+"' value='"+df+"'/>");if(soptions.attr){$("input",thd).attr(soptions.attr);}
if(soptions.dataInit!==undefined){soptions.dataInit($("input",thd)[0]);}
if(soptions.dataEvents!==undefined){bindEvents($("input",thd)[0],soptions.dataEvents);}
if(p.autosearch===true){if(p.searchOnEnter){$("input",thd).keypress(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){triggerToolbar();return false;}
return this;});}else{$("input",thd).keydown(function(e){var key=e.which;switch(key){case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:if(timeoutHnd){clearTimeout(timeoutHnd);}
timeoutHnd=setTimeout(function(){triggerToolbar();},500);}});}}
break;}}
$(th).append(thd);$(tr).append(th);});$("table thead",$t.grid.hDiv).append(tr);this.triggerToolbar=triggerToolbar;this.clearToolbar=clearToolbar;this.toggleToolbar=toggleToolbar;});}});})(jQuery);;(function($){var rp_ge=null;$.jgrid.extend({searchGrid:function(p){p=$.extend({recreateFilter:false,drag:true,sField:'searchField',sValue:'searchString',sOper:'searchOper',sFilter:'filters',loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,multipleSearch:false,cloneSearchRowOnAdd:true,sopt:null,stringResult:undefined,onClose:null,useDataProxy:false,overlay:true},$.jgrid.search,p||{});return this.each(function(){var $t=this;if(!$t.grid){return;}
function applyDefaultFilters(gridDOMobj,filterSettings){var defaultFilters=gridDOMobj.p.postData[filterSettings.sFilter];if(typeof(defaultFilters)=="string"){defaultFilters=$.jgrid.parse(defaultFilters);}
if(defaultFilters){if(defaultFilters.groupOp){gridDOMobj.SearchFilter.setGroupOp(defaultFilters.groupOp);}
if(defaultFilters.rules){var f,i=0,li=defaultFilters.rules.length,success=false;for(;i<li;i++){f=defaultFilters.rules[i];if(f.field!==undefined&&f.op!==undefined&&f.data!==undefined){success=gridDOMobj.SearchFilter.setFilter({'sfref':gridDOMobj.SearchFilter.$.find(".sf:last"),'filter':$.extend({},f)});if(success){gridDOMobj.SearchFilter.add();}}}}}}
if($.fn.searchFilter){var fid="fbox_"+$t.p.id;if(p.recreateFilter===true){$("#"+fid).remove();}
if($("#"+fid).html()!=null){if($.isFunction(p.beforeShowSearch)){p.beforeShowSearch($("#"+fid));}
showFilter();if($.isFunction(p.afterShowSearch)){p.afterShowSearch($("#"+fid));}}else{var fields=[],colNames=$("#"+$t.p.id).jqGrid("getGridParam","colNames"),colModel=$("#"+$t.p.id).jqGrid("getGridParam","colModel"),stempl=['eq','ne','lt','le','gt','ge','bw','bn','in','ni','ew','en','cn','nc'],j,pos,k,oprtr=[];if(p.sopt!==null){k=0;for(j=0;j<p.sopt.length;j++){if((pos=$.inArray(p.sopt[j],stempl))!=-1){oprtr[k]={op:p.sopt[j],text:p.odata[pos]};k++;}}}else{for(j=0;j<stempl.length;j++){oprtr[j]={op:stempl[j],text:p.odata[j]};}}
var searchable;$.each(colModel,function(i,v){var searchable=(typeof v.search==='undefined')?true:v.search,hidden=(v.hidden===true),soptions=$.extend({},{text:colNames[i],itemval:v.index||v.name},this.searchoptions),ignoreHiding=(soptions.searchhidden===true);if(typeof soptions.sopt!=='undefined'){k=0;soptions.ops=[];if(soptions.sopt.length>0){for(j=0;j<soptions.sopt.length;j++){if((pos=$.inArray(soptions.sopt[j],stempl))!=-1){soptions.ops[k]={op:soptions.sopt[j],text:p.odata[pos]};k++;}}}}
if(typeof(this.stype)==='undefined'){this.stype='text';}
if(this.stype=='select'){if(soptions.dataUrl!==undefined){}
else{var eov;if(soptions.value){eov=soptions.value;}else if(this.editoptions){eov=this.editoptions.value;}
if(eov){soptions.dataValues=[];if(typeof(eov)==='string'){var so=eov.split(";"),sv;for(j=0;j<so.length;j++){sv=so[j].split(":");soptions.dataValues[j]={value:sv[0],text:sv[1]};}}else if(typeof(eov)==='object'){j=0;for(var key in eov){if(eov.hasOwnProperty(key)){soptions.dataValues[j]={value:key,text:eov[key]};j++;}}}}}}
if((ignoreHiding&&searchable)||(searchable&&!hidden)){fields.push(soptions);}});if(fields.length>0){$("<div id='"+fid+"' role='dialog' tabindex='-1'></div>").insertBefore("#gview_"+$t.p.id);if(p.stringResult===undefined){p.stringResult=p.multipleSearch;}
$t.SearchFilter=$("#"+fid).searchFilter(fields,{groupOps:p.groupOps,operators:oprtr,onClose:hideFilter,resetText:p.Reset,searchText:p.Find,windowTitle:p.caption,rulesText:p.rulesText,matchText:p.matchText,onSearch:searchFilters,onReset:resetFilters,stringResult:p.stringResult,ajaxSelectOptions:$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}),clone:p.cloneSearchRowOnAdd});$(".ui-widget-overlay","#"+fid).remove();if($t.p.direction=="rtl"){$(".ui-closer","#"+fid).css("float","left");}
if(p.drag===true){$("#"+fid+" table thead tr:first td:first").css('cursor','move');if(jQuery.fn.jqDrag){$("#"+fid).jqDrag($("#"+fid+" table thead tr:first td:first"));}else{try{$("#"+fid).draggable({handle:$("#"+fid+" table thead tr:first td:first")});}catch(e){}}}
if(p.multipleSearch===false){$(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+fid).hide();$("select[name='groupOp']","#"+fid).hide();}
if(p.multipleSearch===true&&p.loadDefaults===true){applyDefaultFilters($t,p);}
if($.isFunction(p.onInitializeSearch)){p.onInitializeSearch($("#"+fid));}
if($.isFunction(p.beforeShowSearch)){p.beforeShowSearch($("#"+fid));}
showFilter();if($.isFunction(p.afterShowSearch)){p.afterShowSearch($("#"+fid));}
if(p.closeOnEscape===true){$("#"+fid).keydown(function(e){if(e.which==27){hideFilter($("#"+fid));}});}}}}
function searchFilters(filters){var hasFilters=(filters!==undefined),grid=$("#"+$t.p.id),sdata={};if(p.multipleSearch===false){sdata[p.sField]=filters.rules[0].field;sdata[p.sValue]=filters.rules[0].data;sdata[p.sOper]=filters.rules[0].op;}else{sdata[p.sFilter]=filters;}
grid[0].p.search=hasFilters;$.extend(grid[0].p.postData,sdata);grid.trigger("reloadGrid",[{page:1}]);if(p.closeAfterSearch){hideFilter($("#"+fid));}}
function resetFilters(filters){var hasFilters=(filters!==undefined),grid=$("#"+$t.p.id),sdata=[];grid[0].p.search=hasFilters;if(p.multipleSearch===false){sdata[p.sField]=sdata[p.sValue]=sdata[p.sOper]="";}else{sdata[p.sFilter]="";}
$.extend(grid[0].p.postData,sdata);grid.trigger("reloadGrid",[{page:1}]);if(p.closeAfterReset){hideFilter($("#"+fid));}}
function hideFilter(selector){if(p.onClose){var fclm=p.onClose(selector);if(typeof fclm=='boolean'&&!fclm){return;}}
selector.hide();if(p.overlay===true){$(".jqgrid-overlay:first","#gbox_"+$t.p.id).hide();}}
function showFilter(){var fl=$(".ui-searchFilter").length;if(fl>1){var zI=$("#"+fid).css("zIndex");$("#"+fid).css({zIndex:parseInt(zI,10)+fl});}
$("#"+fid).show();if(p.overlay===true){$(".jqgrid-overlay:first","#gbox_"+$t.p.id).show();}
try{$(':input:visible',"#"+fid)[0].focus();}catch(_){}}});},editGridRow:function(rowid,p){p=$.extend({top:0,left:0,width:300,height:'auto',dataheight:'auto',modal:false,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:'',bottominfo:'',saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true},$.jgrid.edit,p||{});rp_ge=p;return this.each(function(){var $t=this;if(!$t.grid||!rowid){return;}
var gID=$t.p.id,frmgr="FrmGrid_"+gID,frmtb="TblGrid_"+gID,IDs={themodal:'editmod'+gID,modalhead:'edithd'+gID,modalcontent:'editcnt'+gID,scrollelm:frmgr},onBeforeShow=$.isFunction(rp_ge.beforeShowForm)?rp_ge.beforeShowForm:false,onAfterShow=$.isFunction(rp_ge.afterShowForm)?rp_ge.afterShowForm:false,onBeforeInit=$.isFunction(rp_ge.beforeInitData)?rp_ge.beforeInitData:false,onInitializeForm=$.isFunction(rp_ge.onInitializeForm)?rp_ge.onInitializeForm:false,copydata=null,maxCols=1,maxRows=0,gurl,postdata,ret,extpost,newData,diff;if(rowid=="new"){rowid="_empty";p.caption=p.addCaption;}else{p.caption=p.editCaption;}
if(p.recreateForm===true&&$("#"+IDs.themodal).html()!=null){$("#"+IDs.themodal).remove();}
var closeovrl=true;if(p.checkOnUpdate&&p.jqModal&&!p.modal){closeovrl=false;}
if($("#"+IDs.themodal).html()!=null){$(".ui-jqdialog-title","#"+IDs.modalhead).html(p.caption);$("#FormError","#"+frmtb).hide();if(rp_ge.topinfo){$(".topinfo","#"+frmtb+"_2").html(rp_ge.topinfo);$(".tinfo","#"+frmtb+"_2").show();}else{$(".tinfo","#"+frmtb+"_2").hide();}
if(rp_ge.bottominfo){$(".bottominfo","#"+frmtb+"_2").html(rp_ge.bottominfo);$(".binfo","#"+frmtb+"_2").show();}else{$(".binfo","#"+frmtb+"_2").hide();}
if(onBeforeInit){onBeforeInit($("#"+frmgr));}
fillData(rowid,$t,frmgr);if(rowid=="_empty"||!rp_ge.viewPagerButtons){$("#pData, #nData","#"+frmtb+"_2").hide();}else{$("#pData, #nData","#"+frmtb+"_2").show();}
if(rp_ge.processing===true){rp_ge.processing=false;$("#sData","#"+frmtb+"_2").removeClass('ui-state-active');}
if($("#"+frmgr).data("disabled")===true){$(".confirm","#"+IDs.themodal).hide();$("#"+frmgr).data("disabled",false);}
if(onBeforeShow){onBeforeShow($("#"+frmgr));}
$("#"+IDs.themodal).data("onClose",rp_ge.onClose);viewModal("#"+IDs.themodal,{gbox:"#gbox_"+gID,jqm:p.jqModal,jqM:false,closeoverlay:closeovrl,modal:p.modal});if(!closeovrl){$(".jqmOverlay").click(function(){if(!checkUpdates()){return false;}
hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});return false;});}
if(onAfterShow){onAfterShow($("#"+frmgr));}}else{$($t.p.colModel).each(function(i){var fmto=this.formoptions;maxCols=Math.max(maxCols,fmto?fmto.colpos||0:0);maxRows=Math.max(maxRows,fmto?fmto.rowpos||0:0);});var dh=isNaN(p.dataheight)?p.dataheight:p.dataheight+"px";var flr,frm=$("<form name='FormPost' id='"+frmgr+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+dh+";'></form>").data("disabled",false),tbl=$("<table id='"+frmtb+"' class='EditTable' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");$(frm).append(tbl);flr=$("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+(maxCols*2)+"'></td></tr>");flr[0].rp=0;$(tbl).append(flr);flr=$("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+(maxCols*2)+"'>"+rp_ge.topinfo+"</td></tr>");flr[0].rp=0;$(tbl).append(flr);if(onBeforeInit){onBeforeInit($("#"+frmgr));}
var rtlb=$t.p.direction=="rtl"?true:false,bp=rtlb?"nData":"pData",bn=rtlb?"pData":"nData",valref=createData(rowid,$t,tbl,maxCols),bP="<a href='javascript:void(0)' id='"+bp+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>",bN="<a href='javascript:void(0)' id='"+bn+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>",bS="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+p.bSubmit+"</a>",bC="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+p.bCancel+"</a>";var bt="<table border='0' class='EditTable' id='"+frmtb+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content'>"+(rtlb?bN+bP:bP+bN)+"</td><td class='EditButton ui-widget-content'>"+bS+bC+"</td></tr>";bt+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+rp_ge.bottominfo+"</td></tr>";bt+="</tbody></table>";if(maxRows>0){var sd=[];$.each($(tbl)[0].rows,function(i,r){sd[i]=r;});sd.sort(function(a,b){if(a.rp>b.rp){return 1;}
if(a.rp<b.rp){return-1;}
return 0;});$.each(sd,function(index,row){$('tbody',tbl).append(row);});}
p.gbox="#gbox_"+gID;var cle=false;if(p.closeOnEscape===true){p.closeOnEscape=false;cle=true;}
var tms=$("<span></span>").append(frm).append(bt);createModal(IDs,tms,p,"#gview_"+$t.p.id,$("#gview_"+$t.p.id)[0]);if(rtlb){$("#pData, #nData","#"+frmtb+"_2").css("float","right");$(".EditButton","#"+frmtb+"_2").css("text-align","left");}
if(rp_ge.topinfo){$(".tinfo","#"+frmtb+"_2").show();}
if(rp_ge.bottominfo){$(".binfo","#"+frmtb+"_2").show();}
tms=null;bt=null;$("#"+IDs.themodal).keydown(function(e){var wkey=e.target;if($("#"+frmgr).data("disabled")===true){return false;}
if(rp_ge.savekey[0]===true&&e.which==rp_ge.savekey[1]){if(wkey.tagName!="TEXTAREA"){$("#sData","#"+frmtb+"_2").trigger("click");return false;}}
if(e.which===27){if(!checkUpdates()){return false;}
if(cle){hideModal(this,{gb:p.gbox,jqm:p.jqModal,onClose:rp_ge.onClose});}
return false;}
if(rp_ge.navkeys[0]===true){if($("#id_g","#"+frmtb).val()=="_empty"){return true;}
if(e.which==rp_ge.navkeys[1]){$("#pData","#"+frmtb+"_2").trigger("click");return false;}
if(e.which==rp_ge.navkeys[2]){$("#nData","#"+frmtb+"_2").trigger("click");return false;}}});if(p.checkOnUpdate){$("a.ui-jqdialog-titlebar-close span","#"+IDs.themodal).removeClass("jqmClose");$("a.ui-jqdialog-titlebar-close","#"+IDs.themodal).unbind("click").click(function(){if(!checkUpdates()){return false;}
hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});return false;});}
p.saveicon=$.extend([true,"left","ui-icon-disk"],p.saveicon);p.closeicon=$.extend([true,"left","ui-icon-close"],p.closeicon);if(p.saveicon[0]===true){$("#sData","#"+frmtb+"_2").addClass(p.saveicon[1]=="right"?'fm-button-icon-right':'fm-button-icon-left').append("<span class='ui-icon "+p.saveicon[2]+"'></span>");}
if(p.closeicon[0]===true){$("#cData","#"+frmtb+"_2").addClass(p.closeicon[1]=="right"?'fm-button-icon-right':'fm-button-icon-left').append("<span class='ui-icon "+p.closeicon[2]+"'></span>");}
if(rp_ge.checkOnSubmit||rp_ge.checkOnUpdate){bS="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+p.bYes+"</a>";bN="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+p.bNo+"</a>";bC="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+p.bExit+"</a>";var ii,zI=p.zIndex||999;zI++;if($.browser.msie&&$.browser.version==6){ii='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>';}else{ii="";}
$("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+zI+";display:none;'>&#160;"+ii+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(zI+1)+"'>"+p.saveData+"<br/><br/>"+bS+bN+bC+"</div>").insertAfter("#"+frmgr);$("#sNew","#"+IDs.themodal).click(function(){postIt();$("#"+frmgr).data("disabled",false);$(".confirm","#"+IDs.themodal).hide();return false;});$("#nNew","#"+IDs.themodal).click(function(){$(".confirm","#"+IDs.themodal).hide();$("#"+frmgr).data("disabled",false);setTimeout(function(){$(":input","#"+frmgr)[0].focus();},0);return false;});$("#cNew","#"+IDs.themodal).click(function(){$(".confirm","#"+IDs.themodal).hide();$("#"+frmgr).data("disabled",false);hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});return false;});}
if(onInitializeForm){onInitializeForm($("#"+frmgr));}
if(rowid=="_empty"||!rp_ge.viewPagerButtons){$("#pData,#nData","#"+frmtb+"_2").hide();}else{$("#pData,#nData","#"+frmtb+"_2").show();}
if(onBeforeShow){onBeforeShow($("#"+frmgr));}
$("#"+IDs.themodal).data("onClose",rp_ge.onClose);viewModal("#"+IDs.themodal,{gbox:"#gbox_"+gID,jqm:p.jqModal,closeoverlay:closeovrl,modal:p.modal});if(!closeovrl){$(".jqmOverlay").click(function(){if(!checkUpdates()){return false;}
hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});return false;});}
if(onAfterShow){onAfterShow($("#"+frmgr));}
$(".fm-button","#"+IDs.themodal).hover(function(){$(this).addClass('ui-state-hover');},function(){$(this).removeClass('ui-state-hover');});$("#sData","#"+frmtb+"_2").click(function(e){postdata={};extpost={};$("#FormError","#"+frmtb).hide();getFormData();if(postdata[$t.p.id+"_id"]=="_empty"){postIt();}
else if(p.checkOnSubmit===true){newData=$.extend({},postdata,extpost);diff=compareData(newData,rp_ge._savedData);if(diff){$("#"+frmgr).data("disabled",true);$(".confirm","#"+IDs.themodal).show();}else{postIt();}}else{postIt();}
return false;});$("#cData","#"+frmtb+"_2").click(function(e){if(!checkUpdates()){return false;}
hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});return false;});$("#nData","#"+frmtb+"_2").click(function(e){if(!checkUpdates()){return false;}
$("#FormError","#"+frmtb).hide();var npos=getCurrPos();npos[0]=parseInt(npos[0],10);if(npos[0]!=-1&&npos[1][npos[0]+1]){if($.isFunction(p.onclickPgButtons)){p.onclickPgButtons('next',$("#"+frmgr),npos[1][npos[0]]);}
fillData(npos[1][npos[0]+1],$t,frmgr);$($t).jqGrid("setSelection",npos[1][npos[0]+1]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons('next',$("#"+frmgr),npos[1][npos[0]+1]);}
updateNav(npos[0]+1,npos[1].length-1);}
return false;});$("#pData","#"+frmtb+"_2").click(function(e){if(!checkUpdates()){return false;}
$("#FormError","#"+frmtb).hide();var ppos=getCurrPos();if(ppos[0]!=-1&&ppos[1][ppos[0]-1]){if($.isFunction(p.onclickPgButtons)){p.onclickPgButtons('prev',$("#"+frmgr),ppos[1][ppos[0]]);}
fillData(ppos[1][ppos[0]-1],$t,frmgr);$($t).jqGrid("setSelection",ppos[1][ppos[0]-1]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons('prev',$("#"+frmgr),ppos[1][ppos[0]-1]);}
updateNav(ppos[0]-1,ppos[1].length-1);}
return false;});}
var posInit=getCurrPos();updateNav(posInit[0],posInit[1].length-1);function updateNav(cr,totr,rid){if(cr===0){$("#pData","#"+frmtb+"_2").addClass('ui-state-disabled');}else{$("#pData","#"+frmtb+"_2").removeClass('ui-state-disabled');}
if(cr==totr){$("#nData","#"+frmtb+"_2").addClass('ui-state-disabled');}else{$("#nData","#"+frmtb+"_2").removeClass('ui-state-disabled');}}
function getCurrPos(){var rowsInGrid=$($t).jqGrid("getDataIDs"),selrow=$("#id_g","#"+frmtb).val(),pos=$.inArray(selrow,rowsInGrid);return[pos,rowsInGrid];}
function checkUpdates(){var stat=true;$("#FormError","#"+frmtb).hide();if(rp_ge.checkOnUpdate){postdata={};extpost={};getFormData();newData=$.extend({},postdata,extpost);diff=compareData(newData,rp_ge._savedData);if(diff){$("#"+frmgr).data("disabled",true);$(".confirm","#"+IDs.themodal).show();stat=false;}}
return stat;}
function getFormData(){$(".FormElement","#"+frmtb).each(function(i){var celm=$(".customelement",this);if(celm.length){var elem=celm[0],nm=elem.name;$.each($t.p.colModel,function(i,n){if(this.name==nm&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{postdata[nm]=this.editoptions.custom_value($("#"+nm,"#"+frmtb),'get');if(postdata[nm]===undefined){throw"e1";}}catch(e){if(e=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose);}
else{info_dialog(jQuery.jgrid.errors.errcap,e.message,jQuery.jgrid.edit.bClose);}}
return true;}});}else{switch($(this).get(0).type){case"checkbox":if($(this).attr("checked")){postdata[this.name]=$(this).val();}else{var ofv=$(this).attr("offval");postdata[this.name]=ofv;}
break;case"select-one":postdata[this.name]=$("option:selected",this).val();extpost[this.name]=$("option:selected",this).text();break;case"select-multiple":postdata[this.name]=$(this).val();if(postdata[this.name]){postdata[this.name]=postdata[this.name].join(",");}
else{postdata[this.name]="";}
var selectedText=[];$("option:selected",this).each(function(i,selected){selectedText[i]=$(selected).text();});extpost[this.name]=selectedText.join(",");break;case"password":case"text":case"textarea":case"button":postdata[this.name]=$(this).val();break;}
if($t.p.autoencode){postdata[this.name]=$.jgrid.htmlEncode(postdata[this.name]);}}});return true;}
function createData(rowid,obj,tb,maxcols){var nm,hc,trdata,cnt=0,tmp,dc,elc,retpos=[],ind=false,tdtmpl="<td class='CaptionTD ui-widget-content'>&#160;</td><td class='DataTD ui-widget-content' style='white-space:pre'>&#160;</td>",tmpl="";for(var i=1;i<=maxcols;i++){tmpl+=tdtmpl;}
if(rowid!='_empty'){ind=$(obj).jqGrid("getInd",rowid);}
$(obj.p.colModel).each(function(i){nm=this.name;if(this.editrules&&this.editrules.edithidden===true){hc=false;}else{hc=this.hidden===true?true:false;}
dc=hc?"style='display:none'":"";if(nm!=='cb'&&nm!=='subgrid'&&this.editable===true&&nm!=='rn'){if(ind===false){tmp="";}else{if(nm==obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$("td:eq("+i+")",obj.rows[ind]).text();}else{try{tmp=$.unformat($("td:eq("+i+")",obj.rows[ind]),{rowId:rowid,colModel:this},i);}catch(_){tmp=$("td:eq("+i+")",obj.rows[ind]).html();}}}
var opt=$.extend({},this.editoptions||{},{id:nm,name:nm}),frmopt=$.extend({},{elmprefix:'',elmsuffix:'',rowabove:false,rowcontent:''},this.formoptions||{}),rp=parseInt(frmopt.rowpos,10)||cnt+1,cp=parseInt((parseInt(frmopt.colpos,10)||1)*2,10);if(rowid=="_empty"&&opt.defaultValue){tmp=$.isFunction(opt.defaultValue)?opt.defaultValue():opt.defaultValue;}
if(!this.edittype){this.edittype="text";}
if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp);}
elc=createEl(this.edittype,opt,tmp,false,$.extend({},$.jgrid.ajaxOptions,obj.p.ajaxSelectOptions||{}));if(tmp==""&&this.edittype=="checkbox"){tmp=$(elc).attr("offval");}
if(tmp==""&&this.edittype=="select"){tmp=$("option:eq(0)",elc).text();}
if(rp_ge.checkOnSubmit||rp_ge.checkOnUpdate){rp_ge._savedData[nm]=tmp;}
$(elc).addClass("FormElement");trdata=$(tb).find("tr[rowpos="+rp+"]");if(frmopt.rowabove){var newdata=$("<tr><td class='contentinfo' colspan='"+(maxcols*2)+"'>"+frmopt.rowcontent+"</td></tr>");$(tb).append(newdata);newdata[0].rp=rp;}
if(trdata.length===0){trdata=$("<tr "+dc+" rowpos='"+rp+"'></tr>").addClass("FormData").attr("id","tr_"+nm);$(trdata).append(tmpl);$(tb).append(trdata);trdata[0].rp=rp;}
$("td:eq("+(cp-2)+")",trdata[0]).html(typeof frmopt.label==='undefined'?obj.p.colNames[i]:frmopt.label);$("td:eq("+(cp-1)+")",trdata[0]).append(frmopt.elmprefix).append(elc).append(frmopt.elmsuffix);retpos[cnt]=i;cnt++;}});if(cnt>0){var idrow=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(maxcols*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+obj.p.id+"_id' value='"+rowid+"'/></td></tr>");idrow[0].rp=cnt+999;$(tb).append(idrow);if(rp_ge.checkOnSubmit||rp_ge.checkOnUpdate){rp_ge._savedData[obj.p.id+"_id"]=rowid;}}
return retpos;}
function fillData(rowid,obj,fmid){var nm,cnt=0,tmp,fld,opt,vl,vlc;if(rp_ge.checkOnSubmit||rp_ge.checkOnUpdate){rp_ge._savedData={};rp_ge._savedData[obj.p.id+"_id"]=rowid;}
var cm=obj.p.colModel;if(rowid=='_empty'){$(cm).each(function(i){nm=this.name;opt=$.extend({},this.editoptions||{});fld=$("#"+$.jgrid.jqID(nm),"#"+fmid);if(fld[0]!=null){vl="";if(opt.defaultValue){vl=$.isFunction(opt.defaultValue)?opt.defaultValue():opt.defaultValue;if(fld[0].type=='checkbox'){vlc=vl.toLowerCase();if(vlc.search(/(false|0|no|off|undefined)/i)<0&&vlc!==""){fld[0].checked=true;fld[0].defaultChecked=true;fld[0].value=vl;}else{fld.attr({checked:"",defaultChecked:""});}}else{fld.val(vl);}}else{if(fld[0].type=='checkbox'){fld[0].checked=false;fld[0].defaultChecked=false;vl=$(fld).attr("offval");}else if(fld[0].type.substr(0,6)=='select'){fld[0].selectedIndex=0;}else{fld.val(vl);}}
if(rp_ge.checkOnSubmit===true||rp_ge.checkOnUpdate){rp_ge._savedData[nm]=vl;}}});$("#id_g","#"+fmid).val(rowid);return;}
var tre=$(obj).jqGrid("getInd",rowid,true);if(!tre){return;}
$('td',tre).each(function(i){nm=cm[i].name;if(nm!=='cb'&&nm!=='subgrid'&&nm!=='rn'&&cm[i].editable===true){if(nm==obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$(this).text();}else{try{tmp=$.unformat(this,{rowId:rowid,colModel:cm[i]},i);}catch(_){tmp=$(this).html();}}
if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp);}
if(rp_ge.checkOnSubmit===true||rp_ge.checkOnUpdate){rp_ge._savedData[nm]=tmp;}
nm=$.jgrid.jqID(nm);switch(cm[i].edittype){case"password":case"text":case"button":case"image":$("#"+nm,"#"+fmid).val(tmp);break;case"textarea":if(tmp=="&nbsp;"||tmp=="&#160;"||(tmp.length==1&&tmp.charCodeAt(0)==160)){tmp='';}
$("#"+nm,"#"+fmid).val(tmp);break;case"select":var opv=tmp.split(",");opv=$.map(opv,function(n){return $.trim(n);});$("#"+nm+" option","#"+fmid).each(function(j){if(!cm[i].editoptions.multiple&&(opv[0]==$.trim($(this).text())||opv[0]==$.trim($(this).val()))){this.selected=true;}else if(cm[i].editoptions.multiple){if($.inArray($.trim($(this).text()),opv)>-1||$.inArray($.trim($(this).val()),opv)>-1){this.selected=true;}else{this.selected=false;}}else{this.selected=false;}});break;case"checkbox":tmp=tmp+"";if(cm[i].editoptions&&cm[i].editoptions.value){var cb=cm[i].editoptions.value.split(":");if(cb[0]==tmp){$("#"+nm,"#"+fmid).attr("checked",true);$("#"+nm,"#"+fmid).attr("defaultChecked",true);}else{$("#"+nm,"#"+fmid).attr("checked",false);$("#"+nm,"#"+fmid).attr("defaultChecked","");}}else{tmp=tmp.toLowerCase();if(tmp.search(/(false|0|no|off|undefined)/i)<0&&tmp!==""){$("#"+nm,"#"+fmid).attr("checked",true);$("#"+nm,"#"+fmid).attr("defaultChecked",true);}else{$("#"+nm,"#"+fmid).attr("checked",false);$("#"+nm,"#"+fmid).attr("defaultChecked","");}}
break;case'custom':try{if(cm[i].editoptions&&$.isFunction(cm[i].editoptions.custom_value)){var dummy=cm[i].editoptions.custom_value($("#"+nm,"#"+fmid),'set',tmp);}else{throw"e1";}}catch(e){if(e=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);}
else{info_dialog(jQuery.jgrid.errors.errcap,e.message,jQuery.jgrid.edit.bClose);}}
break;}
cnt++;}});if(cnt>0){$("#id_g","#"+frmtb).val(rowid);}}
function postIt(){var copydata,ret=[true,"",""],onCS={},opers=$t.p.prmNames,idname,oper;if($.isFunction(rp_ge.beforeCheckValues)){var retvals=rp_ge.beforeCheckValues(postdata,$("#"+frmgr),postdata[$t.p.id+"_id"]=="_empty"?opers.addoper:opers.editoper);if(retvals&&typeof(retvals)==='object'){postdata=retvals;}}
for(var key in postdata){if(postdata.hasOwnProperty(key)){ret=checkValues(postdata[key],key,$t);if(ret[0]===false){break;}}}
if(ret[0]){if($.isFunction(rp_ge.onclickSubmit)){onCS=rp_ge.onclickSubmit(rp_ge,postdata)||{};}
if($.isFunction(rp_ge.beforeSubmit)){ret=rp_ge.beforeSubmit(postdata,$("#"+frmgr));}}
if(ret[0]&&!rp_ge.processing){rp_ge.processing=true;$("#sData","#"+frmtb+"_2").addClass('ui-state-active');oper=opers.oper;idname=opers.id;postdata[oper]=($.trim(postdata[$t.p.id+"_id"])=="_empty")?opers.addoper:opers.editoper;if(postdata[oper]!=opers.addoper){postdata[idname]=postdata[$t.p.id+"_id"];}else{if(postdata[idname]===undefined){postdata[idname]=postdata[$t.p.id+"_id"];}}
delete postdata[$t.p.id+"_id"];postdata=$.extend(postdata,rp_ge.editData,onCS);var edit_url=(rp_ge.url?rp_ge.url:$($t).jqGrid('getGridParam','editurl'));if($t.p.restful){edit_url=$t.p.url+"/{id}";}
edit_url=(postdata.id=="_empty"?edit_url.replace("{id}",''):edit_url.replace("{id}",postdata.id));if($t.p.restful){rp_ge.mtype=postdata.id=="_empty"?"POST":"PUT";}
var ajaxOptions=$.extend({url:edit_url,type:rp_ge.mtype,data:$.isFunction(rp_ge.serializeEditData)?rp_ge.serializeEditData(postdata):postdata,complete:function(data,Status){if(Status!="success"){ret[0]=false;if($.isFunction(rp_ge.errorTextFormat)){ret[1]=rp_ge.errorTextFormat(data);}else{ret[1]=Status+" Status: '"+data.statusText+"'. Error code: "+data.status;}}else{if($.isFunction(rp_ge.afterSubmit)){ret=rp_ge.afterSubmit(data,postdata);}}
if(ret[0]===false){$("#FormError>td","#"+frmtb).html(ret[1]);$("#FormError","#"+frmtb).show();}else{$.each($t.p.colModel,function(i,n){if(extpost[this.name]&&this.formatter&&this.formatter=='select'){try{delete extpost[this.name];}catch(e){}}});postdata=$.extend(postdata,extpost);if($t.p.autoencode){$.each(postdata,function(n,v){postdata[n]=$.jgrid.htmlDecode(v);});}
if(postdata[oper]==opers.addoper){if(!ret[2]){ret[2]=parseInt($t.p.records,10)+1;}
postdata[idname]=ret[2];if(rp_ge.closeAfterAdd){if(rp_ge.reloadAfterSubmit){$($t).trigger("reloadGrid");}
else{$($t).jqGrid("addRowData",ret[2],postdata,p.addedrow);$($t).jqGrid("setSelection",ret[2]);}
hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});}else if(rp_ge.clearAfterAdd){if(rp_ge.reloadAfterSubmit){$($t).trigger("reloadGrid");}
else{$($t).jqGrid("addRowData",ret[2],postdata,p.addedrow);}
fillData("_empty",$t,frmgr);}else{if(rp_ge.reloadAfterSubmit){$($t).trigger("reloadGrid");}
else{$($t).jqGrid("addRowData",ret[2],postdata,p.addedrow);}}}else{if(rp_ge.reloadAfterSubmit){$($t).trigger("reloadGrid");if(!rp_ge.closeAfterEdit){setTimeout(function(){$($t).jqGrid("setSelection",postdata[idname]);},1000);}}else{if($t.p.treeGrid===true){$($t).jqGrid("setTreeRow",postdata[idname],postdata);}else{$($t).jqGrid("setRowData",postdata[idname],postdata);}}
if(rp_ge.closeAfterEdit){hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});}}
if($.isFunction(rp_ge.afterComplete)){copydata=data;setTimeout(function(){rp_ge.afterComplete(copydata,postdata,$("#"+frmgr));copydata=null;},500);}}
rp_ge.processing=false;if(rp_ge.checkOnSubmit||rp_ge.checkOnUpdate){$("#"+frmgr).data("disabled",false);if(rp_ge._savedData[$t.p.id+"_id"]!="_empty"){for(var key in rp_ge._savedData){if(postdata[key]){rp_ge._savedData[key]=postdata[key];}}}}
$("#sData","#"+frmtb+"_2").removeClass('ui-state-active');try{$(':input:visible',"#"+frmgr)[0].focus();}catch(e){}},error:function(xhr,st,err){$("#FormError>td","#"+frmtb).html(st+" : "+err);$("#FormError","#"+frmtb).show();rp_ge.processing=false;$("#"+frmgr).data("disabled",false);$("#sData","#"+frmtb+"_2").removeClass('ui-state-active');}},$.jgrid.ajaxOptions,rp_ge.ajaxEditOptions)
if(!ajaxOptions['url']&&!rp_ge['useDataProxy']){if($.isFunction($t.p.dataProxy)){rp_ge['useDataProxy']=true;}else{ret[0]=false;ret[1]+=" "+$.jgrid.errors.nourl;}}
if(ret[0]){if(rp_ge['useDataProxy']){$t.p.dataProxy.call($t,ajaxOptions,"set_"+$t.p.id)}
else{$.ajax(ajaxOptions)}}}
if(ret[0]===false){$("#FormError>td","#"+frmtb).html(ret[1]);$("#FormError","#"+frmtb).show();}}
function compareData(nObj,oObj){var ret=false,key;for(key in nObj){if(nObj[key]!=oObj[key]){ret=true;break;}}
return ret;}});},viewGridRow:function(rowid,p){p=$.extend({top:0,left:0,width:0,height:'auto',dataheight:'auto',modal:false,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:'30%',closeicon:[],navkeys:[false,38,40],onClose:null,beforeShowForm:null,viewPagerButtons:true},$.jgrid.view,p||{});return this.each(function(){var $t=this;if(!$t.grid||!rowid){return;}
if(!p.imgpath){p.imgpath=$t.p.imgpath;}
var gID=$t.p.id,frmgr="ViewGrid_"+gID,frmtb="ViewTbl_"+gID,IDs={themodal:'viewmod'+gID,modalhead:'viewhd'+gID,modalcontent:'viewcnt'+gID,scrollelm:frmgr},maxCols=1,maxRows=0;if($("#"+IDs.themodal).html()!=null){$(".ui-jqdialog-title","#"+IDs.modalhead).html(p.caption);$("#FormError","#"+frmtb).hide();fillData(rowid,$t);if($.isFunction(p.beforeShowForm)){p.beforeShowForm($("#"+frmgr));}
viewModal("#"+IDs.themodal,{gbox:"#gbox_"+gID,jqm:p.jqModal,jqM:false,modal:p.modal});focusaref();}else{$($t.p.colModel).each(function(i){var fmto=this.formoptions;maxCols=Math.max(maxCols,fmto?fmto.colpos||0:0);maxRows=Math.max(maxRows,fmto?fmto.rowpos||0:0);});var dh=isNaN(p.dataheight)?p.dataheight:p.dataheight+"px";var flr,frm=$("<form name='FormPost' id='"+frmgr+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+dh+";'></form>"),tbl=$("<table id='"+frmtb+"' class='EditTable' cellspacing='1' cellpading='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");$(frm).append(tbl);var valref=createData(rowid,$t,tbl,maxCols),rtlb=$t.p.direction=="rtl"?true:false,bp=rtlb?"nData":"pData",bn=rtlb?"pData":"nData",bP="<a href='javascript:void(0)' id='"+bp+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>",bN="<a href='javascript:void(0)' id='"+bn+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>",bC="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+p.bClose+"</a>";if(maxRows>0){var sd=[];$.each($(tbl)[0].rows,function(i,r){sd[i]=r;});sd.sort(function(a,b){if(a.rp>b.rp){return 1;}
if(a.rp<b.rp){return-1;}
return 0;});$.each(sd,function(index,row){$('tbody',tbl).append(row);});}
p.gbox="#gbox_"+gID;var cle=false;if(p.closeOnEscape===true){p.closeOnEscape=false;cle=true;}
var bt=$("<span></span>").append(frm).append("<table border='0' class='EditTable' id='"+frmtb+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content' width='"+p.labelswidth+"'>"+(rtlb?bN+bP:bP+bN)+"</td><td class='EditButton ui-widget-content'>"+bC+"</td></tr></tbody></table>");createModal(IDs,bt,p,"#gview_"+$t.p.id,$("#gview_"+$t.p.id)[0]);if(rtlb){$("#pData, #nData","#"+frmtb+"_2").css("float","right");$(".EditButton","#"+frmtb+"_2").css("text-align","left");}
if(!p.viewPagerButtons){$("#pData, #nData","#"+frmtb+"_2").hide();}
bt=null;$("#"+IDs.themodal).keydown(function(e){if(e.which===27){if(cle){hideModal(this,{gb:p.gbox,jqm:p.jqModal,onClose:p.onClose});}
return false;}
if(p.navkeys[0]===true){if(e.which===p.navkeys[1]){$("#pData","#"+frmtb+"_2").trigger("click");return false;}
if(e.which===p.navkeys[2]){$("#nData","#"+frmtb+"_2").trigger("click");return false;}}});p.closeicon=$.extend([true,"left","ui-icon-close"],p.closeicon);if(p.closeicon[0]===true){$("#cData","#"+frmtb+"_2").addClass(p.closeicon[1]=="right"?'fm-button-icon-right':'fm-button-icon-left').append("<span class='ui-icon "+p.closeicon[2]+"'></span>");}
if($.isFunction(p.beforeShowForm)){p.beforeShowForm($("#"+frmgr));}
viewModal("#"+IDs.themodal,{gbox:"#gbox_"+gID,jqm:p.jqModal,modal:p.modal});$(".fm-button:not(.ui-state-disabled)","#"+frmtb+"_2").hover(function(){$(this).addClass('ui-state-hover');},function(){$(this).removeClass('ui-state-hover');});focusaref();$("#cData","#"+frmtb+"_2").click(function(e){hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:p.onClose});return false;});$("#nData","#"+frmtb+"_2").click(function(e){$("#FormError","#"+frmtb).hide();var npos=getCurrPos();npos[0]=parseInt(npos[0],10);if(npos[0]!=-1&&npos[1][npos[0]+1]){if($.isFunction(p.onclickPgButtons)){p.onclickPgButtons('next',$("#"+frmgr),npos[1][npos[0]]);}
fillData(npos[1][npos[0]+1],$t);$($t).jqGrid("setSelection",npos[1][npos[0]+1]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons('next',$("#"+frmgr),npos[1][npos[0]+1]);}
updateNav(npos[0]+1,npos[1].length-1);}
focusaref();return false;});$("#pData","#"+frmtb+"_2").click(function(e){$("#FormError","#"+frmtb).hide();var ppos=getCurrPos();if(ppos[0]!=-1&&ppos[1][ppos[0]-1]){if($.isFunction(p.onclickPgButtons)){p.onclickPgButtons('prev',$("#"+frmgr),ppos[1][ppos[0]]);}
fillData(ppos[1][ppos[0]-1],$t);$($t).jqGrid("setSelection",ppos[1][ppos[0]-1]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons('prev',$("#"+frmgr),ppos[1][ppos[0]-1]);}
updateNav(ppos[0]-1,ppos[1].length-1);}
focusaref();return false;});}
function focusaref(){if(p.closeOnEscape===true||p.navkeys[0]===true){setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+IDs.modalhead).focus();},0);}}
var posInit=getCurrPos();updateNav(posInit[0],posInit[1].length-1);function updateNav(cr,totr,rid){if(cr===0){$("#pData","#"+frmtb+"_2").addClass('ui-state-disabled');}else{$("#pData","#"+frmtb+"_2").removeClass('ui-state-disabled');}
if(cr==totr){$("#nData","#"+frmtb+"_2").addClass('ui-state-disabled');}else{$("#nData","#"+frmtb+"_2").removeClass('ui-state-disabled');}}
function getCurrPos(){var rowsInGrid=$($t).jqGrid("getDataIDs"),selrow=$("#id_g","#"+frmtb).val(),pos=$.inArray(selrow,rowsInGrid);return[pos,rowsInGrid];}
function createData(rowid,obj,tb,maxcols){var nm,hc,trdata,tdl,tde,cnt=0,tmp,dc,retpos=[],ind=false,tdtmpl="<td class='CaptionTD form-view-label ui-widget-content' width='"+p.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",tmpl="",tdtmpl2="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",fmtnum=['integer','number','currency'],max1=0,max2=0,maxw,setme,viewfld;for(var i=1;i<=maxcols;i++){tmpl+=i==1?tdtmpl:tdtmpl2;}
$(obj.p.colModel).each(function(i){if(this.editrules&&this.editrules.edithidden===true){hc=false;}else{hc=this.hidden===true?true:false;}
if(!hc&&this.align==='right'){if(this.formatter&&$.inArray(this.formatter,fmtnum)!==-1){max1=Math.max(max1,parseInt(this.width,10));}else{max2=Math.max(max2,parseInt(this.width,10));}}});maxw=max1!==0?max1:max2!==0?max2:0;ind=$(obj).jqGrid("getInd",rowid);$(obj.p.colModel).each(function(i){nm=this.name;setme=false;if(this.editrules&&this.editrules.edithidden===true){hc=false;}else{hc=this.hidden===true?true:false;}
dc=hc?"style='display:none'":"";viewfld=(typeof this.viewable!='boolean')?true:this.viewable;if(nm!=='cb'&&nm!=='subgrid'&&nm!=='rn'&&viewfld){if(ind===false){tmp="";}else{if(nm==obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$("td:eq("+i+")",obj.rows[ind]).text();}else{tmp=$("td:eq("+i+")",obj.rows[ind]).html();}}
setme=this.align==='right'&&maxw!==0?true:false;var opt=$.extend({},this.editoptions||{},{id:nm,name:nm}),frmopt=$.extend({},{rowabove:false,rowcontent:''},this.formoptions||{}),rp=parseInt(frmopt.rowpos,10)||cnt+1,cp=parseInt((parseInt(frmopt.colpos,10)||1)*2,10);if(frmopt.rowabove){var newdata=$("<tr><td class='contentinfo' colspan='"+(maxcols*2)+"'>"+frmopt.rowcontent+"</td></tr>");$(tb).append(newdata);newdata[0].rp=rp;}
trdata=$(tb).find("tr[rowpos="+rp+"]");if(trdata.length===0){trdata=$("<tr "+dc+" rowpos='"+rp+"'></tr>").addClass("FormData").attr("id","trv_"+nm);$(trdata).append(tmpl);$(tb).append(trdata);trdata[0].rp=rp;}
$("td:eq("+(cp-2)+")",trdata[0]).html('<b>'+(typeof frmopt.label==='undefined'?obj.p.colNames[i]:frmopt.label)+'</b>');$("td:eq("+(cp-1)+")",trdata[0]).append("<span>"+tmp+"</span>").attr("id","v_"+nm);if(setme){$("td:eq("+(cp-1)+") span",trdata[0]).css({'text-align':'right',width:maxw+"px"});}
retpos[cnt]=i;cnt++;}});if(cnt>0){var idrow=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(maxcols*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+rowid+"'/></td></tr>");idrow[0].rp=cnt+99;$(tb).append(idrow);}
return retpos;}
function fillData(rowid,obj){var nm,hc,cnt=0,tmp,opt,trv;trv=$(obj).jqGrid("getInd",rowid,true);if(!trv){return;}
$('td',trv).each(function(i){nm=obj.p.colModel[i].name;if(obj.p.colModel[i].editrules&&obj.p.colModel[i].editrules.edithidden===true){hc=false;}else{hc=obj.p.colModel[i].hidden===true?true:false;}
if(nm!=='cb'&&nm!=='subgrid'&&nm!=='rn'){if(nm==obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$(this).text();}else{tmp=$(this).html();}
opt=$.extend({},obj.p.colModel[i].editoptions||{});nm=$.jgrid.jqID("v_"+nm);$("#"+nm+" span","#"+frmtb).html(tmp);if(hc){$("#"+nm,"#"+frmtb).parents("tr:first").hide();}
cnt++;}});if(cnt>0){$("#id_g","#"+frmtb).val(rowid);}}});},delGridRow:function(rowids,p){p=$.extend({top:0,left:0,width:240,height:'auto',dataheight:'auto',modal:false,drag:true,resize:true,url:'',mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},$.jgrid.del,p||{});rp_ge=p;return this.each(function(){var $t=this;if(!$t.grid){return;}
if(!rowids){return;}
var onBeforeShow=typeof p.beforeShowForm==='function'?true:false,onAfterShow=typeof p.afterShowForm==='function'?true:false,gID=$t.p.id,onCS={},dtbl="DelTbl_"+gID,postd,idname,opers,oper,IDs={themodal:'delmod'+gID,modalhead:'delhd'+gID,modalcontent:'delcnt'+gID,scrollelm:dtbl};if(jQuery.isArray(rowids)){rowids=rowids.join();}
if($("#"+IDs.themodal).html()!=null){$("#DelData>td","#"+dtbl).text(rowids);$("#DelError","#"+dtbl).hide();if(rp_ge.processing===true){rp_ge.processing=false;$("#dData","#"+dtbl).removeClass('ui-state-active');}
if(onBeforeShow){p.beforeShowForm($("#"+dtbl));}
viewModal("#"+IDs.themodal,{gbox:"#gbox_"+gID,jqm:p.jqModal,jqM:false,modal:p.modal});if(onAfterShow){p.afterShowForm($("#"+dtbl));}}else{var dh=isNaN(p.dataheight)?p.dataheight:p.dataheight+"px";var tbl="<div id='"+dtbl+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+dh+";'>";tbl+="<table class='DelTable'><tbody>";tbl+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>";tbl+="<tr id='DelData' style='display:none'><td >"+rowids+"</td></tr>";tbl+="<tr><td class=\"delmsg\" style=\"white-space:pre;\">"+p.msg+"</td></tr><tr><td >&#160;</td></tr>";tbl+="</tbody></table></div>";var bS="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+p.bSubmit+"</a>",bC="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+p.bCancel+"</a>";tbl+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+dtbl+"_2'><tbody><tr><td class='DataTD ui-widget-content'></td></tr><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DelButton EditButton'>"+bS+"&#160;"+bC+"</td></tr></tbody></table>";p.gbox="#gbox_"+gID;createModal(IDs,tbl,p,"#gview_"+$t.p.id,$("#gview_"+$t.p.id)[0]);$(".fm-button","#"+dtbl+"_2").hover(function(){$(this).addClass('ui-state-hover');},function(){$(this).removeClass('ui-state-hover');});p.delicon=$.extend([true,"left","ui-icon-scissors"],p.delicon);p.cancelicon=$.extend([true,"left","ui-icon-cancel"],p.cancelicon);if(p.delicon[0]===true){$("#dData","#"+dtbl+"_2").addClass(p.delicon[1]=="right"?'fm-button-icon-right':'fm-button-icon-left').append("<span class='ui-icon "+p.delicon[2]+"'></span>");}
if(p.cancelicon[0]===true){$("#eData","#"+dtbl+"_2").addClass(p.cancelicon[1]=="right"?'fm-button-icon-right':'fm-button-icon-left').append("<span class='ui-icon "+p.cancelicon[2]+"'></span>");}
$("#dData","#"+dtbl+"_2").click(function(e){var ret=[true,""];onCS={};var postdata=$("#DelData>td","#"+dtbl).text();if(typeof p.onclickSubmit==='function'){onCS=p.onclickSubmit(rp_ge,postdata)||{};}
if(typeof p.beforeSubmit==='function'){ret=p.beforeSubmit(postdata);}
if(ret[0]&&!rp_ge.processing){rp_ge.processing=true;$(this).addClass('ui-state-active');opers=$t.p.prmNames;postd=$.extend({},rp_ge.delData,onCS);oper=opers.oper;postd[oper]=opers.deloper;idname=opers.id;postd[idname]=postdata;var gurl=rp_ge.url?rp_ge.url:$($t).jqGrid('getGridParam','editurl');if($t.p.restful){gurl=$t.p.url+"/{id}";}
gurl=gurl.replace("{id}",postdata);if($t.p.restful){p.mtype="DELETE";}
var ajaxOptions=$.extend({url:gurl,type:p.mtype,data:$.isFunction(p.serializeDelData)?p.serializeDelData(postd):postd,complete:function(data,Status){if(Status!="success"){ret[0]=false;if($.isFunction(rp_ge.errorTextFormat)){ret[1]=rp_ge.errorTextFormat(data);}else{ret[1]=Status+" Status: '"+data.statusText+"'. Error code: "+data.status;}}else{if(typeof rp_ge.afterSubmit==='function'){ret=rp_ge.afterSubmit(data,postd);}}
if(ret[0]===false){$("#DelError>td","#"+dtbl).html(ret[1]);$("#DelError","#"+dtbl).show();}else{if(rp_ge.reloadAfterSubmit){$($t).trigger("reloadGrid");}else{var toarr=[];toarr=postdata.split(",");if($t.p.treeGrid===true){try{$($t).jqGrid("delTreeNode",toarr[0]);}catch(e){}}else{for(var i=0;i<toarr.length;i++){$($t).jqGrid("delRowData",toarr[i]);}}
$t.p.selrow=null;$t.p.selarrrow=[];}
if($.isFunction(rp_ge.afterComplete)){setTimeout(function(){rp_ge.afterComplete(data,postdata);},500);}}
rp_ge.processing=false;$("#dData","#"+dtbl+"_2").removeClass('ui-state-active');if(ret[0]){hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});}},error:function(xhr,st,err){$("#DelError>td","#"+dtbl).html(st+" : "+err);$("#DelError","#"+dtbl).show();rp_ge.processing=false;$("#dData","#"+dtbl+"_2").removeClass('ui-state-active');}},$.jgrid.ajaxOptions,p.ajaxDelOptions);if(!ajaxOptions['url']&&!rp_ge['useDataProxy']){if($.isFunction($t.p.dataProxy)){rp_ge['useDataProxy']=true;}else{ret[0]=false;ret[1]+=" "+$.jgrid.errors.nourl;}}
if(ret[0]){if(rp_ge['useDataProxy']){$t.p.dataProxy.call($t,ajaxOptions,"del_"+$t.p.id)}
else{$.ajax(ajaxOptions)}}}
if(ret[0]===false){$("#DelError>td","#"+dtbl).html(ret[1]);$("#DelError","#"+dtbl).show();}
return false;});$("#eData","#"+dtbl+"_2").click(function(e){hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:rp_ge.onClose});return false;});if(onBeforeShow){p.beforeShowForm($("#"+dtbl));}
viewModal("#"+IDs.themodal,{gbox:"#gbox_"+gID,jqm:p.jqModal,modal:p.modal});if(onAfterShow){p.afterShowForm($("#"+dtbl));}}
if(p.closeOnEscape===true){setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+IDs.modalhead).focus();},0);}});},navGrid:function(elem,o,pEdit,pAdd,pDel,pSearch,pView){o=$.extend({edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:'firstpage',view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false},$.jgrid.nav,o||{});return this.each(function(){var alertIDs={themodal:'alertmod',modalhead:'alerthd',modalcontent:'alertcnt'},$t=this,vwidth,vheight,twd,tdw;if(!$t.grid||typeof elem!='string'){return;}
if($("#"+alertIDs.themodal).html()===null){if(typeof window.innerWidth!='undefined'){vwidth=window.innerWidth;vheight=window.innerHeight;}else if(typeof document.documentElement!='undefined'&&typeof document.documentElement.clientWidth!='undefined'&&document.documentElement.clientWidth!==0){vwidth=document.documentElement.clientWidth;vheight=document.documentElement.clientHeight;}else{vwidth=1024;vheight=768;}
createModal(alertIDs,"<div>"+o.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$t.p.id,jqModal:true,drag:true,resize:true,caption:o.alertcap,top:vheight/2-25,left:vwidth/2-100,width:200,height:'auto',closeOnEscape:o.closeOnEscape},"","",true);}
var clone=1;if(o.cloneToTop&&$t.p.toppager){clone=2;}
for(var i=0;i<clone;i++){var tbd,navtbl=$("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),sep="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",pgid,elemids;if(i===0){pgid=elem;elemids=$t.p.id;if(pgid==$t.p.toppager){elemids+="_top";clone=1;}}else{pgid=$t.p.toppager;elemids=$t.p.id+"_top";}
if($t.p.direction=="rtl"){$(navtbl).attr("dir","rtl").css("float","right");}
if(o.add){pAdd=pAdd||{};tbd=$("<td class='ui-pg-button ui-corner-all'></td>");$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.addicon+"'></span>"+o.addtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({"title":o.addtitle||"",id:pAdd.id||"add_"+elemids}).click(function(){if(!$(this).hasClass('ui-state-disabled')){if(typeof o.addfunc=='function'){o.addfunc();}else{$($t).jqGrid("editGridRow","new",pAdd);}}
return false;}).hover(function(){if(!$(this).hasClass('ui-state-disabled')){$(this).addClass("ui-state-hover");}},function(){$(this).removeClass("ui-state-hover");});tbd=null;}
if(o.edit){tbd=$("<td class='ui-pg-button ui-corner-all'></td>");pEdit=pEdit||{};$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.editicon+"'></span>"+o.edittext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({"title":o.edittitle||"",id:pEdit.id||"edit_"+elemids}).click(function(){if(!$(this).hasClass('ui-state-disabled')){var sr=$t.p.selrow;if(sr){if(typeof o.editfunc=='function'){o.editfunc(sr);}else{$($t).jqGrid("editGridRow",sr,pEdit);}}else{viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$t.p.id,jqm:true});$("#jqg_alrt").focus();}}
return false;}).hover(function(){if(!$(this).hasClass('ui-state-disabled')){$(this).addClass("ui-state-hover");}},function(){$(this).removeClass("ui-state-hover");});tbd=null;}
if(o.view){tbd=$("<td class='ui-pg-button ui-corner-all'></td>");pView=pView||{};$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.viewicon+"'></span>"+o.viewtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({"title":o.viewtitle||"",id:pView.id||"view_"+elemids}).click(function(){if(!$(this).hasClass('ui-state-disabled')){var sr=$t.p.selrow;if(sr){$($t).jqGrid("viewGridRow",sr,pView);}else{viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$t.p.id,jqm:true});$("#jqg_alrt").focus();}}
return false;}).hover(function(){if(!$(this).hasClass('ui-state-disabled')){$(this).addClass("ui-state-hover");}},function(){$(this).removeClass("ui-state-hover");});tbd=null;}
if(o.del){tbd=$("<td class='ui-pg-button ui-corner-all'></td>");pDel=pDel||{};$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.delicon+"'></span>"+o.deltext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({"title":o.deltitle||"",id:pDel.id||"del_"+elemids}).click(function(){if(!$(this).hasClass('ui-state-disabled')){var dr;if($t.p.multiselect){dr=$t.p.selarrrow;if(dr.length===0){dr=null;}}else{dr=$t.p.selrow;}
if(dr){if("function"==typeof o.delfunc){o.delfunc(dr);}else{$($t).jqGrid("delGridRow",dr,pDel);}}else{viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$t.p.id,jqm:true});$("#jqg_alrt").focus();}}
return false;}).hover(function(){if(!$(this).hasClass('ui-state-disabled')){$(this).addClass("ui-state-hover");}},function(){$(this).removeClass("ui-state-hover");});tbd=null;}
if(o.add||o.edit||o.del||o.view){$("tr",navtbl).append(sep);}
if(o.search){tbd=$("<td class='ui-pg-button ui-corner-all'></td>");pSearch=pSearch||{};$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.searchicon+"'></span>"+o.searchtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({"title":o.searchtitle||"",id:pSearch.id||"search_"+elemids}).click(function(){if(!$(this).hasClass('ui-state-disabled')){$($t).jqGrid("searchGrid",pSearch);}
return false;}).hover(function(){if(!$(this).hasClass('ui-state-disabled')){$(this).addClass("ui-state-hover");}},function(){$(this).removeClass("ui-state-hover");});tbd=null;}
if(o.refresh){tbd=$("<td class='ui-pg-button ui-corner-all'></td>");$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.refreshicon+"'></span>"+o.refreshtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({"title":o.refreshtitle||"",id:"refresh_"+elemids}).click(function(){if(!$(this).hasClass('ui-state-disabled')){if($.isFunction(o.beforeRefresh)){o.beforeRefresh();}
$t.p.search=false;try{var gID=$t.p.id;$("#fbox_"+gID).searchFilter().reset();if($.isFunction($t.clearToolbar)){$t.clearToolbar(false);}}catch(e){}
switch(o.refreshstate){case'firstpage':$($t).trigger("reloadGrid",[{page:1}]);break;case'current':$($t).trigger("reloadGrid",[{current:true}]);break;}
if($.isFunction(o.afterRefresh)){o.afterRefresh();}}
return false;}).hover(function(){if(!$(this).hasClass('ui-state-disabled')){$(this).addClass("ui-state-hover");}},function(){$(this).removeClass("ui-state-hover");});tbd=null;}
tdw=$(".ui-jqgrid").css("font-size")||"11px";$('body').append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+tdw+";visibility:hidden;' ></div>");twd=$(navtbl).clone().appendTo("#testpg2").width();$("#testpg2").remove();$(pgid+"_"+o.position,pgid).append(navtbl);if($t.p._nvtd){if(twd>$t.p._nvtd[0]){$(pgid+"_"+o.position,pgid).width(twd);$t.p._nvtd[0]=twd;}
$t.p._nvtd[1]=twd;}
tdw=null;twd=null;navtbl=null;}});},navButtonAdd:function(elem,p){p=$.extend({caption:"newButton",title:'',buttonicon:'ui-icon-newwin',onClickButton:null,position:"last",cursor:'pointer'},p||{});return this.each(function(){if(!this.grid){return;}
if(elem.indexOf("#")!==0){elem="#"+elem;}
var findnav=$(".navtable",elem)[0],$t=this;if(findnav){var tbd=$("<td></td>");if(p.buttonicon.toString().toUpperCase()=="NONE"){$(tbd).addClass('ui-pg-button ui-corner-all').append("<div class='ui-pg-div'>"+p.caption+"</div>");}else{$(tbd).addClass('ui-pg-button ui-corner-all').append("<div class='ui-pg-div'><span class='ui-icon "+p.buttonicon+"'></span>"+p.caption+"</div>");}
if(p.id){$(tbd).attr("id",p.id);}
if(p.position=='first'){if(findnav.rows[0].cells.length===0){$("tr",findnav).append(tbd);}else{$("tr td:eq(0)",findnav).before(tbd);}}else{$("tr",findnav).append(tbd);}
$(tbd,findnav).attr("title",p.title||"").click(function(e){if(!$(this).hasClass('ui-state-disabled')){if($.isFunction(p.onClickButton)){p.onClickButton.call($t,e);}}
return false;}).hover(function(){if(!$(this).hasClass('ui-state-disabled')){$(this).addClass('ui-state-hover');}},function(){$(this).removeClass("ui-state-hover");});}});},navSeparatorAdd:function(elem,p){p=$.extend({sepclass:"ui-separator",sepcontent:''},p||{});return this.each(function(){if(!this.grid){return;}
if(elem.indexOf("#")!==0){elem="#"+elem;}
var findnav=$(".navtable",elem)[0];if(findnav){var sep="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+p.sepclass+"'></span>"+p.sepcontent+"</td>";$("tr",findnav).append(sep);}});},GridToForm:function(rowid,formid){return this.each(function(){var $t=this;if(!$t.grid){return;}
var rowdata=$($t).jqGrid("getRowData",rowid);if(rowdata){for(var i in rowdata){if($("[name="+i+"]",formid).is("input:radio")||$("[name="+i+"]",formid).is("input:checkbox")){$("[name="+i+"]",formid).each(function(){if($(this).val()==rowdata[i]){$(this).attr("checked","checked");}else{$(this).attr("checked","");}});}else{$("[name="+i+"]",formid).val(rowdata[i]);}}}});},FormToGrid:function(rowid,formid,mode,position){return this.each(function(){var $t=this;if(!$t.grid){return;}
if(!mode){mode='set';}
if(!position){position='first';}
var fields=$(formid).serializeArray();var griddata={};$.each(fields,function(i,field){griddata[field.name]=field.value;});if(mode=='add'){$($t).jqGrid("addRowData",rowid,griddata,position);}
else if(mode=='set'){$($t).jqGrid("setRowData",rowid,griddata);}});}});})(jQuery);;(function($){$.jgrid.extend({editRow:function(rowid,keys,oneditfunc,succesfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc){return this.each(function(){var $t=this,nm,tmp,editable,cnt=0,focus=null,svr={},ind,cm;if(!$t.grid){return;}
ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return;}
editable=$(ind).attr("editable")||"0";if(editable=="0"&&!$(ind).hasClass("not-editable-row")){cm=$t.p.colModel;$('td',ind).each(function(i){nm=cm[i].name;var treeg=$t.p.treeGrid===true&&nm==$t.p.ExpandColumn;if(treeg){tmp=$("span:first",this).html();}
else{try{tmp=$.unformat(this,{rowId:rowid,colModel:cm[i]},i);}catch(_){tmp=$(this).html();}}
if(nm!='cb'&&nm!='subgrid'&&nm!='rn'){if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp);}
svr[nm]=tmp;if(cm[i].editable===true){if(focus===null){focus=i;}
if(treeg){$("span:first",this).html("");}
else{$(this).html("");}
var opt=$.extend({},cm[i].editoptions||{},{id:rowid+"_"+nm,name:nm});if(!cm[i].edittype){cm[i].edittype="text";}
var elc=createEl(cm[i].edittype,opt,tmp,true,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));$(elc).addClass("editable");if(treeg){$("span:first",this).append(elc);}
else{$(this).append(elc);}
if(cm[i].edittype=="select"&&cm[i].editoptions.multiple===true&&$.browser.msie){$(elc).width($(elc).width());}
cnt++;}}});if(cnt>0){svr.id=rowid;$t.p.savedRow.push(svr);$(ind).attr("editable","1");$("td:eq("+focus+") input",ind).focus();if(keys===true){$(ind).bind("keydown",function(e){if(e.keyCode===27){$($t).jqGrid("restoreRow",rowid,afterrestorefunc);}
if(e.keyCode===13){var ta=e.target;if(ta.tagName=='TEXTAREA'){return true;}
$($t).jqGrid("saveRow",rowid,succesfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc);return false;}
e.stopPropagation();});}
if($.isFunction(oneditfunc)){oneditfunc(rowid);}}}});},saveRow:function(rowid,succesfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc){return this.each(function(){var $t=this,nm,tmp={},tmp2={},editable,fr,cv,ind;if(!$t.grid){return;}
ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return;}
editable=$(ind).attr("editable");url=url?url:$t.p.editurl;if(editable==="1"){var cm;$("td",ind).each(function(i){cm=$t.p.colModel[i];nm=cm.name;if(nm!='cb'&&nm!='subgrid'&&cm.editable===true&&nm!='rn'){switch(cm.edittype){case"checkbox":var cbv=["Yes","No"];if(cm.editoptions){cbv=cm.editoptions.value.split(":");}
tmp[nm]=$("input",this).attr("checked")?cbv[0]:cbv[1];break;case'text':case'password':case'textarea':case"button":tmp[nm]=$("input, textarea",this).val();break;case'select':if(!cm.editoptions.multiple){tmp[nm]=$("select>option:selected",this).val();tmp2[nm]=$("select>option:selected",this).text();}else{var sel=$("select",this),selectedText=[];tmp[nm]=$(sel).val();if(tmp[nm]){tmp[nm]=tmp[nm].join(",");}else{tmp[nm]="";}
$("select > option:selected",this).each(function(i,selected){selectedText[i]=$(selected).text();});tmp2[nm]=selectedText.join(",");}
if(cm.formatter&&cm.formatter=='select'){tmp2={};}
break;case'custom':try{if(cm.editoptions&&$.isFunction(cm.editoptions.custom_value)){tmp[nm]=cm.editoptions.custom_value($(".customelement",this),'get');if(tmp[nm]===undefined){throw"e2";}}else{throw"e1";}}catch(e){if(e=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);}
if(e=="e2"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose);}
else{info_dialog(jQuery.jgrid.errors.errcap,e.message,jQuery.jgrid.edit.bClose);}}
break;}
cv=checkValues(tmp[nm],i,$t);if(cv[0]===false){cv[1]=tmp[nm]+" "+cv[1];return false;}
if($t.p.autoencode){tmp[nm]=$.jgrid.htmlEncode(tmp[nm]);}}});if(cv[0]===false){try{var positions=findPos($("#"+rowid)[0]);info_dialog($.jgrid.errors.errcap,cv[1],$.jgrid.edit.bClose,{left:positions[0],top:positions[1]});}catch(e){alert(cv[1]);}
return;}
if(tmp){var idname,opers,oper;opers=$t.p.prmNames;oper=opers.oper;idname=opers.id;tmp[oper]=opers.editoper;tmp[idname]=rowid;if(typeof($t.p.inlineData)=='undefined'){$t.p.inlineData={};}
if(typeof(extraparam)=='undefined'){extraparam={};}
tmp=$.extend({},tmp,$t.p.inlineData,extraparam);}
if(url=='clientArray'){tmp=$.extend({},tmp,tmp2);if($t.p.autoencode){$.each(tmp,function(n,v){tmp[n]=$.jgrid.htmlDecode(v);});}
var resp=$($t).jqGrid("setRowData",rowid,tmp);$(ind).attr("editable","0");for(var k=0;k<$t.p.savedRow.length;k++){if($t.p.savedRow[k].id==rowid){fr=k;break;}}
if(fr>=0){$t.p.savedRow.splice(fr,1);}
if($.isFunction(aftersavefunc)){aftersavefunc(rowid,resp);}}else{$("#lui_"+$t.p.id).show();$.ajax($.extend({url:url,data:$.isFunction($t.p.serializeRowData)?$t.p.serializeRowData(tmp):tmp,type:"POST",complete:function(res,stat){$("#lui_"+$t.p.id).hide();if(stat==="success"){var ret;if($.isFunction(succesfunc)){ret=succesfunc(res);}
else{ret=true;}
if(ret===true){if($t.p.autoencode){$.each(tmp,function(n,v){tmp[n]=$.jgrid.htmlDecode(v);});}
tmp=$.extend({},tmp,tmp2);$($t).jqGrid("setRowData",rowid,tmp);$(ind).attr("editable","0");for(var k=0;k<$t.p.savedRow.length;k++){if($t.p.savedRow[k].id==rowid){fr=k;break;}}
if(fr>=0){$t.p.savedRow.splice(fr,1);}
if($.isFunction(aftersavefunc)){aftersavefunc(rowid,res);}}else{$($t).jqGrid("restoreRow",rowid,afterrestorefunc);}}},error:function(res,stat){$("#lui_"+$t.p.id).hide();if($.isFunction(errorfunc)){errorfunc(rowid,res,stat);}else{alert("Error Row: "+rowid+" Result: "+res.status+":"+res.statusText+" Status: "+stat);}}},$.jgrid.ajaxOptions,$t.p.ajaxRowOptions||{}));}
$(ind).unbind("keydown");}});},restoreRow:function(rowid,afterrestorefunc){return this.each(function(){var $t=this,fr,ind,ares={};if(!$t.grid){return;}
ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return;}
for(var k=0;k<$t.p.savedRow.length;k++){if($t.p.savedRow[k].id==rowid){fr=k;break;}}
if(fr>=0){if($.isFunction($.fn.datepicker)){try{$("input.hasDatepicker","#"+ind.id).datepicker('hide');}catch(e){}}
$.each($t.p.colModel,function(i,n){if(this.editable===true&&this.name in $t.p.savedRow[fr]){ares[this.name]=$t.p.savedRow[fr][this.name];}});$($t).jqGrid("setRowData",rowid,ares);$(ind).attr("editable","0").unbind("keydown");$t.p.savedRow.splice(fr,1);}
if($.isFunction(afterrestorefunc))
{afterrestorefunc(rowid);}});}});})(jQuery);;(function($){$.jgrid.extend({editCell:function(iRow,iCol,ed){return this.each(function(){var $t=this,nm,tmp,cc;if(!$t.grid||$t.p.cellEdit!==true){return;}
iCol=parseInt(iCol,10);$t.p.selrow=$t.rows[iRow].id;if(!$t.p.knv){$($t).jqGrid("GridNav");}
if($t.p.savedRow.length>0){if(ed===true){if(iRow==$t.p.iRow&&iCol==$t.p.iCol){return;}}
$($t).jqGrid("saveCell",$t.p.savedRow[0].id,$t.p.savedRow[0].ic);}else{window.setTimeout(function(){$("#"+$t.p.knv).attr("tabindex","-1").focus();},0);}
nm=$t.p.colModel[iCol].name;if(nm=='subgrid'||nm=='cb'||nm=='rn'){return;}
cc=$("td:eq("+iCol+")",$t.rows[iRow]);if($t.p.colModel[iCol].editable===true&&ed===true&&!cc.hasClass("not-editable-cell")){if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$("td:eq("+$t.p.iCol+")",$t.rows[$t.p.iRow]).removeClass("edit-cell ui-state-highlight");$($t.rows[$t.p.iRow]).removeClass("selected-row ui-state-hover");}
$(cc).addClass("edit-cell ui-state-highlight");$($t.rows[iRow]).addClass("selected-row ui-state-hover");try{tmp=$.unformat(cc,{rowId:$t.rows[iRow].id,colModel:$t.p.colModel[iCol]},iCol);}catch(_){tmp=$(cc).html();}
if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp);}
if(!$t.p.colModel[iCol].edittype){$t.p.colModel[iCol].edittype="text";}
$t.p.savedRow.push({id:iRow,ic:iCol,name:nm,v:tmp});if($.isFunction($t.p.formatCell)){var tmp2=$t.p.formatCell($t.rows[iRow].id,nm,tmp,iRow,iCol);if(tmp2!==undefined){tmp=tmp2;}}
var opt=$.extend({},$t.p.colModel[iCol].editoptions||{},{id:iRow+"_"+nm,name:nm});var elc=createEl($t.p.colModel[iCol].edittype,opt,tmp,true,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));if($.isFunction($t.p.beforeEditCell)){$t.p.beforeEditCell($t.rows[iRow].id,nm,tmp,iRow,iCol);}
$(cc).html("").append(elc).attr("tabindex","0");window.setTimeout(function(){$(elc).focus();},0);$("input, select, textarea",cc).bind("keydown",function(e){if(e.keyCode===27){if($("input.hasDatepicker",cc).length>0){if($(".ui-datepicker").is(":hidden")){$($t).jqGrid("restoreCell",iRow,iCol);}
else{$("input.hasDatepicker",cc).datepicker('hide');}}else{$($t).jqGrid("restoreCell",iRow,iCol);}}
if(e.keyCode===13){$($t).jqGrid("saveCell",iRow,iCol);}
if(e.keyCode==9){if(!$t.grid.hDiv.loading){if(e.shiftKey){$($t).jqGrid("prevCell",iRow,iCol);}
else{$($t).jqGrid("nextCell",iRow,iCol);}}else{return false;}}
e.stopPropagation();});if($.isFunction($t.p.afterEditCell)){$t.p.afterEditCell($t.rows[iRow].id,nm,tmp,iRow,iCol);}}else{if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$("td:eq("+$t.p.iCol+")",$t.rows[$t.p.iRow]).removeClass("edit-cell ui-state-highlight");$($t.rows[$t.p.iRow]).removeClass("selected-row ui-state-hover");}
cc.addClass("edit-cell ui-state-highlight");$($t.rows[iRow]).addClass("selected-row ui-state-hover");if($.isFunction($t.p.onSelectCell)){tmp=cc.html().replace(/\&#160\;/ig,'');$t.p.onSelectCell($t.rows[iRow].id,nm,tmp,iRow,iCol);}}
$t.p.iCol=iCol;$t.p.iRow=iRow;});},saveCell:function(iRow,iCol){return this.each(function(){var $t=this,fr;if(!$t.grid||$t.p.cellEdit!==true){return;}
if($t.p.savedRow.length>=1){fr=0;}else{fr=null;}
if(fr!==null){var cc=$("td:eq("+iCol+")",$t.rows[iRow]),v,v2,cm=$t.p.colModel[iCol],nm=cm.name,nmjq=$.jgrid.jqID(nm);switch(cm.edittype){case"select":if(!cm.editoptions.multiple){v=$("#"+iRow+"_"+nmjq+">option:selected",$t.rows[iRow]).val();v2=$("#"+iRow+"_"+nmjq+">option:selected",$t.rows[iRow]).text();}else{var sel=$("#"+iRow+"_"+nmjq,$t.rows[iRow]),selectedText=[];v=$(sel).val();if(v){v.join(",");}else{v="";}
$("option:selected",sel).each(function(i,selected){selectedText[i]=$(selected).text();});v2=selectedText.join(",");}
if(cm.formatter){v2=v;}
break;case"checkbox":var cbv=["Yes","No"];if(cm.editoptions){cbv=cm.editoptions.value.split(":");}
v=$("#"+iRow+"_"+nmjq,$t.rows[iRow]).attr("checked")?cbv[0]:cbv[1];v2=v;break;case"password":case"text":case"textarea":case"button":v=$("#"+iRow+"_"+nmjq,$t.rows[iRow]).val();v2=v;break;case'custom':try{if(cm.editoptions&&$.isFunction(cm.editoptions.custom_value)){v=cm.editoptions.custom_value($(".customelement",cc),'get');if(v===undefined){throw"e2";}else{v2=v;}}else{throw"e1";}}catch(e){if(e=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);}
if(e=="e2"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose);}
else{info_dialog(jQuery.jgrid.errors.errcap,e.message,jQuery.jgrid.edit.bClose);}}
break;}
if(v2!=$t.p.savedRow[fr].v){if($.isFunction($t.p.beforeSaveCell)){var vv=$t.p.beforeSaveCell($t.rows[iRow].id,nm,v,iRow,iCol);if(vv){v=vv;}}
var cv=checkValues(v,iCol,$t);if(cv[0]===true){var addpost={};if($.isFunction($t.p.beforeSubmitCell)){addpost=$t.p.beforeSubmitCell($t.rows[iRow].id,nm,v,iRow,iCol);if(!addpost){addpost={};}}
if($("input.hasDatepicker",cc).length>0){$("input.hasDatepicker",cc).datepicker('hide');}
if($t.p.cellsubmit=='remote'){if($t.p.cellurl){var postdata={};if($t.p.autoencode){v=$.jgrid.htmlEncode(v);}
postdata[nm]=v;var idname,oper,opers;opers=$t.p.prmNames;idname=opers.id;oper=opers.oper;postdata[idname]=$t.rows[iRow].id;postdata[oper]=opers.editoper;postdata=$.extend(addpost,postdata);$("#lui_"+$t.p.id).show();$t.grid.hDiv.loading=true;$.ajax($.extend({url:$t.p.cellurl,data:$.isFunction($t.p.serializeCellData)?$t.p.serializeCellData(postdata):postdata,type:"POST",complete:function(result,stat){$("#lui_"+$t.p.id).hide();$t.grid.hDiv.loading=false;if(stat=='success'){if($.isFunction($t.p.afterSubmitCell)){var ret=$t.p.afterSubmitCell(result,postdata.id,nm,v,iRow,iCol);if(ret[0]===true){$(cc).empty();$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,false,false,true);$(cc).addClass("dirty-cell");$($t.rows[iRow]).addClass("edited");if($.isFunction($t.p.afterSaveCell)){$t.p.afterSaveCell($t.rows[iRow].id,nm,v,iRow,iCol);}
$t.p.savedRow.splice(0,1);}else{info_dialog($.jgrid.errors.errcap,ret[1],$.jgrid.edit.bClose);$($t).jqGrid("restoreCell",iRow,iCol);}}else{$(cc).empty();$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,false,false,true);$(cc).addClass("dirty-cell");$($t.rows[iRow]).addClass("edited");if($.isFunction($t.p.afterSaveCell)){$t.p.afterSaveCell($t.rows[iRow].id,nm,v,iRow,iCol);}
$t.p.savedRow.splice(0,1);}}},error:function(res,stat){$("#lui_"+$t.p.id).hide();$t.grid.hDiv.loading=false;if($.isFunction($t.p.errorCell)){$t.p.errorCell(res,stat);$($t).jqGrid("restoreCell",iRow,iCol);}else{info_dialog($.jgrid.errors.errcap,res.status+" : "+res.statusText+"<br/>"+stat,$.jgrid.edit.bClose);$($t).jqGrid("restoreCell",iRow,iCol);}}},$.jgrid.ajaxOptions,$t.p.ajaxCellOptions||{}));}else{try{info_dialog($.jgrid.errors.errcap,$.jgrid.errors.nourl,$.jgrid.edit.bClose);$($t).jqGrid("restoreCell",iRow,iCol);}catch(e){}}}
if($t.p.cellsubmit=='clientArray'){$(cc).empty();$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,false,false,true);$(cc).addClass("dirty-cell");$($t.rows[iRow]).addClass("edited");if($.isFunction($t.p.afterSaveCell)){$t.p.afterSaveCell($t.rows[iRow].id,nm,v,iRow,iCol);}
$t.p.savedRow.splice(0,1);}}else{try{window.setTimeout(function(){info_dialog($.jgrid.errors.errcap,v+" "+cv[1],$.jgrid.edit.bClose);},100);$($t).jqGrid("restoreCell",iRow,iCol);}catch(e){}}}else{$($t).jqGrid("restoreCell",iRow,iCol);}}
if($.browser.opera){$("#"+$t.p.knv).attr("tabindex","-1").focus();}else{window.setTimeout(function(){$("#"+$t.p.knv).attr("tabindex","-1").focus();},0);}});},restoreCell:function(iRow,iCol){return this.each(function(){var $t=this,fr;if(!$t.grid||$t.p.cellEdit!==true){return;}
if($t.p.savedRow.length>=1){fr=0;}else{fr=null;}
if(fr!==null){var cc=$("td:eq("+iCol+")",$t.rows[iRow]);if($.isFunction($.fn.datepicker)){try{$("input.hasDatepicker",cc).datepicker('hide');}catch(e){}}
$(cc).empty().attr("tabindex","-1");$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,$t.p.savedRow[fr].v,false,false,true);$t.p.savedRow.splice(0,1);}
window.setTimeout(function(){$("#"+$t.p.knv).attr("tabindex","-1").focus();},0);});},nextCell:function(iRow,iCol){return this.each(function(){var $t=this,nCol=false;if(!$t.grid||$t.p.cellEdit!==true){return;}
for(var i=iCol+1;i<$t.p.colModel.length;i++){if($t.p.colModel[i].editable===true){nCol=i;break;}}
if(nCol!==false){$($t).jqGrid("editCell",iRow,nCol,true);}else{if($t.p.savedRow.length>0){$($t).jqGrid("saveCell",iRow,iCol);}}});},prevCell:function(iRow,iCol){return this.each(function(){var $t=this,nCol=false;if(!$t.grid||$t.p.cellEdit!==true){return;}
for(var i=iCol-1;i>=0;i--){if($t.p.colModel[i].editable===true){nCol=i;break;}}
if(nCol!==false){$($t).jqGrid("editCell",iRow,nCol,true);}else{if($t.p.savedRow.length>0){$($t).jqGrid("saveCell",iRow,iCol);}}});},GridNav:function(){return this.each(function(){var $t=this;if(!$t.grid||$t.p.cellEdit!==true){return;}
$t.p.knv=$t.p.id+"_kn";var selection=$("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+$t.p.knv+"'></span></span>"),i,kdir;$(selection).insertBefore($t.grid.cDiv);$("#"+$t.p.knv).focus().keydown(function(e){kdir=e.keyCode;if($t.p.direction=="rtl"){if(kdir==37){kdir=39;}
else if(kdir==39){kdir=37;}}
switch(kdir){case 38:if($t.p.iRow-1>=0){scrollGrid($t.p.iRow-1,$t.p.iCol,'vu');$($t).jqGrid("editCell",$t.p.iRow-1,$t.p.iCol,false);}
break;case 40:if($t.p.iRow+1<=$t.rows.length-1){scrollGrid($t.p.iRow+1,$t.p.iCol,'vd');$($t).jqGrid("editCell",$t.p.iRow+1,$t.p.iCol,false);}
break;case 37:if($t.p.iCol-1>=0){i=findNextVisible($t.p.iCol-1,'lft');scrollGrid($t.p.iRow,i,'h');$($t).jqGrid("editCell",$t.p.iRow,i,false);}
break;case 39:if($t.p.iCol+1<=$t.p.colModel.length-1){i=findNextVisible($t.p.iCol+1,'rgt');scrollGrid($t.p.iRow,i,'h');$($t).jqGrid("editCell",$t.p.iRow,i,false);}
break;case 13:if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$($t).jqGrid("editCell",$t.p.iRow,$t.p.iCol,true);}
break;}
return false;});function scrollGrid(iR,iC,tp){if(tp.substr(0,1)=='v'){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,nROT=$t.rows[iR].offsetTop+$t.rows[iR].clientHeight,pROT=$t.rows[iR].offsetTop;if(tp=='vd'){if(nROT>=ch){$($t.grid.bDiv)[0].scrollTop=$($t.grid.bDiv)[0].scrollTop+$t.rows[iR].clientHeight;}}
if(tp=='vu'){if(pROT<st){$($t.grid.bDiv)[0].scrollTop=$($t.grid.bDiv)[0].scrollTop-$t.rows[iR].clientHeight;}}}
if(tp=='h'){var cw=$($t.grid.bDiv)[0].clientWidth,sl=$($t.grid.bDiv)[0].scrollLeft,nCOL=$t.rows[iR].cells[iC].offsetLeft+$t.rows[iR].cells[iC].clientWidth,pCOL=$t.rows[iR].cells[iC].offsetLeft;if(nCOL>=cw+parseInt(sl,10)){$($t.grid.bDiv)[0].scrollLeft=$($t.grid.bDiv)[0].scrollLeft+$t.rows[iR].cells[iC].clientWidth;}else if(pCOL<sl){$($t.grid.bDiv)[0].scrollLeft=$($t.grid.bDiv)[0].scrollLeft-$t.rows[iR].cells[iC].clientWidth;}}}
function findNextVisible(iC,act){var ind,i;if(act=='lft'){ind=iC+1;for(i=iC;i>=0;i--){if($t.p.colModel[i].hidden!==true){ind=i;break;}}}
if(act=='rgt'){ind=iC-1;for(i=iC;i<$t.p.colModel.length;i++){if($t.p.colModel[i].hidden!==true){ind=i;break;}}}
return ind;}});},getChangedCells:function(mthd){var ret=[];if(!mthd){mthd='all';}
this.each(function(){var $t=this,nm;if(!$t.grid||$t.p.cellEdit!==true){return;}
$($t.rows).each(function(j){var res={};if($(this).hasClass("edited")){$('td',this).each(function(i){nm=$t.p.colModel[i].name;if(nm!=='cb'&&nm!=='subgrid'){if(mthd=='dirty'){if($(this).hasClass('dirty-cell')){try{res[nm]=$.unformat(this,{rowId:$t.rows[j].id,colModel:$t.p.colModel[i]},i);}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html());}}}else{try{res[nm]=$.unformat(this,{rowId:$t.rows[j].id,colModel:$t.p.colModel[i]},i);}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html());}}}});res.id=this.id;ret.push(res);}});});return ret;}});})(jQuery);;(function($){$.jgrid.extend({setSubGrid:function(){return this.each(function(){var $t=this,cm;$t.p.colNames.unshift("");$t.p.colModel.unshift({name:'subgrid',width:$.browser.safari?$t.p.subGridWidth+$t.p.cellLayout:$t.p.subGridWidth,sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});cm=$t.p.subGridModel;if(cm[0]){cm[0].align=$.extend([],cm[0].align||[]);for(var i=0;i<cm[0].name.length;i++){cm[0].align[i]=cm[0].align[i]||'left';}}});},addSubGridCell:function(pos,iRow){var prp='',gv,sid;this.each(function(){prp=this.formatCol(pos,iRow);gv=this.p.gridview;sid=this.p.id;});if(gv===false){return"<td role=\"grid\" aria-describedby=\""+sid+"_subgrid\" class=\"ui-sgcollapsed sgcollapsed\" "+prp+"><a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'></span></a></td>";}else{return"<td role=\"grid\" aria-describedby=\""+sid+"_subgrid\" "+prp+"></td>";}},addSubGrid:function(t,pos){return this.each(function(){var ts=this;if(!ts.grid){return;}
var res,_id,pID,atd,nhc,subdata,bfsc;$("td:eq("+pos+")",t).click(function(e){if($(this).hasClass("sgcollapsed")){pID=ts.p.id;res=$(this).parent();atd=pos>=1?"<td colspan='"+pos+"'>&#160;</td>":"";_id=$(res).attr("id");bfsc=true;if($.isFunction(ts.p.subGridBeforeExpand)){bfsc=ts.p.subGridBeforeExpand(pID+"_"+_id,_id);}
if(bfsc===false){return false;}
nhc=0;$.each(ts.p.colModel,function(i,v){if(this.hidden===true||this.name=='rn'||this.name=='cb'){nhc++;}});subdata="<tr role='row' class='ui-subgrid'>"+atd+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon ui-icon-carat-1-sw'/></td><td colspan='"+parseInt(ts.p.colNames.length-1-nhc,10)+"' class='ui-widget-content subgrid-data'><div id="+pID+"_"+_id+" class='tablediv'>";$(this).parent().after(subdata+"</div></td></tr>");if($.isFunction(ts.p.subGridRowExpanded)){ts.p.subGridRowExpanded(pID+"_"+_id,_id);}else{populatesubgrid(res);}
$(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-minus'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");}else if($(this).hasClass("sgexpanded")){bfsc=true;if($.isFunction(ts.p.subGridRowColapsed)){res=$(this).parent();_id=$(res).attr("id");bfsc=ts.p.subGridRowColapsed(pID+"_"+_id,_id);}
if(bfsc===false){return false;}
$(this).parent().next().remove(".ui-subgrid");$(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");}
return false;});var populatesubgrid=function(rd){var res,sid,dp,i,j;sid=$(rd).attr("id");dp={nd_:(new Date().getTime())};dp[ts.p.prmNames.subgridid]=sid;if(!ts.p.subGridModel[0]){return false;}
if(ts.p.subGridModel[0].params){for(j=0;j<ts.p.subGridModel[0].params.length;j++){for(i=0;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].name==ts.p.subGridModel[0].params[j]){dp[ts.p.colModel[i].name]=$("td:eq("+i+")",rd).text().replace(/\&#160\;/ig,'');}}}}
if(!ts.grid.hDiv.loading){ts.grid.hDiv.loading=true;$("#load_"+ts.p.id).show();if(!ts.p.subgridtype){ts.p.subgridtype=ts.p.datatype;}
if($.isFunction(ts.p.subgridtype)){ts.p.subgridtype(dp);}else{ts.p.subgridtype=ts.p.subgridtype.toLowerCase();}
switch(ts.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:ts.p.mtype,url:ts.p.subGridUrl,dataType:ts.p.subgridtype,data:$.isFunction(ts.p.serializeSubGridData)?ts.p.serializeSubGridData(dp):dp,complete:function(sxml){if(ts.p.subgridtype=="xml"){subGridXml(sxml.responseXML,sid);}else{subGridJson($.jgrid.parse(sxml.responseText),sid);}
sxml=null;}},$.jgrid.ajaxOptions,ts.p.ajaxSubgridOptions||{}));break;}}
return false;};var subGridCell=function(trdiv,cell,pos){var tddiv=$("<td align='"+ts.p.subGridModel[0].align[pos]+"'></td>").html(cell);$(trdiv).append(tddiv);};var subGridXml=function(sjxml,sbid){var tddiv,i,cur,sgmap,dummy=$("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),trdiv=$("<tr></tr>");for(i=0;i<ts.p.subGridModel[0].name.length;i++){tddiv=$("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+ts.p.direction+"'></th>");$(tddiv).html(ts.p.subGridModel[0].name[i]);$(tddiv).width(ts.p.subGridModel[0].width[i]);$(trdiv).append(tddiv);}
$(dummy).append(trdiv);if(sjxml){sgmap=ts.p.xmlReader.subgrid;$(sgmap.root+" "+sgmap.row,sjxml).each(function(){trdiv=$("<tr class='ui-widget-content ui-subtblcell'></tr>");if(sgmap.repeatitems===true){$(sgmap.cell,this).each(function(i){subGridCell(trdiv,$(this).text()||'&#160;',i);});}else{var f=ts.p.subGridModel[0].mapping||ts.p.subGridModel[0].name;if(f){for(i=0;i<f.length;i++){subGridCell(trdiv,$(f[i],this).text()||'&#160;',i);}}}
$(dummy).append(trdiv);});}
var pID=$("table:first",ts.grid.bDiv).attr("id")+"_";$("#"+pID+sbid).append(dummy);ts.grid.hDiv.loading=false;$("#load_"+ts.p.id).hide();return false;};var subGridJson=function(sjxml,sbid){var tddiv,result,i,cur,sgmap,j,dummy=$("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),trdiv=$("<tr></tr>");for(i=0;i<ts.p.subGridModel[0].name.length;i++){tddiv=$("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+ts.p.direction+"'></th>");$(tddiv).html(ts.p.subGridModel[0].name[i]);$(tddiv).width(ts.p.subGridModel[0].width[i]);$(trdiv).append(tddiv);}
$(dummy).append(trdiv);if(sjxml){sgmap=ts.p.jsonReader.subgrid;result=sjxml[sgmap.root];if(typeof result!=='undefined'){for(i=0;i<result.length;i++){cur=result[i];trdiv=$("<tr class='ui-widget-content ui-subtblcell'></tr>");if(sgmap.repeatitems===true){if(sgmap.cell){cur=cur[sgmap.cell];}
for(j=0;j<cur.length;j++){subGridCell(trdiv,cur[j]||'&#160;',j);}}else{var f=ts.p.subGridModel[0].mapping||ts.p.subGridModel[0].name;if(f.length){for(j=0;j<f.length;j++){subGridCell(trdiv,cur[f[j]]||'&#160;',j);}}}
$(dummy).append(trdiv);}}}
var pID=$("table:first",ts.grid.bDiv).attr("id")+"_";$("#"+pID+sbid).append(dummy);ts.grid.hDiv.loading=false;$("#load_"+ts.p.id).hide();return false;};ts.subGridXml=function(xml,sid){subGridXml(xml,sid);};ts.subGridJson=function(json,sid){subGridJson(json,sid);};});},expandSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return;}
if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgcollapsed",rc)[0];if(sgc){$(sgc).trigger("click");}}}});},collapseSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return;}
if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgexpanded",rc)[0];if(sgc){$(sgc).trigger("click");}}}});},toggleSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return;}
if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgcollapsed",rc)[0];if(sgc){$(sgc).trigger("click");}else{sgc=$("td.sgexpanded",rc)[0];if(sgc){$(sgc).trigger("click");}}}}});}});})(jQuery);;(function($){$.jgrid.extend({setTreeNode:function(rd,row){return this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
var expCol=$t.p.expColInd;var expanded=$t.p.treeReader.expanded_field;var isLeaf=$t.p.treeReader.leaf_field;var level=$t.p.treeReader.level_field;row.level=rd[level];if($t.p.treeGridModel=='nested'){row.lft=rd[$t.p.treeReader.left_field];row.rgt=rd[$t.p.treeReader.right_field];if(!rd[isLeaf]){rd[isLeaf]=(parseInt(row.rgt,10)===parseInt(row.lft,10)+1)?'true':'false';}}else{row.parent_id=rd[$t.p.treeReader.parent_id_field];}
var curLevel=parseInt(row.level,10),ident,lftpos;if($t.p.tree_root_level===0){ident=curLevel+1;lftpos=curLevel;}else{ident=curLevel;lftpos=curLevel-1;}
var twrap="<div class='tree-wrap tree-wrap-"+$t.p.direction+"' style='width:"+(ident*18)+"px;'>";twrap+="<div style='"+($t.p.direction=="rtl"?"right:":"left:")+(lftpos*18)+"px;' class='ui-icon ";if(rd[isLeaf]=="true"||rd[isLeaf]===true){twrap+=$t.p.treeIcons.leaf+" tree-leaf'";row.isLeaf=true;}else{if(rd[expanded]=="true"||rd[expanded]===true){twrap+=$t.p.treeIcons.minus+" tree-minus treeclick'";row.expanded=true;}else{twrap+=$t.p.treeIcons.plus+" tree-plus treeclick'";row.expanded=false;}
row.isLeaf=false;}
twrap+="</div></div>";if(parseInt(rd[level],10)!==parseInt($t.p.tree_root_level,10)){if(!$($t).jqGrid("isVisibleNode",row)){$(row).css("display","none");}}
$("td:eq("+expCol+")",row).wrapInner("<span></span>").prepend(twrap);$(".treeclick",row).bind("click",function(e){var target=e.target||e.srcElement;var ind=$(target,$t.rows).parents("tr.jqgrow")[0].rowIndex;if(!$t.rows[ind].isLeaf){if($t.rows[ind].expanded){$($t).jqGrid("collapseRow",$t.rows[ind]);$($t).jqGrid("collapseNode",$t.rows[ind]);}else{$($t).jqGrid("expandRow",$t.rows[ind]);$($t).jqGrid("expandNode",$t.rows[ind]);}}
return false;});if($t.p.ExpandColClick===true){$("span",row).css("cursor","pointer").bind("click",function(e){var target=e.target||e.srcElement;var ind=$(target,$t.rows).parents("tr.jqgrow")[0].rowIndex;if(!$t.rows[ind].isLeaf){if($t.rows[ind].expanded){$($t).jqGrid("collapseRow",$t.rows[ind]);$($t).jqGrid("collapseNode",$t.rows[ind]);}else{$($t).jqGrid("expandRow",$t.rows[ind]);$($t).jqGrid("expandNode",$t.rows[ind]);}}
$($t).jqGrid("setSelection",$t.rows[ind].id);return false;});}});},setTreeGrid:function(){return this.each(function(){var $t=this,i=0,pico;if(!$t.p.treeGrid){return;}
if(!$t.p.treedatatype){$.extend($t.p,{treedatatype:$t.p.datatype});}
$t.p.subGrid=false;$t.p.altRows=false;$t.p.pgbuttons=false;$t.p.pginput=false;$t.p.multiselect=false;$t.p.rowList=[];pico='ui-icon-triangle-1-'+($t.p.direction=="rtl"?'w':'e');$t.p.treeIcons=$.extend({plus:pico,minus:'ui-icon-triangle-1-s',leaf:'ui-icon-radio-off'},$t.p.treeIcons||{});if($t.p.treeGridModel=='nested'){$t.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded"},$t.p.treeReader);}else
if($t.p.treeGridModel=='adjacency'){$t.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded"},$t.p.treeReader);}
for(var key in $t.p.colModel){if($t.p.colModel.hasOwnProperty(key)){if($t.p.colModel[key].name==$t.p.ExpandColumn){$t.p.expColInd=i;break;}
i++;}}
if(!$t.p.expColInd){$t.p.expColInd=0;}
$.each($t.p.treeReader,function(i,n){if(n){$t.p.colNames.push(n);$t.p.colModel.push({name:n,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false});}});});},expandRow:function(record){this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
var childern=$($t).jqGrid("getNodeChildren",record);$(childern).each(function(i){$(this).css("display","");if(this.expanded){$($t).jqGrid("expandRow",this);}});});},collapseRow:function(record){this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
var childern=$($t).jqGrid("getNodeChildren",record);$(childern).each(function(i){$(this).css("display","none");if(this.expanded){$($t).jqGrid("collapseRow",this);}});});},getRootNodes:function(){var result=[];this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
switch($t.p.treeGridModel){case'nested':var level=$t.p.treeReader.level_field;$($t.rows).each(function(i){if(parseInt(this[level],10)===parseInt($t.p.tree_root_level,10)){result.push(this);}});break;case'adjacency':$($t.rows).each(function(i){if(this.parent_id===null||String(this.parent_id).toLowerCase()=="null"){result.push(this);}});break;}});return result;},getNodeDepth:function(rc){var ret=null;this.each(function(){var $t=this;if(!this.grid||!this.p.treeGrid){return;}
switch($t.p.treeGridModel){case'nested':ret=parseInt(rc.level,10)-parseInt(this.p.tree_root_level,10);break;case'adjacency':ret=$($t).jqGrid("getNodeAncestors",rc).length;break;}});return ret;},getNodeParent:function(rc){var result=null;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
switch($t.p.treeGridModel){case'nested':var lft=parseInt(rc.lft,10),rgt=parseInt(rc.rgt,10),level=parseInt(rc.level,10);$(this.rows).each(function(){if(parseInt(this.level,10)===level-1&&parseInt(this.lft,10)<lft&&parseInt(this.rgt,10)>rgt){result=this;return false;}});break;case'adjacency':$(this.rows).each(function(){if(this.id==rc.parent_id){result=this;return false;}});break;}});return result;},getNodeChildren:function(rc){var result=[];this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
switch($t.p.treeGridModel){case'nested':var lft=parseInt(rc.lft,10),rgt=parseInt(rc.rgt,10),level=parseInt(rc.level,10);$(this.rows).each(function(i){if(parseInt(this.level,10)===level+1&&parseInt(this.lft,10)>lft&&parseInt(this.rgt,10)<rgt){result.push(this);}});break;case'adjacency':$(this.rows).each(function(i){if(this.parent_id==rc.id){result.push(this);}});break;}});return result;},getFullTreeNode:function(rc){var result=[];this.each(function(){var $t=this,len;if(!$t.grid||!$t.p.treeGrid){return;}
switch($t.p.treeGridModel){case'nested':var lft=parseInt(rc.lft,10),rgt=parseInt(rc.rgt,10),level=parseInt(rc.level,10);$(this.rows).each(function(i){if(parseInt(this.level,10)>=level&&parseInt(this.lft,10)>=lft&&parseInt(this.lft,10)<=rgt){result.push(this);}});break;case'adjacency':result.push(rc);$(this.rows).each(function(i){len=result.length;for(i=0;i<len;i++){if(result[i].id==this.parent_id){result.push(this);break;}}});break;}});return result;},getNodeAncestors:function(rc){var ancestors=[];this.each(function(){if(!this.grid||!this.p.treeGrid){return;}
var parent=$(this).jqGrid("getNodeParent",rc);while(parent){ancestors.push(parent);parent=$(this).jqGrid("getNodeParent",parent);}});return ancestors;},isVisibleNode:function(rc){var result=true;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
var ancestors=$($t).jqGrid("getNodeAncestors",rc);$(ancestors).each(function(){result=result&&this.expanded;if(!result){return false;}});});return result;},isNodeLoaded:function(rc){var result;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
if(rc.loaded!==undefined){result=rc.loaded;}else if(rc.isLeaf||$($t).jqGrid("getNodeChildren",rc).length>0){result=true;}else{result=false;}});return result;},expandNode:function(rc){return this.each(function(){if(!this.grid||!this.p.treeGrid){return;}
if(!rc.expanded){if($(this).jqGrid("isNodeLoaded",rc)){rc.expanded=true;$("div.treeclick",rc).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");}else{rc.expanded=true;$("div.treeclick",rc).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=rc.rowIndex;this.p.datatype=this.p.treedatatype;if(this.p.treeGridModel=='nested'){$(this).jqGrid("setGridParam",{postData:{nodeid:rc.id,n_left:rc.lft,n_right:rc.rgt,n_level:rc.level}});}else{$(this).jqGrid("setGridParam",{postData:{nodeid:rc.id,parentid:rc.parent_id,n_level:rc.level}});}
$(this).trigger("reloadGrid");if(this.p.treeGridModel=='nested'){$(this).jqGrid("setGridParam",{postData:{nodeid:'',n_left:'',n_right:'',n_level:''}});}else{$(this).jqGrid("setGridParam",{postData:{nodeid:'',parentid:'',n_level:''}});}}}});},collapseNode:function(rc){return this.each(function(){if(!this.grid||!this.p.treeGrid){return;}
if(rc.expanded){rc.expanded=false;$("div.treeclick",rc).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus");}});},SortTree:function(newDir){return this.each(function(){if(!this.grid||!this.p.treeGrid){return;}
var i,len,rec,records=[],$t=this,roots=$(this).jqGrid("getRootNodes");roots.sort(function(a,b){if(a.sortKey<b.sortKey){return-newDir;}
if(a.sortKey>b.sortKey){return newDir;}
return 0;});if(roots[0]){$("td",roots[0]).each(function(k){$(this).css("width",$t.grid.headers[k].width+"px");});$t.grid.cols=roots[0].cells;}
for(i=0,len=roots.length;i<len;i++){rec=roots[i];records.push(rec);$(this).jqGrid("collectChildrenSortTree",records,rec,newDir);}
$.each(records,function(index,row){$('tbody',$t.grid.bDiv).append(row);row.sortKey=null;});});},collectChildrenSortTree:function(records,rec,newDir){return this.each(function(){if(!this.grid||!this.p.treeGrid){return;}
var i,len,child,children=$(this).jqGrid("getNodeChildren",rec);children.sort(function(a,b){if(a.sortKey<b.sortKey){return-newDir;}
if(a.sortKey>b.sortKey){return newDir;}
return 0;});for(i=0,len=children.length;i<len;i++){child=children[i];records.push(child);$(this).jqGrid("collectChildrenSortTree",records,child,newDir);}});},setTreeRow:function(rowid,data){var nm,success=false;this.each(function(){var t=this;if(!t.grid||!t.p.treeGrid){return;}
success=$(t).jqGrid("setRowData",rowid,data);});return success;},delTreeNode:function(rowid){return this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return;}
var rc=$($t).jqGrid("getInd",rowid,true);if(rc){var dr=$($t).jqGrid("getNodeChildren",rc);if(dr.length>0){for(var i=0;i<dr.length;i++){$($t).jqGrid("delRowData",dr[i].id);}}
$($t).jqGrid("delRowData",rc.id);}});}});})(jQuery);;(function($){$.jgrid.extend({getColProp:function(colname){var ret={},$t=this[0];if(!$t.grid){return;}
var cM=$t.p.colModel;for(var i=0;i<cM.length;i++){if(cM[i].name==colname){ret=cM[i];break;}}
return ret;},setColProp:function(colname,obj){return this.each(function(){if(this.grid){if(obj){var cM=this.p.colModel;for(var i=0;i<cM.length;i++){if(cM[i].name==colname){$.extend(this.p.colModel[i],obj);break;}}}}});},sortGrid:function(colname,reload,sor){return this.each(function(){var $t=this,idx=-1;if(!$t.grid){return;}
if(!colname){colname=$t.p.sortname;}
for(var i=0;i<$t.p.colModel.length;i++){if($t.p.colModel[i].index==colname||$t.p.colModel[i].name==colname){idx=i;break;}}
if(idx!=-1){var sort=$t.p.colModel[idx].sortable;if(typeof sort!=='boolean'){sort=true;}
if(typeof reload!=='boolean'){reload=false;}
if(sort){$t.sortData("jqgh_"+colname,idx,reload,sor);}}});},GridDestroy:function(){return this.each(function(){if(this.grid){if(this.p.pager){$(this.p.pager).remove();}
var gid=this.id;try{$("#gbox_"+gid).remove();}catch(_){}}});},GridUnload:function(){return this.each(function(){if(!this.grid){return;}
var defgrid={id:$(this).attr('id'),cl:$(this).attr('class')};if(this.p.pager){$(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");}
var newtable=document.createElement('table');$(newtable).attr({id:defgrid.id});newtable.className=defgrid.cl;var gid=this.id;$(newtable).removeClass("ui-jqgrid-btable");if($(this.p.pager).parents("#gbox_"+gid).length===1){$(newtable).insertBefore("#gbox_"+gid).show();$(this.p.pager).insertBefore("#gbox_"+gid);}else{$(newtable).insertBefore("#gbox_"+gid).show();}
$("#gbox_"+gid).remove();});},setGridState:function(state){return this.each(function(){if(!this.grid){return;}
var $t=this;if(state=='hidden'){$(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$t.p.id).slideUp("fast");if($t.p.pager){$($t.p.pager).slideUp("fast");}
if($t.p.toppager){$($t.p.toppager).slideUp("fast");}
if($t.p.toolbar[0]===true){if($t.p.toolbar[1]=='both'){$($t.grid.ubDiv).slideUp("fast");}
$($t.grid.uDiv).slideUp("fast");}
if($t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$t.p.id).slideUp("fast");}
$(".ui-jqgrid-titlebar-close span",$t.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");$t.p.gridstate='hidden';}else if(state=='visible'){$(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$t.p.id).slideDown("fast");if($t.p.pager){$($t.p.pager).slideDown("fast");}
if($t.p.toppager){$($t.p.toppager).slideDown("fast");}
if($t.p.toolbar[0]===true){if($t.p.toolbar[1]=='both'){$($t.grid.ubDiv).slideDown("fast");}
$($t.grid.uDiv).slideDown("fast");}
if($t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$t.p.id).slideDown("fast");}
$(".ui-jqgrid-titlebar-close span",$t.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");$t.p.gridstate='visible';}});},updateGridRows:function(data,rowidname,jsonreader){var nm,success=false,title;this.each(function(){var t=this,vl,ind,srow,sid;if(!t.grid){return false;}
if(!rowidname){rowidname="id";}
if(data&&data.length>0){$(data).each(function(j){srow=this;ind=t.rows.namedItem(srow[rowidname]);if(ind){sid=srow[rowidname];if(jsonreader===true){if(t.p.jsonReader.repeatitems===true){if(t.p.jsonReader.cell){srow=srow[t.p.jsonReader.cell];}
for(var k=0;k<srow.length;k++){vl=t.formatter(sid,srow[k],k,srow,'edit');title=t.p.colModel[k].title?{"title":$.jgrid.stripHtml(vl)}:{};if(t.p.treeGrid===true&&nm==t.p.ExpandColumn){$("td:eq("+k+") > span:first",ind).html(vl).attr(title);}else{$("td:eq("+k+")",ind).html(vl).attr(title);}}
success=true;return true;}}
$(t.p.colModel).each(function(i){nm=jsonreader===true?this.jsonmap||this.name:this.name;if(srow[nm]!==undefined){vl=t.formatter(sid,srow[nm],i,srow,'edit');title=this.title?{"title":$.jgrid.stripHtml(vl)}:{};if(t.p.treeGrid===true&&nm==t.p.ExpandColumn){$("td:eq("+i+") > span:first",ind).html(vl).attr(title);}else{$("td:eq("+i+")",ind).html(vl).attr(title);}
success=true;}});}});}});return success;},filterGrid:function(gridid,p){p=$.extend({gridModel:false,gridNames:false,gridToolbar:false,filterModel:[],formtype:"horizontal",autosearch:true,formclass:"filterform",tableclass:"filtertable",buttonclass:"filterbutton",searchButton:"Search",clearButton:"Clear",enableSearch:false,enableClear:false,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,url:'',marksearched:true},p||{});return this.each(function(){var self=this;this.p=p;if(this.p.filterModel.length===0&&this.p.gridModel===false){alert("No filter is set");return;}
if(!gridid){alert("No target grid is set!");return;}
this.p.gridid=gridid.indexOf("#")!=-1?gridid:"#"+gridid;var gcolMod=$(this.p.gridid).jqGrid("getGridParam",'colModel');if(gcolMod){if(this.p.gridModel===true){var thegrid=$(this.p.gridid)[0];var sh;$.each(gcolMod,function(i,n){var tmpFil=[];this.search=this.search===false?false:true;if(this.editrules&&this.editrules.searchhidden===true){sh=true;}else{if(this.hidden===true){sh=false;}else{sh=true;}}
if(this.search===true&&sh===true){if(self.p.gridNames===true){tmpFil.label=thegrid.p.colNames[i];}else{tmpFil.label='';}
tmpFil.name=this.name;tmpFil.index=this.index||this.name;tmpFil.stype=this.edittype||'text';if(tmpFil.stype!='select'){tmpFil.stype='text';}
tmpFil.defval=this.defval||'';tmpFil.surl=this.surl||'';tmpFil.sopt=this.editoptions||{};tmpFil.width=this.width;self.p.filterModel.push(tmpFil);}});}else{$.each(self.p.filterModel,function(i,n){for(var j=0;j<gcolMod.length;j++){if(this.name==gcolMod[j].name){this.index=gcolMod[j].index||this.name;break;}}
if(!this.index){this.index=this.name;}});}}else{alert("Could not get grid colModel");return;}
var triggerSearch=function(){var sdata={},j=0,v;var gr=$(self.p.gridid)[0],nm;gr.p.searchdata={};if($.isFunction(self.p.beforeSearch)){self.p.beforeSearch();}
$.each(self.p.filterModel,function(i,n){nm=this.index;switch(this.stype){case'select':v=$("select[name="+nm+"]",self).val();if(v){sdata[nm]=v;if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).addClass("dirty-cell");}
j++;}else{if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).removeClass("dirty-cell");}
try{delete gr.p.postData[this.index];}catch(e){}}
break;default:v=$("input[name="+nm+"]",self).val();if(v){sdata[nm]=v;if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).addClass("dirty-cell");}
j++;}else{if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).removeClass("dirty-cell");}
try{delete gr.p.postData[this.index];}catch(e){}}}});var sd=j>0?true:false;$.extend(gr.p.postData,sdata);var saveurl;if(self.p.url){saveurl=$(gr).jqGrid("getGridParam",'url');$(gr).jqGrid("setGridParam",{url:self.p.url});}
$(gr).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]);if(saveurl){$(gr).jqGrid("setGridParam",{url:saveurl});}
if($.isFunction(self.p.afterSearch)){self.p.afterSearch();}};var clearSearch=function(){var sdata={},v,j=0;var gr=$(self.p.gridid)[0],nm;if($.isFunction(self.p.beforeClear)){self.p.beforeClear();}
$.each(self.p.filterModel,function(i,n){nm=this.index;v=(this.defval)?this.defval:"";if(!this.stype){this.stype='text';}
switch(this.stype){case'select':var v1;$("select[name="+nm+"] option",self).each(function(i){if(i===0){this.selected=true;}
if($(this).text()==v){this.selected=true;v1=$(this).val();return false;}});if(v1){sdata[nm]=v1;if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).addClass("dirty-cell");}
j++;}else{if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).removeClass("dirty-cell");}
try{delete gr.p.postData[this.index];}catch(e){}}
break;case'text':$("input[name="+nm+"]",self).val(v);if(v){sdata[nm]=v;if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).addClass("dirty-cell");}
j++;}else{if(self.p.marksearched){$("#jqgh_"+this.name,gr.grid.hDiv).removeClass("dirty-cell");}
try{delete gr.p.postData[this.index];}catch(e){}}
break;}});var sd=j>0?true:false;$.extend(gr.p.postData,sdata);var saveurl;if(self.p.url){saveurl=$(gr).jqGrid("getGridParam",'url');$(gr).jqGrid("setGridParam",{url:self.p.url});}
$(gr).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]);if(saveurl){$(gr).jqGrid("setGridParam",{url:saveurl});}
if($.isFunction(self.p.afterClear)){self.p.afterClear();}};var formFill=function(){var tr=document.createElement("tr");var tr1,sb,cb,tl,td;if(self.p.formtype=='horizontal'){$(tbl).append(tr);}
$.each(self.p.filterModel,function(i,n){tl=document.createElement("td");$(tl).append("<label for='"+this.name+"'>"+this.label+"</label>");td=document.createElement("td");var $t=this;if(!this.stype){this.stype='text';}
switch(this.stype)
{case"select":if(this.surl){$(td).load(this.surl,function(){if($t.defval){$("select",this).val($t.defval);}
$("select",this).attr({name:$t.index||$t.name,id:"sg_"+$t.name});if($t.sopt){$("select",this).attr($t.sopt);}
if(self.p.gridToolbar===true&&$t.width){$("select",this).width($t.width);}
if(self.p.autosearch===true){$("select",this).change(function(e){triggerSearch();return false;});}});}else{if($t.sopt.value){var oSv=$t.sopt.value;var elem=document.createElement("select");$(elem).attr({name:$t.index||$t.name,id:"sg_"+$t.name}).attr($t.sopt);var so,sv,ov;if(typeof oSv==="string"){so=oSv.split(";");for(var k=0;k<so.length;k++){sv=so[k].split(":");ov=document.createElement("option");ov.value=sv[0];ov.innerHTML=sv[1];if(sv[1]==$t.defval){ov.selected="selected";}
elem.appendChild(ov);}}else if(typeof oSv==="object"){for(var key in oSv){if(oSv.hasOwnProperty(key)){i++;ov=document.createElement("option");ov.value=key;ov.innerHTML=oSv[key];if(oSv[key]==$t.defval){ov.selected="selected";}
elem.appendChild(ov);}}}
if(self.p.gridToolbar===true&&$t.width){$(elem).width($t.width);}
$(td).append(elem);if(self.p.autosearch===true){$(elem).change(function(e){triggerSearch();return false;});}}}
break;case'text':var df=this.defval?this.defval:"";$(td).append("<input type='text' name='"+(this.index||this.name)+"' id='sg_"+this.name+"' value='"+df+"'/>");if($t.sopt){$("input",td).attr($t.sopt);}
if(self.p.gridToolbar===true&&$t.width){if($.browser.msie){$("input",td).width($t.width-4);}else{$("input",td).width($t.width-2);}}
if(self.p.autosearch===true){$("input",td).keypress(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){triggerSearch();return false;}
return this;});}
break;}
if(self.p.formtype=='horizontal'){if(self.p.gridToolbar===true&&self.p.gridNames===false){$(tr).append(td);}else{$(tr).append(tl).append(td);}
$(tr).append(td);}else{tr1=document.createElement("tr");$(tr1).append(tl).append(td);$(tbl).append(tr1);}});td=document.createElement("td");if(self.p.enableSearch===true){sb="<input type='button' id='sButton' class='"+self.p.buttonclass+"' value='"+self.p.searchButton+"'/>";$(td).append(sb);$("input#sButton",td).click(function(){triggerSearch();return false;});}
if(self.p.enableClear===true){cb="<input type='button' id='cButton' class='"+self.p.buttonclass+"' value='"+self.p.clearButton+"'/>";$(td).append(cb);$("input#cButton",td).click(function(){clearSearch();return false;});}
if(self.p.enableClear===true||self.p.enableSearch===true){if(self.p.formtype=='horizontal'){$(tr).append(td);}else{tr1=document.createElement("tr");$(tr1).append("<td>&#160;</td>").append(td);$(tbl).append(tr1);}}};var frm=$("<form name='SearchForm' style=display:inline;' class='"+this.p.formclass+"'></form>");var tbl=$("<table class='"+this.p.tableclass+"' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");$(frm).append(tbl);formFill();$(this).append(frm);this.triggerSearch=triggerSearch;this.clearSearch=clearSearch;});},filterToolbar:function(p){p=$.extend({autosearch:true,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:'',stringResult:false,groupOp:'AND'},p||{});return this.each(function(){var $t=this;var triggerToolbar=function(){var sdata={},j=0,v,nm,sopt={};$.each($t.p.colModel,function(i,n){nm=this.index||this.name;var so=(this.searchoptions&&this.searchoptions.sopt)?this.searchoptions.sopt[0]:"bw";switch(this.stype){case'select':v=$("select[name="+nm+"]",$t.grid.hDiv).val();if(v){sdata[nm]=v;sopt[nm]=so;j++;}else{try{delete $t.p.postData[nm];}catch(e){}}
break;case'text':v=$("input[name="+nm+"]",$t.grid.hDiv).val();if(v){sdata[nm]=v;sopt[nm]=so;j++;}else{try{delete $t.p.postData[nm];}catch(e){}}
break;}});var sd=j>0?true:false;if(!p.stringResult){$.extend($t.p.postData,sdata);}else{var ruleGroup="{\"groupOp\":\""+p.groupOp+"\",\"rules\":[";var gi=0;$.each(sdata,function(i,n){if(gi>0){ruleGroup+=",";}
ruleGroup+="{\"field\":\""+i+"\",";ruleGroup+="\"op\":\""+sopt[i]+"\",";ruleGroup+="\"data\":\""+n+"\"}";gi++;});ruleGroup+="]}";$.extend($t.p.postData,{filters:ruleGroup});}
var saveurl;if($t.p.searchurl){saveurl=$t.p.url;$($t).jqGrid("setGridParam",{url:$t.p.searchurl});}
var bsr=false;if($.isFunction(p.beforeSearch)){bsr=p.beforeSearch.call($t);}
if(!bsr){$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]);}
if(saveurl){$($t).jqGrid("setGridParam",{url:saveurl});}
if($.isFunction(p.afterSearch)){p.afterSearch();}};var clearToolbar=function(trigger){var sdata={},v,j=0,nm;trigger=(typeof trigger!='boolean')?true:trigger;$.each($t.p.colModel,function(i,n){v=(this.searchoptions&&this.searchoptions.defaultValue)?this.searchoptions.defaultValue:"";nm=this.index||this.name;switch(this.stype){case'select':var v1;$("select[name="+nm+"] option",$t.grid.hDiv).each(function(i){if(i===0){this.selected=true;}
if($(this).text()==v){this.selected=true;v1=$(this).val();return false;}});if(v1){sdata[nm]=v1;j++;}else{try{delete $t.p.postData[nm];}catch(e){}}
break;case'text':$("input[name="+nm+"]",$t.grid.hDiv).val(v);if(v){sdata[nm]=v;j++;}else{try{delete $t.p.postData[nm];}catch(e){}}
break;}});var sd=j>0?true:false;if(!p.stringResult){$.extend($t.p.postData,sdata);}else{var ruleGroup="{\"groupOp\":\""+p.groupOp+"\",\"rules\":[";var gi=0;$.each(sdata,function(i,n){if(gi>0){ruleGroup+=",";}
ruleGroup+="{\"field\":\""+i+"\",";ruleGroup+="\"op\":\""+"eq"+"\",";ruleGroup+="\"data\":\""+n+"\"}";gi++;});ruleGroup+="]}";$.extend($t.p.postData,{filters:ruleGroup});}
var saveurl;if($t.p.searchurl){saveurl=$t.p.url;$($t).jqGrid("setGridParam",{url:$t.p.searchurl});}
var bcv=false;if($.isFunction(p.beforeClear)){bcv=p.beforeClear.call($t);}
if(!bcv){if(trigger){$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]);}}
if(saveurl){$($t).jqGrid("setGridParam",{url:saveurl});}
if($.isFunction(p.afterClear)){p.afterClear();}};var toggleToolbar=function(){var trow=$("tr.ui-search-toolbar",$t.grid.hDiv);if(trow.css("display")=='none'){trow.show();}
else{trow.hide();}};function bindEvents(selector,events){var jElem=$(selector);if(jElem[0]){jQuery.each(events,function(){if(this.data!==undefined){jElem.bind(this.type,this.data,this.fn);}else{jElem.bind(this.type,this.fn);}});}}
var tr=$("<tr class='ui-search-toolbar' role='rowheader'></tr>");var timeoutHnd;$.each($t.p.colModel,function(i,n){var cm=this,thd,th,soptions,surl,self;th=$("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+$t.p.direction+"'></th>");thd=$("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>");if(this.hidden===true){$(th).css("display","none");}
this.search=this.search===false?false:true;if(typeof this.stype=='undefined'){this.stype='text';}
soptions=$.extend({},this.searchoptions||{});if(this.search){switch(this.stype)
{case"select":surl=this.surl||soptions.dataUrl;if(surl){self=thd;$.ajax($.extend({url:surl,dataType:"html",complete:function(res,status){if(soptions.buildSelect!==undefined){var d=soptions.buildSelect(res);if(d){$(self).append(d);}}else{$(self).append(res.responseText);}
if(soptions.defaultValue){$("select",self).val(soptions.defaultValue);}
$("select",self).attr({name:cm.index||cm.name,id:"gs_"+cm.name});if(soptions.attr){$("select",self).attr(soptions.attr);}
$("select",self).css({width:"100%"});if(soptions.dataInit!==undefined){soptions.dataInit($("select",self)[0]);}
if(soptions.dataEvents!==undefined){bindEvents($("select",self)[0],soptions.dataEvents);}
if(p.autosearch===true){$("select",self).change(function(e){triggerToolbar();return false;});}
res=null;}},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));}else{var oSv;if(cm.searchoptions&&cm.searchoptions.value){oSv=cm.searchoptions.value;}else if(cm.editoptions&&cm.editoptions.value){oSv=cm.editoptions.value;}
if(oSv){var elem=document.createElement("select");elem.style.width="100%";$(elem).attr({name:cm.index||cm.name,id:"gs_"+cm.name});var so,sv,ov;if(typeof oSv==="string"){so=oSv.split(";");for(var k=0;k<so.length;k++){sv=so[k].split(":");ov=document.createElement("option");ov.value=sv[0];ov.innerHTML=sv[1];elem.appendChild(ov);}}else if(typeof oSv==="object"){for(var key in oSv){if(oSv.hasOwnProperty(key)){ov=document.createElement("option");ov.value=key;ov.innerHTML=oSv[key];elem.appendChild(ov);}}}
if(soptions.defaultValue){$(elem).val(soptions.defaultValue);}
if(soptions.attr){$(elem).attr(soptions.attr);}
if(soptions.dataInit!==undefined){soptions.dataInit(elem);}
if(soptions.dataEvents!==undefined){bindEvents(elem,soptions.dataEvents);}
$(thd).append(elem);if(p.autosearch===true){$(elem).change(function(e){triggerToolbar();return false;});}}}
break;case'text':var df=soptions.defaultValue?soptions.defaultValue:"";$(thd).append("<input type='text' style='width:95%;padding:0px;' name='"+(cm.index||cm.name)+"' id='gs_"+cm.name+"' value='"+df+"'/>");if(soptions.attr){$("input",thd).attr(soptions.attr);}
if(soptions.dataInit!==undefined){soptions.dataInit($("input",thd)[0]);}
if(soptions.dataEvents!==undefined){bindEvents($("input",thd)[0],soptions.dataEvents);}
if(p.autosearch===true){if(p.searchOnEnter){$("input",thd).keypress(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){triggerToolbar();return false;}
return this;});}else{$("input",thd).keydown(function(e){var key=e.which;switch(key){case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:if(timeoutHnd){clearTimeout(timeoutHnd);}
timeoutHnd=setTimeout(function(){triggerToolbar();},500);}});}}
break;}}
$(th).append(thd);$(tr).append(th);});$("table thead",$t.grid.hDiv).append(tr);this.triggerToolbar=triggerToolbar;this.clearToolbar=clearToolbar;this.toggleToolbar=toggleToolbar;});}});})(jQuery);;(function($){$.jgrid.extend({getPostData:function(){var $t=this[0];if(!$t.grid){return;}
return $t.p.postData;},setPostData:function(newdata){var $t=this[0];if(!$t.grid){return;}
if(typeof(newdata)==='object'){$t.p.postData=newdata;}
else{alert("Error: cannot add a non-object postData value. postData unchanged.");}},appendPostData:function(newdata){var $t=this[0];if(!$t.grid){return;}
if(typeof(newdata)==='object'){$.extend($t.p.postData,newdata);}
else{alert("Error: cannot append a non-object postData value. postData unchanged.");}},setPostDataItem:function(key,val){var $t=this[0];if(!$t.grid){return;}
$t.p.postData[key]=val;},getPostDataItem:function(key){var $t=this[0];if(!$t.grid){return;}
return $t.p.postData[key];},removePostDataItem:function(key){var $t=this[0];if(!$t.grid){return;}
delete $t.p.postData[key];},getUserData:function(){var $t=this[0];if(!$t.grid){return;}
return $t.p.userData;},getUserDataItem:function(key){var $t=this[0];if(!$t.grid){return;}
return $t.p.userData[key];}});})(jQuery);function tableToGrid(selector,options){jQuery(selector).each(function(){if(this.grid){return;}
jQuery(this).width("99%");var w=jQuery(this).width();var inputCheckbox=jQuery('input[type=checkbox]:first',jQuery(this));var inputRadio=jQuery('input[type=radio]:first',jQuery(this));var selectMultiple=inputCheckbox.length>0;var selectSingle=!selectMultiple&&inputRadio.length>0;var selectable=selectMultiple||selectSingle;var inputName=inputCheckbox.attr("name")||inputRadio.attr("name");var colModel=[];var colNames=[];jQuery('th',jQuery(this)).each(function(){if(colModel.length===0&&selectable){colModel.push({name:'__selection__',index:'__selection__',width:0,hidden:true});colNames.push('__selection__');}else{colModel.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(' ').join('_'),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(' ').join('_'),width:jQuery(this).width()||150});colNames.push(jQuery(this).html());}});var data=[];var rowIds=[];var rowChecked=[];jQuery('tbody > tr',jQuery(this)).each(function(){var row={};var rowPos=0;jQuery('td',jQuery(this)).each(function(){if(rowPos===0&&selectable){var input=jQuery('input',jQuery(this));var rowId=input.attr("value");rowIds.push(rowId||data.length);if(input.attr("checked")){rowChecked.push(rowId);}
row[colModel[rowPos].name]=input.attr("value");}else{row[colModel[rowPos].name]=jQuery(this).html();}
rowPos++;});if(rowPos>0){data.push(row);}});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid($.extend({datatype:"local",width:w,colNames:colNames,colModel:colModel,multiselect:selectMultiple},options||{}));var a;for(a=0;a<data.length;a++){var id=null;if(rowIds.length>0){id=rowIds[a];if(id&&id.replace){id=encodeURIComponent(id).replace(/[.\-%]/g,"_");}}
if(id===null){id=a+1;}
jQuery(this).jqGrid("addRowData",id,data[a]);}
for(a=0;a<rowChecked.length;a++){jQuery(this).jqGrid("setSelection",rowChecked[a]);}});};;(function($){$.jgrid.extend({setColumns:function(p){p=$.extend({top:0,left:0,width:200,height:'auto',dataheight:'auto',modal:false,drag:true,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:true,ShrinkToFit:false,jqModal:false,saveicon:[true,"left","ui-icon-disk"],closeicon:[true,"left","ui-icon-close"],onClose:null,colnameview:true,closeAfterSubmit:true,updateAfterCheck:false,recreateForm:false},$.jgrid.col,p||{});return this.each(function(){var $t=this;if(!$t.grid){return;}
var onBeforeShow=typeof p.beforeShowForm==='function'?true:false;var onAfterShow=typeof p.afterShowForm==='function'?true:false;var onAfterSubmit=typeof p.afterSubmitForm==='function'?true:false;var gID=$t.p.id,dtbl="ColTbl_"+gID,IDs={themodal:'colmod'+gID,modalhead:'colhd'+gID,modalcontent:'colcnt'+gID,scrollelm:dtbl};if(p.recreateForm===true&&$("#"+IDs.themodal).html()!=null){$("#"+IDs.themodal).remove();}
if($("#"+IDs.themodal).html()!=null){if(onBeforeShow){p.beforeShowForm($("#"+dtbl));}
viewModal("#"+IDs.themodal,{gbox:"#gbox_"+gID,jqm:p.jqModal,jqM:false,modal:p.modal});if(onAfterShow){p.afterShowForm($("#"+dtbl));}}else{var dh=isNaN(p.dataheight)?p.dataheight:p.dataheight+"px";var formdata="<div id='"+dtbl+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+dh+";'>";formdata+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>";for(i=0;i<this.p.colNames.length;i++){if(!$t.p.colModel[i].hidedlg){formdata+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+
((this.p.colModel[i].hidden===false)?"checked":"")+"/>"+"<label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+((p.colnameview)?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>";}}
formdata+="</tbody></table></div>"
var bS=!p.updateAfterCheck?"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+p.bSubmit+"</a>":"",bC="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+p.bCancel+"</a>";formdata+="<table border='0' class='EditTable' id='"+dtbl+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+bS+"&#160;"+bC+"</td></tr></tbody></table>";p.gbox="#gbox_"+gID;createModal(IDs,formdata,p,"#gview_"+$t.p.id,$("#gview_"+$t.p.id)[0]);if(p.saveicon[0]==true){$("#dData","#"+dtbl+"_2").addClass(p.saveicon[1]=="right"?'fm-button-icon-right':'fm-button-icon-left').append("<span class='ui-icon "+p.saveicon[2]+"'></span>");}
if(p.closeicon[0]==true){$("#eData","#"+dtbl+"_2").addClass(p.closeicon[1]=="right"?'fm-button-icon-right':'fm-button-icon-left').append("<span class='ui-icon "+p.closeicon[2]+"'></span>");}
if(!p.updateAfterCheck){$("#dData","#"+dtbl+"_2").click(function(e){for(i=0;i<$t.p.colModel.length;i++){if(!$t.p.colModel[i].hidedlg){var nm=$t.p.colModel[i].name.replace(".","\\.");if($("#col_"+nm,"#"+dtbl).attr("checked")){$($t).jqGrid("showCol",$t.p.colModel[i].name);$("#col_"+nm,"#"+dtbl).attr("defaultChecked",true);}else{$($t).jqGrid("hideCol",$t.p.colModel[i].name);$("#col_"+nm,"#"+dtbl).attr("defaultChecked","");}}}
if(p.ShrinkToFit===true){$($t).jqGrid("setGridWidth",$t.grid.width-0.001,true);}
if(p.closeAfterSubmit)hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:p.onClose});if(onAfterSubmit){p.afterSubmitForm($("#"+dtbl));}
return false;});}else{$(":input","#"+dtbl).click(function(e){var cn=this.id.substr(4);if(cn){if(this.checked){$($t).jqGrid("showCol",cn);}else{$($t).jqGrid("hideCol",cn);}
if(p.ShrinkToFit===true){$($t).jqGrid("setGridWidth",$t.grid.width-0.001,true);}}
return this;});}
$("#eData","#"+dtbl+"_2").click(function(e){hideModal("#"+IDs.themodal,{gb:"#gbox_"+gID,jqm:p.jqModal,onClose:p.onClose});return false;});$("#dData, #eData","#"+dtbl+"_2").hover(function(){$(this).addClass('ui-state-hover');},function(){$(this).removeClass('ui-state-hover');});if(onBeforeShow){p.beforeShowForm($("#"+dtbl));}
viewModal("#"+IDs.themodal,{gbox:"#gbox_"+gID,jqm:p.jqModal,jqM:true,modal:p.modal});if(onAfterShow){p.afterShowForm($("#"+dtbl));}}});}});})(jQuery);;(function($){$.jgrid.extend({jqGridImport:function(o){o=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},o||{});return this.each(function(){var $t=this;var XmlConvert=function(xml,o){var cnfg=$(o.xmlGrid.config,xml)[0];var xmldata=$(o.xmlGrid.data,xml)[0],jstr,jstr1;if(xmlJsonClass.xml2json&&$.jgrid.parse){jstr=xmlJsonClass.xml2json(cnfg," ");jstr=$.jgrid.parse(jstr);for(var key in jstr){if(jstr.hasOwnProperty(key)){jstr1=jstr[key];}}
if(xmldata){var svdatatype=jstr.grid.datatype;jstr.grid.datatype='xmlstring';jstr.grid.datastr=xml;$($t).jqGrid(jstr1).jqGrid("setGridParam",{datatype:svdatatype});}else{$($t).jqGrid(jstr1);}
jstr=null;jstr1=null;}else{alert("xml2json or parse are not present");}};var JsonConvert=function(jsonstr,o){if(jsonstr&&typeof jsonstr=='string'){var json=$.jgrid.parse(jsonstr);var gprm=json[o.jsonGrid.config];var jdata=json[o.jsonGrid.data];if(jdata){var svdatatype=gprm.datatype;gprm.datatype='jsonstring';gprm.datastr=jdata;$($t).jqGrid(gprm).jqGrid("setGridParam",{datatype:svdatatype});}else{$($t).jqGrid(gprm);}}};switch(o.imptype){case'xml':$.ajax($.extend({url:o.impurl,type:o.mtype,data:o.impData,dataType:"xml",complete:function(xml,stat){if(stat=='success'){XmlConvert(xml.responseXML,o);if($.isFunction(o.importComplete)){o.importComplete(xml);}}
xml=null;}},o.ajaxOptions));break;case'xmlstring':if(o.impstring&&typeof o.impstring=='string'){var xmld=$.jgrid.stringToDoc(o.impstring);if(xmld){XmlConvert(xmld,o);if($.isFunction(o.importComplete)){o.importComplete(xmld);}
o.impstring=null;}
xmld=null;}
break;case'json':$.ajax($.extend({url:o.impurl,type:o.mtype,data:o.impData,dataType:"json",complete:function(json,stat){if(stat=='success'){JsonConvert(json.responseText,o);if($.isFunction(o.importComplete)){o.importComplete(json);}}
json=null;}},o.ajaxOptions));break;case'jsonstring':if(o.impstring&&typeof o.impstring=='string'){JsonConvert(o.impstring,o);if($.isFunction(o.importComplete)){o.importComplete(o.impstring);}
o.impstring=null;}
break;}});},jqGridExport:function(o){o=$.extend({exptype:"xmlstring",root:"grid",ident:"\t"},o||{});var ret=null;this.each(function(){if(!this.grid){return;}
var gprm=$.extend({},$(this).jqGrid("getGridParam"));if(gprm.rownumbers){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1);}
if(gprm.multiselect){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1);}
if(gprm.subGrid){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1);}
gprm.knv=null;if(gprm.treeGrid){for(var key in gprm.treeReader){if(gprm.treeReader.hasOwnProperty(key)){gprm.colNames.splice(gprm.colNames.length-1);gprm.colModel.splice(gprm.colModel.length-1);}}}
switch(o.exptype){case'xmlstring':ret="<"+o.root+">"+xmlJsonClass.json2xml(gprm,o.ident)+"</"+o.root+">";break;case'jsonstring':ret="{"+xmlJsonClass.toJson(gprm,o.root,o.ident)+"}";if(gprm.postData.filters!==undefined){ret=ret.replace(/filters":"/,'filters":');ret=ret.replace(/}]}"/,'}]}');}
break;}});return ret;},excelExport:function(o){o=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},o||{});return this.each(function(){$t=this;if(!this.grid){return;}
if(o.exptype=="remote"){var pdata=$.extend({},this.p.postData);pdata[o.oper]=o.tag;var params=jQuery.param(pdata);window.location=o.url+"?"+params;}});}});})(jQuery);;(function($){if($.browser.msie&&$.browser.version==8){$.expr[":"].hidden=function(elem){return elem.offsetWidth===0||elem.offsetHeight===0||elem.style.display=="none";};}
$.jgrid._multiselect=false;if($.ui){if($.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(item,selected){var ret=setSelected.call(this,item,selected);if(selected&&this.selectedList){var elt=this.element;this.selectedList.find('li').each(function(){if($(this).data('optionLink')){$(this).data('optionLink').remove().appendTo(elt);}});}
return ret;};}
if($.ui.multiselect.prototype.destroy){$.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();if($.Widget===undefined){$.widget.prototype.destroy.apply(this,arguments);}else{$.Widget.prototype.destroy.apply(this,arguments);}};}
$.jgrid._multiselect=true;}}
$.jgrid.extend({sortableColumns:function(tblrow)
{return this.each(function(){var ts=this;function start(){ts.p.disableClick=true;}
var sortable_opts={"tolerance":"pointer","axis":"x","scrollSensitivity":"1","items":'>th:not(:has(#jqgh_cb,#jqgh_rn,#jqgh_subgrid),:hidden)',"placeholder":{element:function(item){var el=$(document.createElement(item[0].nodeName)).addClass(item[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return el;},update:function(self,p){p.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css('paddingTop')||0,10)-parseInt(self.currentItem.css('paddingBottom')||0,10));p.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css('paddingLeft')||0,10)-parseInt(self.currentItem.css('paddingRight')||0,10));}},"update":function(event,ui){var p=$(ui.item).parent();var th=$(">th",p);var colModel=ts.p.colModel;var cmMap={};$.each(colModel,function(i){cmMap[this.name]=i;});var permutation=[];th.each(function(i){var id=$(">div",this).get(0).id.replace(/^jqgh_/,"");if(id in cmMap){permutation.push(cmMap[id]);}});$(ts).jqGrid("remapColumns",permutation,true,true);if($.isFunction(ts.p.sortable.update)){ts.p.sortable.update(permutation);}
setTimeout(function(){ts.p.disableClick=false;},50);}};if(ts.p.sortable.options){$.extend(sortable_opts,ts.p.sortable.options);}else if($.isFunction(ts.p.sortable)){ts.p.sortable={"update":ts.p.sortable};}
if(sortable_opts.start){var s=sortable_opts.start;sortable_opts.start=function(e,ui){start();s.call(this,e,ui);};}else{sortable_opts.start=start;}
if(ts.p.sortable.exclude){sortable_opts.items+=":not("+ts.p.sortable.exclude+")";}
tblrow.sortable(sortable_opts).data("sortable").floating=true;});},columnChooser:function(opts){var self=this;if($("#colchooser_"+self[0].p.id).length){return;}
var selector=$('<div id="colchooser_'+self[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');var select=$('select',selector);opts=$.extend({"width":420,"height":240,"classname":null,"done":function(perm){if(perm){self.jqGrid("remapColumns",perm,true);}},"msel":"multiselect","dlog":"dialog","dlog_opts":function(opts){var buttons={};buttons[opts.bSubmit]=function(){opts.apply_perm();opts.cleanup(false);};buttons[opts.bCancel]=function(){opts.cleanup(true);};return{"buttons":buttons,"close":function(){opts.cleanup(true);},"modal":false,"resizable":false,"width":opts.width+20};},"apply_perm":function(){$('option',select).each(function(i){if(this.selected){self.jqGrid("showCol",colModel[this.value].name);}else{self.jqGrid("hideCol",colModel[this.value].name);}});var perm=[];$('option[selected]',select).each(function(){perm.push(parseInt(this.value,10));});$.each(perm,function(){delete colMap[colModel[parseInt(this,10)].name];});$.each(colMap,function(){var ti=parseInt(this,10);perm=insert(perm,ti,ti);});if(opts.done){opts.done.call(self,perm);}},"cleanup":function(calldone){call(opts.dlog,selector,'destroy');call(opts.msel,select,'destroy');selector.remove();if(calldone&&opts.done){opts.done.call(self);}},"msel_opts":{}},$.jgrid.col,opts||{});if($.ui){if($.ui.multiselect){if(opts.msel=="multiselect"){if(!$.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return;}
opts.msel_opts=$.extend($.ui.multiselect.defaults,opts.msel_opts);}}}
if(opts.caption){selector.attr("title",opts.caption);}
if(opts.classname){selector.addClass(opts.classname);select.addClass(opts.classname);}
if(opts.width){$(">div",selector).css({"width":opts.width,"margin":"0 auto"});select.css("width",opts.width);}
if(opts.height){$(">div",selector).css("height",opts.height);select.css("height",opts.height-10);}
var colModel=self.jqGrid("getGridParam","colModel");var colNames=self.jqGrid("getGridParam","colNames");var colMap={},fixedCols=[];select.empty();$.each(colModel,function(i){colMap[this.name]=i;if(this.hidedlg){if(!this.hidden){fixedCols.push(i);}
return;}
select.append("<option value='"+i+"' "+
(this.hidden?"":"selected='selected'")+">"+colNames[i]+"</option>");});function insert(perm,i,v){if(i>=0){var a=perm.slice();var b=a.splice(i,Math.max(perm.length-i,i));if(i>perm.length){i=perm.length;}
a[i]=v;return a.concat(b);}}
function call(fn,obj){if(!fn){return;}
if(typeof fn=='string'){if($.fn[fn]){$.fn[fn].apply(obj,$.makeArray(arguments).slice(2));}}else if($.isFunction(fn)){fn.apply(obj,$.makeArray(arguments).slice(2));}}
var dopts=$.isFunction(opts.dlog_opts)?opts.dlog_opts.call(self,opts):opts.dlog_opts;call(opts.dlog,selector,dopts);var mopts=$.isFunction(opts.msel_opts)?opts.msel_opts.call(self,opts):opts.msel_opts;call(opts.msel,select,mopts);},sortableRows:function(opts){return this.each(function(){var $t=this;if(!$t.grid){return;}
if($t.p.treeGrid){return;}
if($.fn.sortable){opts=$.extend({"cursor":"move","axis":"y","items":".jqgrow"},opts||{});if(opts.start&&$.isFunction(opts.start)){opts._start_=opts.start;delete opts.start;}else{opts._start_=false;}
if(opts.update&&$.isFunction(opts.update)){opts._update_=opts.update;delete opts.update;}else{opts._update_=false;}
opts.start=function(ev,ui){$(ui.item).css("border-width","0px");$("td",ui.item).each(function(i){this.style.width=$t.grid.cols[i].style.width;});if($t.p.subGrid){var subgid=$(ui.item).attr("id");try{$($t).jqGrid('collapseSubGridRow',subgid);}catch(e){}}
if(opts._start_){opts._start_.apply(this,[ev,ui]);}};opts.update=function(ev,ui){$(ui.item).css("border-width","");$t.updateColumns();if($t.p.rownumbers===true){$("td.jqgrid-rownum",$t.rows).each(function(i){$(this).html(i+1);});}
if(opts._update_){opts._update_.apply(this,[ev,ui]);}};$("tbody:first",$t).sortable(opts);$("tbody:first",$t).disableSelection();}});},gridDnD:function(opts){return this.each(function(){var $t=this;if(!$t.grid){return;}
if($t.p.treeGrid){return;}
if(!$.fn.draggable||!$.fn.droppable){return;}
function updateDnD()
{var datadnd=$.data($t,"dnd");$("tr.jqgrow:not(.ui-draggable)",$t).draggable($.isFunction(datadnd.drag)?datadnd.drag.call($($t),datadnd):datadnd.drag);}
var appender="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if($("#jqgrid_dnd").html()===null){$('body').append(appender);}
if(typeof opts=='string'&&opts=='updateDnD'&&$t.p.jqgdnd===true){updateDnD();return;}
opts=$.extend({"drag":function(opts){return $.extend({start:function(ev,ui){if($t.p.subGrid){var subgid=$(ui.helper).attr("id");try{$($t).jqGrid('collapseSubGridRow',subgid);}catch(e){}}
for(var i=0;i<$.data($t,"dnd").connectWith.length;i++){if($($.data($t,"dnd").connectWith[i]).jqGrid('getGridParam','reccount')=="0"){$($.data($t,"dnd").connectWith[i]).jqGrid('addRowData','jqg_empty_row',{});}}
ui.helper.addClass("ui-state-highlight");$("td",ui.helper).each(function(i){this.style.width=$t.grid.headers[i].width+"px";});if(opts.onstart&&$.isFunction(opts.onstart)){opts.onstart.call($($t),ev,ui);}},stop:function(ev,ui){if(ui.helper.dropped){var ids=$(ui.helper).attr("id");$($t).jqGrid('delRowData',ids);}
for(var i=0;i<$.data($t,"dnd").connectWith.length;i++){$($.data($t,"dnd").connectWith[i]).jqGrid('delRowData','jqg_empty_row');}
if(opts.onstop&&$.isFunction(opts.onstop)){opts.onstop.call($($t),ev,ui);}}},opts.drag_opts||{});},"drop":function(opts){return $.extend({accept:function(d){var tid=$(d).closest("table.ui-jqgrid-btable");if($.data(tid[0],"dnd")!==undefined){var cn=$.data(tid[0],"dnd").connectWith;return $.inArray('#'+this.id,cn)!=-1?true:false;}
return d;},drop:function(ev,ui){var accept=$(ui.draggable).attr("id");var getdata=$('#'+$t.id).jqGrid('getRowData',accept);if(!opts.dropbyname){var j=0,tmpdata={},dropname;var dropmodel=$("#"+this.id).jqGrid('getGridParam','colModel');try{for(var key in getdata){if(getdata.hasOwnProperty(key)&&dropmodel[j]){dropname=dropmodel[j].name;tmpdata[dropname]=getdata[key];}
j++;}
getdata=tmpdata;}catch(e){}}
ui.helper.dropped=true;if(opts.beforedrop&&$.isFunction(opts.beforedrop)){var datatoinsert=opts.beforedrop.call(this,ev,ui,getdata,$('#'+$t.id),$(this));if(typeof datatoinsert!="undefined"&&datatoinsert!==null&&typeof datatoinsert=="object"){getdata=datatoinsert;}}
if(ui.helper.dropped){var grid;if(opts.autoid){if($.isFunction(opts.autoid)){grid=opts.autoid.call(this,getdata);}else{grid=Math.ceil(Math.random()*1000);grid=opts.autoidprefix+grid;}}
$("#"+this.id).jqGrid('addRowData',grid,getdata,opts.droppos);}
if(opts.ondrop&&$.isFunction(opts.ondrop)){opts.ondrop.call(this,ev,ui,getdata);}}},opts.drop_opts||{});},"onstart":null,"onstop":null,"beforedrop":null,"ondrop":null,"drop_opts":{"activeClass":"ui-state-active","hoverClass":"ui-state-hover"},"drag_opts":{"revert":"invalid","helper":"clone","cursor":"move","appendTo":"#jqgrid_dnd","zIndex":5000},"dropbyname":false,"droppos":"first","autoid":true,"autoidprefix":"dnd_"},opts||{});if(!opts.connectWith){return;}
opts.connectWith=opts.connectWith.split(",");opts.connectWith=$.map(opts.connectWith,function(n){return $.trim(n);});$.data($t,"dnd",opts);if($t.p.reccount!="0"&&!$t.p.jqgdnd){updateDnD();}
$t.p.jqgdnd=true;for(var i=0;i<opts.connectWith.length;i++){var cn=opts.connectWith[i];$(cn).droppable($.isFunction(opts.drop)?opts.drop.call($($t),opts):opts.drop);}});},gridResize:function(opts){return this.each(function(){var $t=this;if(!$t.grid||!$.fn.resizable){return;}
opts=$.extend({},opts||{});if(opts.alsoResize){opts._alsoResize_=opts.alsoResize;delete opts.alsoResize;}else{opts._alsoResize_=false;}
if(opts.stop&&$.isFunction(opts.stop)){opts._stop_=opts.stop;delete opts.stop;}else{opts._stop_=false;}
opts.stop=function(ev,ui){$($t).jqGrid('setGridParam',{height:$("#gview_"+$t.p.id+" .ui-jqgrid-bdiv").height()});$($t).jqGrid('setGridWidth',ui.size.width,opts.shrinkToFit);if(opts._stop_){opts._stop_.call($t,ev,ui);}};if(opts._alsoResize_){var optstest="{\'#gview_"+$t.p.id+" .ui-jqgrid-bdiv\':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval('('+optstest+')');}else{opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+$t.p.id);}
delete opts._alsoResize_;$("#gbox_"+$t.p.id).resizable(opts);});}});})(jQuery);;(function($){$.fmatter={};$.fn.fmatter=function(formatType,cellval,opts,rwd,act){opts=$.extend({},$.jgrid.formatter,opts);return fireFormatter(formatType,cellval,opts,rwd,act);};$.fmatter.util={NumberFormat:function(nData,opts){if(!isNumber(nData)){nData*=1;}
if(isNumber(nData)){var bNegative=(nData<0);var sOutput=nData+"";var sDecimalSeparator=(opts.decimalSeparator)?opts.decimalSeparator:".";var nDotIndex;if(isNumber(opts.decimalPlaces)){var nDecimalPlaces=opts.decimalPlaces;var nDecimal=Math.pow(10,nDecimalPlaces);sOutput=Math.round(nData*nDecimal)/nDecimal+"";nDotIndex=sOutput.lastIndexOf(".");if(nDecimalPlaces>0){if(nDotIndex<0){sOutput+=sDecimalSeparator;nDotIndex=sOutput.length-1;}
else if(sDecimalSeparator!=="."){sOutput=sOutput.replace(".",sDecimalSeparator);}
while((sOutput.length-1-nDotIndex)<nDecimalPlaces){sOutput+="0";}}}
if(opts.thousandsSeparator){var sThousandsSeparator=opts.thousandsSeparator;nDotIndex=sOutput.lastIndexOf(sDecimalSeparator);nDotIndex=(nDotIndex>-1)?nDotIndex:sOutput.length;var sNewOutput=sOutput.substring(nDotIndex);var nCount=-1;for(var i=nDotIndex;i>0;i--){nCount++;if((nCount%3===0)&&(i!==nDotIndex)&&(!bNegative||(i>1))){sNewOutput=sThousandsSeparator+sNewOutput;}
sNewOutput=sOutput.charAt(i-1)+sNewOutput;}
sOutput=sNewOutput;}
sOutput=(opts.prefix)?opts.prefix+sOutput:sOutput;sOutput=(opts.suffix)?sOutput+opts.suffix:sOutput;return sOutput;}else{return nData;}},DateFormat:function(format,date,newformat,opts){var token=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(value,length){value=String(value);length=parseInt(length,10)||2;while(value.length<length){value='0'+value;}
return value;},ts={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},timestamp=0,dM,k,hl,dateFormat=["i18n"];dateFormat["i18n"]={dayNames:opts.dayNames,monthNames:opts.monthNames};if(format in opts.masks){format=opts.masks[format];}
if(date.constructor===Date){timestamp=date;}else{date=date.split(/[\\\/:_;.\t\T\s-]/);format=format.split(/[\\\/:_;.\t\T\s-]/);for(k=0,hl=format.length;k<hl;k++){if(format[k]=='M'){dM=$.inArray(date[k],dateFormat.i18n.monthNames);if(dM!==-1&&dM<12){date[k]=dM+1;}}
if(format[k]=='F'){dM=$.inArray(date[k],dateFormat.i18n.monthNames);if(dM!==-1&&dM>11){date[k]=dM+1-12;}}
ts[format[k].toLowerCase()]=parseInt(date[k],10);}
ts.m=parseInt(ts.m,10)-1;var ty=ts.y;if(ty>=70&&ty<=99){ts.y=1900+ts.y;}
else if(ty>=0&&ty<=69){ts.y=2000+ts.y;}
timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u);}
if(newformat in opts.masks){newformat=opts.masks[newformat];}else if(!newformat){newformat='Y-m-d';}
var
G=timestamp.getHours(),i=timestamp.getMinutes(),j=timestamp.getDate(),n=timestamp.getMonth()+1,o=timestamp.getTimezoneOffset(),s=timestamp.getSeconds(),u=timestamp.getMilliseconds(),w=timestamp.getDay(),Y=timestamp.getFullYear(),N=(w+6)%7+1,z=(new Date(Y,n-1,j)-new Date(Y,0,1))/86400000,flags={d:pad(j),D:dateFormat.i18n.dayNames[w],j:j,l:dateFormat.i18n.dayNames[w+7],N:N,S:opts.S(j),w:w,z:z,W:N<5?Math.floor((z+N-1)/7)+1:Math.floor((z+N-1)/7)||((new Date(Y-1,0,1).getDay()+6)%7<4?53:52),F:dateFormat.i18n.monthNames[n-1+12],m:pad(n),M:dateFormat.i18n.monthNames[n-1],n:n,t:'?',L:'?',o:'?',Y:Y,y:String(Y).substring(2),a:G<12?opts.AmPm[0]:opts.AmPm[1],A:G<12?opts.AmPm[2]:opts.AmPm[3],B:'?',g:G%12||12,G:G,h:pad(G%12||12),H:pad(G),i:pad(i),s:pad(s),u:u,e:'?',I:'?',O:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),P:'?',T:(String(timestamp).match(timezone)||[""]).pop().replace(timezoneClip,""),Z:'?',c:'?',r:'?',U:Math.floor(timestamp/1000)};return newformat.replace(token,function($0){return $0 in flags?flags[$0]:$0.substring(1);});}};$.fn.fmatter.defaultFormat=function(cellval,opts){return(isValue(cellval)&&cellval!=="")?cellval:opts.defaultValue?opts.defaultValue:"&#160;";};$.fn.fmatter.email=function(cellval,opts){if(!isEmpty(cellval)){return"<a href=\"mailto:"+cellval+"\">"+cellval+"</a>";}else{return $.fn.fmatter.defaultFormat(cellval,opts);}};$.fn.fmatter.checkbox=function(cval,opts){var op=$.extend({},opts.checkbox),ds;if(!isUndefined(opts.colModel.formatoptions)){op=$.extend({},op,opts.colModel.formatoptions);}
if(op.disabled===true){ds="disabled";}else{ds="";}
if(isEmpty(cval)||isUndefined(cval)){cval=$.fn.fmatter.defaultFormat(cval,op);}
cval=cval+"";cval=cval.toLowerCase();var bchk=cval.search(/(false|0|no|off)/i)<0?" checked='checked' ":"";return"<input type=\"checkbox\" "+bchk+" value=\""+cval+"\" offval=\"no\" "+ds+"/>";};$.fn.fmatter.link=function(cellval,opts){var op={target:opts.target};var target="";if(!isUndefined(opts.colModel.formatoptions)){op=$.extend({},op,opts.colModel.formatoptions);}
if(op.target){target='target='+op.target;}
if(!isEmpty(cellval)){return"<a "+target+" href=\""+cellval+"\">"+cellval+"</a>";}else{return $.fn.fmatter.defaultFormat(cellval,opts);}};$.fn.fmatter.showlink=function(cellval,opts){var op={baseLinkUrl:opts.baseLinkUrl,showAction:opts.showAction,addParam:opts.addParam||"",target:opts.target,idName:opts.idName},target="",idUrl;if(!isUndefined(opts.colModel.formatoptions)){op=$.extend({},op,opts.colModel.formatoptions);}
if(op.target){target='target='+op.target;}
idUrl=op.baseLinkUrl+op.showAction+'?'+op.idName+'='+opts.rowId+op.addParam;if(isString(cellval)){return"<a "+target+" href=\""+idUrl+"\">"+cellval+"</a>";}else{return $.fn.fmatter.defaultFormat(cellval,opts);}};$.fn.fmatter.integer=function(cellval,opts){var op=$.extend({},opts.integer);if(!isUndefined(opts.colModel.formatoptions)){op=$.extend({},op,opts.colModel.formatoptions);}
if(isEmpty(cellval)){return op.defaultValue;}
return $.fmatter.util.NumberFormat(cellval,op);};$.fn.fmatter.number=function(cellval,opts){var op=$.extend({},opts.number);if(!isUndefined(opts.colModel.formatoptions)){op=$.extend({},op,opts.colModel.formatoptions);}
if(isEmpty(cellval)){return op.defaultValue;}
return $.fmatter.util.NumberFormat(cellval,op);};$.fn.fmatter.currency=function(cellval,opts){var op=$.extend({},opts.currency);if(!isUndefined(opts.colModel.formatoptions)){op=$.extend({},op,opts.colModel.formatoptions);}
if(isEmpty(cellval)){return op.defaultValue;}
return $.fmatter.util.NumberFormat(cellval,op);};$.fn.fmatter.date=function(cellval,opts,rwd,act){var op=$.extend({},opts.date);if(!isUndefined(opts.colModel.formatoptions)){op=$.extend({},op,opts.colModel.formatoptions);}
if(!op.reformatAfterEdit&&act=='edit'){return $.fn.fmatter.defaultFormat(cellval,opts);}else if(!isEmpty(cellval)){return $.fmatter.util.DateFormat(op.srcformat,cellval,op.newformat,op);}else{return $.fn.fmatter.defaultFormat(cellval,opts);}};$.fn.fmatter.select=function(cellval,opts,rwd,act){cellval=cellval+"";var oSelect=false,ret=[];if(!isUndefined(opts.colModel.editoptions)){oSelect=opts.colModel.editoptions.value;}
if(oSelect){var msl=opts.colModel.editoptions.multiple===true?true:false,scell=[],sv;if(msl){scell=cellval.split(",");scell=$.map(scell,function(n){return $.trim(n);});}
if(isString(oSelect)){var so=oSelect.split(";"),j=0;for(var i=0;i<so.length;i++){sv=so[i].split(":");if(sv.length>2){sv[1]=jQuery.map(sv,function(n,i){if(i>0){return n;}}).join(":");}
if(msl){if(jQuery.inArray(sv[0],scell)>-1){ret[j]=sv[1];j++;}}else if($.trim(sv[0])==$.trim(cellval)){ret[0]=sv[1];break;}}}else if(isObject(oSelect)){if(msl){ret=jQuery.map(scell,function(n,i){return oSelect[n];});}else{ret[0]=oSelect[cellval]||"";}}}
cellval=ret.join(", ");return cellval==""?$.fn.fmatter.defaultFormat(cellval,opts):cellval;};$.fn.fmatter.rowactions=function(rid,gid,act,keys){switch(act)
{case'edit':var restorerow=function(){$("tr#"+rid+" div.ui-inline-edit, "+"tr#"+rid+" div.ui-inline-del","#"+gid).show();$("tr#"+rid+" div.ui-inline-save, "+"tr#"+rid+" div.ui-inline-cancel","#"+gid).hide();};$('#'+gid).jqGrid('editRow',rid,keys,null,null,null,{oper:'edit'},restorerow,null,restorerow);$("tr#"+rid+" div.ui-inline-edit, "+"tr#"+rid+" div.ui-inline-del","#"+gid).hide();$("tr#"+rid+" div.ui-inline-save, "+"tr#"+rid+" div.ui-inline-cancel","#"+gid).show();break;case'save':$('#'+gid).jqGrid('saveRow',rid,null,null);$("tr#"+rid+" div.ui-inline-edit, "+"tr#"+rid+" div.ui-inline-del","#"+gid).show();$("tr#"+rid+" div.ui-inline-save, "+"tr#"+rid+" div.ui-inline-cancel","#"+gid).hide();break;case'cancel':$('#'+gid).jqGrid('restoreRow',rid);$("tr#"+rid+" div.ui-inline-edit, "+"tr#"+rid+" div.ui-inline-del","#"+gid).show();$("tr#"+rid+" div.ui-inline-save, "+"tr#"+rid+" div.ui-inline-cancel","#"+gid).hide();break;}};$.fn.fmatter.actions=function(cellval,opts,rwd){var op={keys:false,editbutton:true,delbutton:true};if(!isUndefined(opts.colModel.formatoptions)){op=$.extend(op,opts.colModel.formatoptions);}
var rowid=opts.rowId,str="",ocl;if(typeof(rowid)=='undefined'||isEmpty(rowid)){return"";}
if(op.editbutton){ocl="onclick=$.fn.fmatter.rowactions('"+rowid+"','"+opts.gid+"','edit',"+op.keys+");";str=str+"<div style='margin-left:8px;'><div title='"+$.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+ocl+"><span class='ui-icon ui-icon-pencil'></span></div>";}
if(op.delbutton){ocl="onclick=jQuery('#"+opts.gid+"').jqGrid('delGridRow','"+rowid+"');";str=str+"<div title='"+$.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+ocl+"><span class='ui-icon ui-icon-trash'></span></div>";}
ocl="onclick=$.fn.fmatter.rowactions('"+rowid+"','"+opts.gid+"','save',false);";str=str+"<div title='"+$.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save'><span class='ui-icon ui-icon-disk' "+ocl+"></span></div>";ocl="onclick=$.fn.fmatter.rowactions('"+rowid+"','"+opts.gid+"','cancel',false);";str=str+"<div title='"+$.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel'><span class='ui-icon ui-icon-cancel' "+ocl+"></span></div></div>";return str;};$.unformat=function(cellval,options,pos,cnt){var ret,formatType=options.colModel.formatter,op=options.colModel.formatoptions||{},sep,re=/([\.\*\_\'\(\)\{\}\+\?\\])/g;unformatFunc=options.colModel.unformat||($.fn.fmatter[formatType]&&$.fn.fmatter[formatType].unformat);if(typeof unformatFunc!=='undefined'&&isFunction(unformatFunc)){ret=unformatFunc($(cellval).text(),options,cellval);}else if(typeof formatType!=='undefined'&&isString(formatType)){var opts=$.jgrid.formatter||{},stripTag;switch(formatType){case'integer':op=$.extend({},opts.integer,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text().replace(stripTag,'');break;case'number':op=$.extend({},opts.number,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text().replace(stripTag,"").replace(op.decimalSeparator,'.');break;case'currency':op=$.extend({},opts.currency,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text().replace(stripTag,'').replace(op.decimalSeparator,'.').replace(op.prefix,'').replace(op.suffix,'');break;case'checkbox':var cbv=(options.colModel.editoptions)?options.colModel.editoptions.value.split(":"):["Yes","No"];ret=$('input',cellval).attr("checked")?cbv[0]:cbv[1];break;case'select':ret=$.unformat.select(cellval,options,pos,cnt);break;case'actions':return"";default:ret=$(cellval).text();}}
return ret?ret:cnt===true?$(cellval).text():$.jgrid.htmlDecode($(cellval).html());};$.unformat.select=function(cellval,options,pos,cnt){var ret=[];var cell=$(cellval).text();if(cnt===true){return cell;}
var op=$.extend({},options.colModel.editoptions);if(op.value){var oSelect=op.value,msl=op.multiple===true?true:false,scell=[],sv;if(msl){scell=cell.split(",");scell=$.map(scell,function(n){return $.trim(n);});}
if(isString(oSelect)){var so=oSelect.split(";"),j=0;for(var i=0;i<so.length;i++){sv=so[i].split(":");if(msl){if(jQuery.inArray(sv[1],scell)>-1){ret[j]=sv[0];j++;}}else if($.trim(sv[1])==$.trim(cell)){ret[0]=sv[0];break;}}}else if(isObject(oSelect)){if(!msl){scell[0]=cell;}
ret=jQuery.map(scell,function(n){var rv;$.each(oSelect,function(i,val){if(val==n){rv=i;return false;}});if(rv){return rv;}});}
return ret.join(", ");}else{return cell||"";}};function fireFormatter(formatType,cellval,opts,rwd,act){var v=cellval;if($.fn.fmatter[formatType]){v=$.fn.fmatter[formatType](cellval,opts,rwd,act);}
return v;}
function debug($obj){if(window.console&&window.console.log){window.console.log($obj);}}
isValue=function(o){return(isObject(o)||isString(o)||isNumber(o)||isBoolean(o));};isBoolean=function(o){return typeof o==='boolean';};isNull=function(o){return o===null;};isNumber=function(o){return typeof o==='number'&&isFinite(o);};isString=function(o){return typeof o==='string';};isEmpty=function(o){if(!isString(o)&&isValue(o)){return false;}else if(!isValue(o)){return true;}
o=$.trim(o).replace(/\&nbsp\;/ig,'').replace(/\&#160\;/ig,'');return o==="";};isUndefined=function(o){return typeof o==='undefined';};isObject=function(o){return(o&&(typeof o==='object'||isFunction(o)))||false;};isFunction=function(o){return typeof o==='function';};})(jQuery);var xmlJsonClass={xml2json:function(xml,tab){if(xml.nodeType===9){xml=xml.documentElement;}
var nws=this.removeWhite(xml);var obj=this.toObj(nws);var json=this.toJson(obj,xml.nodeName,"\t");return"{\n"+tab+(tab?json.replace(/\t/g,tab):json.replace(/\t|\n/g,""))+"\n}";},json2xml:function(o,tab){var toXml=function(v,name,ind){var xml="";var i,n;if(v instanceof Array){if(v.length===0){xml+=ind+"<"+name+">__EMPTY_ARRAY_</"+name+">\n";}
else{for(i=0,n=v.length;i<n;i+=1){var sXml=ind+toXml(v[i],name,ind+"\t")+"\n";xml+=sXml;}}}
else if(typeof(v)==="object"){var hasChild=false;xml+=ind+"<"+name;var m;for(m in v)if(v.hasOwnProperty(m)){if(m.charAt(0)==="@"){xml+=" "+m.substr(1)+"=\""+v[m].toString()+"\"";}
else{hasChild=true;}}
xml+=hasChild?">":"/>";if(hasChild){for(m in v)if(v.hasOwnProperty(m)){if(m==="#text"){xml+=v[m];}
else if(m==="#cdata"){xml+="<![CDATA["+v[m]+"]]>";}
else if(m.charAt(0)!=="@"){xml+=toXml(v[m],m,ind+"\t");}}
xml+=(xml.charAt(xml.length-1)==="\n"?ind:"")+"</"+name+">";}}
else if(typeof(v)==="function"){xml+=ind+"<"+name+">"+"<![CDATA["+v+"]]>"+"</"+name+">";}
else{if(v.toString()==="\"\""||v.toString().length===0){xml+=ind+"<"+name+">__EMPTY_STRING_</"+name+">";}
else{xml+=ind+"<"+name+">"+v.toString()+"</"+name+">";}}
return xml;};var xml="";var m;for(m in o)if(o.hasOwnProperty(m)){xml+=toXml(o[m],m,"");}
return tab?xml.replace(/\t/g,tab):xml.replace(/\t|\n/g,"");},toObj:function(xml){var o={};var FuncTest=/function/i;if(xml.nodeType===1){if(xml.attributes.length){var i;for(i=0;i<xml.attributes.length;i+=1){o["@"+xml.attributes[i].nodeName]=(xml.attributes[i].nodeValue||"").toString();}}
if(xml.firstChild){var textChild=0,cdataChild=0,hasElementChild=false;var n;for(n=xml.firstChild;n;n=n.nextSibling){if(n.nodeType===1){hasElementChild=true;}
else if(n.nodeType===3&&n.nodeValue.match(/[^ \f\n\r\t\v]/)){textChild+=1;}
else if(n.nodeType===4){cdataChild+=1;}}
if(hasElementChild){if(textChild<2&&cdataChild<2){this.removeWhite(xml);for(n=xml.firstChild;n;n=n.nextSibling){if(n.nodeType===3){o["#text"]=this.escape(n.nodeValue);}
else if(n.nodeType===4){if(FuncTest.test(n.nodeValue)){o[n.nodeName]=[o[n.nodeName],n.nodeValue];}else{o["#cdata"]=this.escape(n.nodeValue);}}
else if(o[n.nodeName]){if(o[n.nodeName]instanceof Array){o[n.nodeName][o[n.nodeName].length]=this.toObj(n);}
else{o[n.nodeName]=[o[n.nodeName],this.toObj(n)];}}
else{o[n.nodeName]=this.toObj(n);}}}
else{if(!xml.attributes.length){o=this.escape(this.innerXml(xml));}
else{o["#text"]=this.escape(this.innerXml(xml));}}}
else if(textChild){if(!xml.attributes.length){o=this.escape(this.innerXml(xml));if(o==="__EMPTY_ARRAY_"){o="[]";}else if(o==="__EMPTY_STRING_"){o="";}}
else{o["#text"]=this.escape(this.innerXml(xml));}}
else if(cdataChild){if(cdataChild>1){o=this.escape(this.innerXml(xml));}
else{for(n=xml.firstChild;n;n=n.nextSibling){if(FuncTest.test(xml.firstChild.nodeValue)){o=xml.firstChild.nodeValue;break;}else{o["#cdata"]=this.escape(n.nodeValue);}}}}}
if(!xml.attributes.length&&!xml.firstChild){o=null;}}
else if(xml.nodeType===9){o=this.toObj(xml.documentElement);}
else{alert("unhandled node type: "+xml.nodeType);}
return o;},toJson:function(o,name,ind){var json=name?("\""+name+"\""):"";if(o==="[]"){json+=(name?":[]":"[]");}
else if(o instanceof Array){var n,i,ar=[];for(i=0,n=o.length;i<n;i+=1){ar[i]=this.toJson(o[i],"",ind+"\t");}
json+=(name?":[":"[")+(ar.length>1?("\n"+ind+"\t"+ar.join(",\n"+ind+"\t")+"\n"+ind):ar.join(""))+"]";}
else if(o===null){json+=(name&&":")+"null";}
else if(typeof(o)==="object"){var arr=[];var m;for(m in o)if(o.hasOwnProperty(m)){arr[arr.length]=this.toJson(o[m],m,ind+"\t");}
json+=(name?":{":"{")+(arr.length>1?("\n"+ind+"\t"+arr.join(",\n"+ind+"\t")+"\n"+ind):arr.join(""))+"}";}
else if(typeof(o)==="string"){var objRegExp=/(^-?\d+\.?\d*$)/;var FuncTest=/function/i;var os=o.toString();if(objRegExp.test(os)||FuncTest.test(os)||os==="false"||os==="true"){json+=(name&&":")+os;}
else{json+=(name&&":")+"\""+o+"\"";}}
else{json+=(name&&":")+o.toString();}
return json;},innerXml:function(node){var s="";if("innerHTML"in node){s=node.innerHTML;}
else{var asXml=function(n){var s="",i;if(n.nodeType===1){s+="<"+n.nodeName;for(i=0;i<n.attributes.length;i+=1){s+=" "+n.attributes[i].nodeName+"=\""+(n.attributes[i].nodeValue||"").toString()+"\"";}
if(n.firstChild){s+=">";for(var c=n.firstChild;c;c=c.nextSibling){s+=asXml(c);}
s+="</"+n.nodeName+">";}
else{s+="/>";}}
else if(n.nodeType===3){s+=n.nodeValue;}
else if(n.nodeType===4){s+="<![CDATA["+n.nodeValue+"]]>";}
return s;};for(var c=node.firstChild;c;c=c.nextSibling){s+=asXml(c);}}
return s;},escape:function(txt){return txt.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,'\\n').replace(/[\r]/g,'\\r');},removeWhite:function(e){e.normalize();var n;for(n=e.firstChild;n;){if(n.nodeType===3){if(!n.nodeValue.match(/[^ \f\n\r\t\v]/)){var nxt=n.nextSibling;e.removeChild(n);n=nxt;}
else{n=n.nextSibling;}}
else if(n.nodeType===1){this.removeWhite(n);n=n.nextSibling;}
else{n=n.nextSibling;}}
return e;}};(function($){$.fn.jqDrag=function(h){return i(this,h,'d');};$.fn.jqResize=function(h,ar){return i(this,h,'r',ar);};$.jqDnR={dnr:{},e:0,drag:function(v){if(M.k=='d')E.css({left:M.X+v.pageX-M.pX,top:M.Y+v.pageY-M.pY});else{E.css({width:Math.max(v.pageX-M.pX+M.W,0),height:Math.max(v.pageY-M.pY+M.H,0)});if(M1){E1.css({width:Math.max(v.pageX-M1.pX+M1.W,0),height:Math.max(v.pageY-M1.pY+M1.H,0)});}}
return false;},stop:function(){$(document).unbind('mousemove',J.drag).unbind('mouseup',J.stop);}};var J=$.jqDnR,M=J.dnr,E=J.e,E1,i=function(e,h,k,aR){return e.each(function(){h=(h)?$(h,e):e;h.bind('mousedown',{e:e,k:k},function(v){var d=v.data,p={};E=d.e;E1=aR?$(aR):false;if(E.css('position')!='relative'){try{E.position(p);}catch(e){}}
M={X:p.left||f('left')||0,Y:p.top||f('top')||0,W:f('width')||E[0].scrollWidth||0,H:f('height')||E[0].scrollHeight||0,pX:v.pageX,pY:v.pageY,k:d.k};if(E1&&d.k!='d'){M1={X:p.left||f1('left')||0,Y:p.top||f1('top')||0,W:E1[0].offsetWidth||f1('width')||0,H:E1[0].offsetHeight||f1('height')||0,pX:v.pageX,pY:v.pageY,k:d.k};}else{M1=false;}
$(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop);return false;});});},f=function(k){return parseInt(E.css(k))||false;};f1=function(k){return parseInt(E1.css(k))||false;};})(jQuery);(function($){$.fn.jqm=function(o){var p={overlay:50,closeoverlay:true,overlayClass:'jqmOverlay',closeClass:'jqmClose',trigger:'.jqModal',ajax:F,ajaxText:'',target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){if(this._jqm)return H[this._jqm].c=$.extend({},H[this._jqm].c,o);s++;this._jqm=s;H[s]={c:$.extend(p,$.jqm.params,o),a:F,w:$(this).addClass('jqmID'+s),s:s};if(p.trigger)$(this).jqmAddTrigger(p.trigger);});};$.fn.jqmAddClose=function(e){return hs(this,e,'jqmHide');};$.fn.jqmAddTrigger=function(e){return hs(this,e,'jqmShow');};$.fn.jqmShow=function(t){return this.each(function(){$.jqm.open(this._jqm,t);});};$.fn.jqmHide=function(t){return this.each(function(){$.jqm.close(this._jqm,t)});};$.jqm={hash:{},open:function(s,t){var h=H[s],c=h.c,cc='.'+c.closeClass,z=(parseInt(h.w.css('z-index')));z=(z>0)?z:3000;var o=$('<div></div>').css({height:'100%',width:'100%',position:'fixed',left:0,top:0,'z-index':z-1,opacity:c.overlay/100});if(h.a)return F;h.t=t;h.a=true;h.w.css('z-index',z);if(c.modal){if(!A[0])setTimeout(function(){L('bind');},1);A.push(s);}
else if(c.overlay>0){if(c.closeoverlay)h.w.jqmAddClose(o);}
else o=F;h.o=(o)?o.addClass(c.overlayClass).prependTo('body'):F;if(ie6){$('html,body').css({height:'100%',width:'100%'});if(o){o=o.css({position:'absolute'})[0];for(var y in{Top:1,Left:1})o.style.setExpression(y.toLowerCase(),"(_=(document.documentElement.scroll"+y+" || document.body.scroll"+y+"))+'px'");}}
if(c.ajax){var r=c.target||h.w,u=c.ajax;r=(typeof r=='string')?$(r,h.w):$(r);u=(u.substr(0,1)=='@')?$(t).attr(u.substring(1)):u;r.html(c.ajaxText).load(u,function(){if(c.onLoad)c.onLoad.call(this,h);if(cc)h.w.jqmAddClose($(cc,h.w));e(h);});}
else if(cc)h.w.jqmAddClose($(cc,h.w));if(c.toTop&&h.o)h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o);(c.onShow)?c.onShow(h):h.w.show();e(h);return F;},close:function(s){var h=H[s];if(!h.a)return F;h.a=F;if(A[0]){A.pop();if(!A[0])L('unbind');}
if(h.c.toTop&&h.o)$('#jqmP'+h.w[0]._jqm).after(h.w).remove();if(h.c.onHide)h.c.onHide(h);else{h.w.hide();if(h.o)h.o.remove();}return F;},params:{}};var s=0,H=$.jqm.hash,A=[],ie6=$.browser.msie&&($.browser.version=="6.0"),F=false,e=function(h){var i=$('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});if(ie6)if(h.o)h.o.html('<p style="width:100%;height:100%"/>').prepend(i);else if(!$('iframe.jqm',h.w)[0])h.w.prepend(i);f(h);},f=function(h){try{$(':input:visible',h.w)[0].focus();}catch(_){}},L=function(t){$(document)[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m);},m=function(e){var h=H[A[A.length-1]],r=(!$(e.target).parents('.jqmID'+h.s)[0]);if(r)f(h);return!r;},hs=function(w,t,c){return w.each(function(){var s=this._jqm;$(t).each(function(){if(!this[c]){this[c]=[];$(this).click(function(){for(var i in{jqmShow:1,jqmHide:1})for(var s in this[i])if(H[this[i][s]])H[this[i][s]].w[i](this);return F;});}this[c].push(s);});});};})(jQuery);(function($){$.widget("ui.multiselect",{_init:function(){this.element.hide();this.id=this.element.attr("id");this.container=$('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element);this.count=0;this.selectedContainer=$('<div class="selected"></div>').appendTo(this.container);this.availableContainer=$('<div class="available"></div>').appendTo(this.container);this.selectedActions=$('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 '+$.ui.multiselect.locale.itemsCount+'</span><a href="#" class="remove-all">'+$.ui.multiselect.locale.removeAll+'</a></div>').appendTo(this.selectedContainer);this.availableActions=$('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+$.ui.multiselect.locale.addAll+'</a></div>').appendTo(this.availableContainer);this.selectedList=$('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind('selectstart',function(){return false;}).appendTo(this.selectedContainer);this.availableList=$('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind('selectstart',function(){return false;}).appendTo(this.availableContainer);var that=this;this.container.width(this.element.width()+1);this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation));this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation)));this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1));this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1));if(!this.options.animated){this.options.show='show';this.options.hide='hide';}
this._populateLists(this.element.find('option'));if(this.options.sortable){$("ul.selected").sortable({placeholder:'ui-state-highlight',axis:'y',update:function(event,ui){that.selectedList.find('li').each(function(){if($(this).data('optionLink'))
$(this).data('optionLink').remove().appendTo(that.element);});},receive:function(event,ui){ui.item.data('optionLink').attr('selected',true);that.count+=1;that._updateCount();that.selectedList.children('.ui-draggable').each(function(){$(this).removeClass('ui-draggable');$(this).data('optionLink',ui.item.data('optionLink'));$(this).data('idx',ui.item.data('idx'));that._applyItemState($(this),true);});setTimeout(function(){ui.item.remove();},1);}});}
if(this.options.searchable){this._registerSearchEvents(this.availableContainer.find('input.search'));}else{$('.search').hide();}
$(".remove-all").click(function(){that._populateLists(that.element.find('option').removeAttr('selected'));return false;});$(".add-all").click(function(){that._populateLists(that.element.find('option').attr('selected','selected'));return false;});},destroy:function(){this.element.show();this.container.remove();$.widget.prototype.destroy.apply(this,arguments);},_populateLists:function(options){this.selectedList.children('.ui-element').remove();this.availableList.children('.ui-element').remove();this.count=0;var that=this;var items=$(options.map(function(i){var item=that._getOptionNode(this).appendTo(this.selected?that.selectedList:that.availableList).show();if(this.selected)that.count+=1;that._applyItemState(item,this.selected);item.data('idx',i);return item[0];}));this._updateCount();},_updateCount:function(){this.selectedContainer.find('span.count').text(this.count+" "+$.ui.multiselect.locale.itemsCount);},_getOptionNode:function(option){option=$(option);var node=$('<li class="ui-state-default ui-element" title="'+option.text()+'"><span class="ui-icon"/>'+option.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();node.data('optionLink',option);return node;},_cloneWithData:function(clonee){var clone=clonee.clone();clone.data('optionLink',clonee.data('optionLink'));clone.data('idx',clonee.data('idx'));return clone;},_setSelected:function(item,selected){item.data('optionLink').attr('selected',selected);if(selected){var selectedItem=this._cloneWithData(item);item[this.options.hide](this.options.animated,function(){$(this).remove();});selectedItem.appendTo(this.selectedList).hide()[this.options.show](this.options.animated);this._applyItemState(selectedItem,true);return selectedItem;}else{var items=this.availableList.find('li'),comparator=this.options.nodeComparator;var succ=null,i=item.data('idx'),direction=comparator(item,$(items[i]));if(direction){while(i>=0&&i<items.length){direction>0?i++:i--;if(direction!=comparator(item,$(items[i]))){succ=items[direction>0?i:i+1];break;}}}else{succ=items[i];}
var availableItem=this._cloneWithData(item);succ?availableItem.insertBefore($(succ)):availableItem.appendTo(this.availableList);item[this.options.hide](this.options.animated,function(){$(this).remove();});availableItem.hide()[this.options.show](this.options.animated);this._applyItemState(availableItem,false);return availableItem;}},_applyItemState:function(item,selected){if(selected){if(this.options.sortable)
item.children('span').addClass('ui-icon-arrowthick-2-n-s').removeClass('ui-helper-hidden').addClass('ui-icon');else
item.children('span').removeClass('ui-icon-arrowthick-2-n-s').addClass('ui-helper-hidden').removeClass('ui-icon');item.find('a.action span').addClass('ui-icon-minus').removeClass('ui-icon-plus');this._registerRemoveEvents(item.find('a.action'));}else{item.children('span').removeClass('ui-icon-arrowthick-2-n-s').addClass('ui-helper-hidden').removeClass('ui-icon');item.find('a.action span').addClass('ui-icon-plus').removeClass('ui-icon-minus');this._registerAddEvents(item.find('a.action'));}
this._registerHoverEvents(item);},_filter:function(list){var input=$(this);var rows=list.children('li'),cache=rows.map(function(){return $(this).text().toLowerCase();});var term=$.trim(input.val().toLowerCase()),scores=[];if(!term){rows.show();}else{rows.hide();cache.each(function(i){if(this.indexOf(term)>-1){scores.push(i);}});$.each(scores,function(){$(rows[this]).show();});}},_registerHoverEvents:function(elements){elements.removeClass('ui-state-hover');elements.mouseover(function(){$(this).addClass('ui-state-hover');});elements.mouseout(function(){$(this).removeClass('ui-state-hover');});},_registerAddEvents:function(elements){var that=this;elements.click(function(){var item=that._setSelected($(this).parent(),true);that.count+=1;that._updateCount();return false;}).each(function(){$(this).parent().draggable({connectToSortable:'ul.selected',helper:function(){var selectedItem=that._cloneWithData($(this)).width($(this).width()-50);selectedItem.width($(this).width());return selectedItem;},appendTo:'.ui-multiselect',containment:'.ui-multiselect',revert:'invalid'});});},_registerRemoveEvents:function(elements){var that=this;elements.click(function(){that._setSelected($(this).parent(),false);that.count-=1;that._updateCount();return false;});},_registerSearchEvents:function(input){var that=this;input.focus(function(){$(this).addClass('ui-state-active');}).blur(function(){$(this).removeClass('ui-state-active');}).keypress(function(e){if(e.keyCode==13)
return false;}).keyup(function(){that._filter.apply(this,[that.availableList]);});}});$.extend($.ui.multiselect,{defaults:{sortable:true,searchable:true,animated:'fast',show:'slideDown',hide:'slideUp',dividerLocation:0.6,nodeComparator:function(node1,node2){var text1=node1.text(),text2=node2.text();return text1==text2?0:(text1<text2?-1:1);}},locale:{addAll:'Add all',removeAll:'Remove all',itemsCount:'items selected'}});})(jQuery);jQuery.fn.searchFilter=function(fields,options){function SearchFilter(jQ,fields,options){this.$=jQ;this.add=function(i){if(i==null)jQ.find(".ui-add-last").click();else jQ.find(".sf:eq("+i+") .ui-add").click();return this;};this.del=function(i){if(i==null)jQ.find(".sf:last .ui-del").click();else jQ.find(".sf:eq("+i+") .ui-del").click();return this;};this.search=function(e){jQ.find(".ui-search").click();return this;};this.reset=function(e){jQ.find(".ui-reset").click();return this;};this.close=function(){jQ.find(".ui-closer").click();return this;};if(fields!=null){function hover(){jQuery(this).toggleClass("ui-state-hover");return false;}
function active(e){jQuery(this).toggleClass("ui-state-active",(e.type=="mousedown"));return false;}
function buildOpt(value,text){return"<option value='"+value+"'>"+text+"</option>";}
function buildSel(className,options,isHidden){return"<select class='"+className+"'"+(isHidden?" style='display:none;'":"")+">"+options+"</select>";}
function initData(selector,fn){var jElem=jQ.find("tr.sf td.data "+selector);if(jElem[0]!=null)
fn(jElem);}
function bindDataEvents(selector,events){var jElem=jQ.find("tr.sf td.data "+selector);if(jElem[0]!=null){jQuery.each(events,function(){if(this.data!=null)
jElem.bind(this.type,this.data,this.fn);else
jElem.bind(this.type,this.fn);});}}
var opts=jQuery.extend({},jQuery.fn.searchFilter.defaults,options);var highest_late_setup=-1;var gOps_html="";jQuery.each(opts.groupOps,function(){gOps_html+=buildOpt(this.op,this.text);});gOps_html="<select name='groupOp'>"+gOps_html+"</select>";jQ.html("").addClass("ui-searchFilter").append("<div class='ui-widget-overlay' style='z-index: -1'>&#160;</div><table class='ui-widget-content ui-corner-all'><thead><tr><td colspan='5' class='ui-widget-header ui-corner-all' style='line-height: 18px;'><div class='ui-closer ui-state-default ui-corner-all ui-helper-clearfix' style='float: right;'><span class='ui-icon ui-icon-close'></span></div>"+opts.windowTitle+"</td></tr></thead><tbody><tr class='sf'><td class='fields'></td><td class='ops'></td><td class='data'></td><td><div class='ui-del ui-state-default ui-corner-all'><span class='ui-icon ui-icon-minus'></span></div></td><td><div class='ui-add ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plus'></span></div></td></tr><tr><td colspan='5' class='divider'><div>&#160;</div></td></tr></tbody><tfoot><tr><td colspan='3'><span class='ui-reset ui-state-default ui-corner-all' style='display: inline-block; float: left;'><span class='ui-icon ui-icon-arrowreturnthick-1-w' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+opts.resetText+"</span></span><span class='ui-search ui-state-default ui-corner-all' style='display: inline-block; float: right;'><span class='ui-icon ui-icon-search' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+opts.searchText+"</span></span><span class='matchText'>"+opts.matchText+"</span> "+gOps_html+" <span class='rulesText'>"+opts.rulesText+"</span></td><td>&#160;</td><td><div class='ui-add-last ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plusthick'></span></div></td></tr></tfoot></table>");var jRow=jQ.find("tr.sf");var jFields=jRow.find("td.fields");var jOps=jRow.find("td.ops");var jData=jRow.find("td.data");var default_ops_html="";jQuery.each(opts.operators,function(){default_ops_html+=buildOpt(this.op,this.text);});default_ops_html=buildSel("default",default_ops_html,true);jOps.append(default_ops_html);var default_data_html="<input type='text' class='default' style='display:none;' />";jData.append(default_data_html);var fields_html="";var has_custom_ops=false;var has_custom_data=false;jQuery.each(fields,function(i){var field_num=i;fields_html+=buildOpt(this.itemval,this.text);if(this.ops!=null){has_custom_ops=true;var custom_ops="";jQuery.each(this.ops,function(){custom_ops+=buildOpt(this.op,this.text);});custom_ops=buildSel("field"+field_num,custom_ops,true);jOps.append(custom_ops);}
if(this.dataUrl!=null){if(i>highest_late_setup)highest_late_setup=i;has_custom_data=true;var dEvents=this.dataEvents;var iEvent=this.dataInit;var bs=this.buildSelect;jQuery.ajax(jQuery.extend({url:this.dataUrl,complete:function(data){var $d;if(bs!=null)$d=jQuery("<div />").append(bs(data));else $d=jQuery("<div />").append(data.responseText);$d.find("select").addClass("field"+field_num).hide();jData.append($d.html());if(iEvent)initData(".field"+i,iEvent);if(dEvents)bindDataEvents(".field"+i,dEvents);if(i==highest_late_setup){jQ.find("tr.sf td.fields select[name='field']").change();}}},opts.ajaxSelectOptions));}else if(this.dataValues!=null){has_custom_data=true;var custom_data="";jQuery.each(this.dataValues,function(){custom_data+=buildOpt(this.value,this.text);});custom_data=buildSel("field"+field_num,custom_data,true);jData.append(custom_data);}else if(this.dataEvents!=null||this.dataInit!=null){has_custom_data=true;var custom_data="<input type='text' class='field"+field_num+"' />";jData.append(custom_data);}
if(this.dataInit!=null&&i!=highest_late_setup)
initData(".field"+i,this.dataInit);if(this.dataEvents!=null&&i!=highest_late_setup)
bindDataEvents(".field"+i,this.dataEvents);});fields_html="<select name='field'>"+fields_html+"</select>";jFields.append(fields_html);var jFSelect=jFields.find("select[name='field']");if(has_custom_ops)jFSelect.change(function(e){var index=e.target.selectedIndex;var td=jQuery(e.target).parents("tr.sf").find("td.ops");td.find("select").removeAttr("name").hide();var jElem=td.find(".field"+index);if(jElem[0]==null)jElem=td.find(".default");jElem.attr("name","op").show();});else jOps.find(".default").attr("name","op").show();if(has_custom_data)jFSelect.change(function(e){var index=e.target.selectedIndex;var td=jQuery(e.target).parents("tr.sf").find("td.data");td.find("select,input").removeClass("vdata").hide();var jElem=td.find(".field"+index);if(jElem[0]==null)jElem=td.find(".default");jElem.show().addClass("vdata");});else jData.find(".default").show().addClass("vdata");if(has_custom_ops||has_custom_data)jFSelect.change();jQ.find(".ui-state-default").hover(hover,hover).mousedown(active).mouseup(active);jQ.find(".ui-closer").click(function(e){opts.onClose(jQuery(jQ.selector));return false;});jQ.find(".ui-del").click(function(e){var row=jQuery(e.target).parents(".sf");if(row.siblings(".sf").length>0){if(opts.datepickerFix===true&&jQuery.fn.datepicker!==undefined)
row.find(".hasDatepicker").datepicker("destroy");row.remove();}else{row.find("select[name='field']")[0].selectedIndex=0;row.find("select[name='op']")[0].selectedIndex=0;row.find(".data input").val("");row.find(".data select").each(function(){this.selectedIndex=0;});row.find("select[name='field']").change();}
return false;});jQ.find(".ui-add").click(function(e){var row=jQuery(e.target).parents(".sf");var newRow=row.clone(true).insertAfter(row);newRow.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");if(opts.clone){newRow.find("select[name='field']")[0].selectedIndex=row.find("select[name='field']")[0].selectedIndex;var stupid_browser=(newRow.find("select[name='op']")[0]==null);if(!stupid_browser)
newRow.find("select[name='op']").focus()[0].selectedIndex=row.find("select[name='op']")[0].selectedIndex;var jElem=newRow.find("select.vdata");if(jElem[0]!=null)
jElem[0].selectedIndex=row.find("select.vdata")[0].selectedIndex;}else{newRow.find(".data input").val("");newRow.find("select[name='field']").focus();}
if(opts.datepickerFix===true&&jQuery.fn.datepicker!==undefined){row.find(".hasDatepicker").each(function(){var settings=jQuery.data(this,"datepicker").settings;newRow.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(settings);});}
newRow.find("select[name='field']").change();return false;});jQ.find(".ui-search").click(function(e){var ui=jQuery(jQ.selector);var ruleGroup;var group_op=ui.find("select[name='groupOp'] :selected").val();if(!opts.stringResult){ruleGroup={groupOp:group_op,rules:[]};}else{ruleGroup="{\"groupOp\":\""+group_op+"\",\"rules\":[";}
ui.find(".sf").each(function(i){var tField=jQuery(this).find("select[name='field'] :selected").val();var tOp=jQuery(this).find("select[name='op'] :selected").val();var tData=jQuery(this).find("input.vdata,select.vdata :selected").val();tData+="";tData=tData.replace(/\\/g,'\\\\').replace(/\"/g,'\\"');if(!opts.stringResult){ruleGroup.rules.push({field:tField,op:tOp,data:tData});}else{if(i>0)ruleGroup+=",";ruleGroup+="{\"field\":\""+tField+"\",";ruleGroup+="\"op\":\""+tOp+"\",";ruleGroup+="\"data\":\""+tData+"\"}";}});if(opts.stringResult)ruleGroup+="]}";opts.onSearch(ruleGroup);return false;});jQ.find(".ui-reset").click(function(e){var ui=jQuery(jQ.selector);ui.find(".ui-del").click();ui.find("select[name='groupOp']")[0].selectedIndex=0;opts.onReset();return false;});jQ.find(".ui-add-last").click(function(){var row=jQuery(jQ.selector+" .sf:last");var newRow=row.clone(true).insertAfter(row);newRow.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");newRow.find(".data input").val("");newRow.find("select[name='field']").focus();if(opts.datepickerFix===true&&jQuery.fn.datepicker!==undefined){row.find(".hasDatepicker").each(function(){var settings=jQuery.data(this,"datepicker").settings;newRow.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(settings);});}
newRow.find("select[name='field']").change();return false;});this.setGroupOp=function(setting){selDOMobj=this.$.find("select[name='groupOp']")[0];var indexmap={},l=selDOMobj.options.length,i;for(i=0;i<l;i++){indexmap[selDOMobj.options[i].value]=i;}
selDOMobj.selectedIndex=indexmap[setting];$(selDOMobj).change();};this.setFilter=function(settings){var o=settings['sfref'],filter=settings['filter'];var fields=[],i,j,l,lj,li,valueindexmap={};selDOMobj=o.find("select[name='field']")[0];for(i=0,l=selDOMobj.options.length;i<l;i++){valueindexmap[selDOMobj.options[i].value]={'index':i,'ops':{}};fields.push(selDOMobj.options[i].value);}
for(i=0,li=fields.length;i<li;i++){selDOMobj=o.find(".ops > select[class='field"+i+"']")[0];if(selDOMobj){for(j=0,lj=selDOMobj.options.length;j<lj;j++){valueindexmap[fields[i]]['ops'][selDOMobj.options[j].value]=j;}}
selDOMobj=o.find(".data > select[class='field"+i+"']")[0];if(selDOMobj){valueindexmap[fields[i]]['data']={};for(j=0,lj=selDOMobj.options.length;j<lj;j++){valueindexmap[fields[i]]['data'][selDOMobj.options[j].value]=j;}}}
var fieldvalue,fieldindex,opindex,datavalue,dataindex;fieldvalue=filter['field'];if(valueindexmap[fieldvalue]){fieldindex=valueindexmap[fieldvalue]['index'];}
if(fieldindex!=null){opindex=valueindexmap[fieldvalue]['ops'][filter['op']];if(opindex===undefined){for(i=0,li=options.operators.length;i<li;i++){if(options.operators[i].op==filter.op){opindex=i;break;}}}
datavalue=filter['data'];if(valueindexmap[fieldvalue]['data']==null){dataindex=-1;}else{dataindex=valueindexmap[fieldvalue]['data'][datavalue];}}
if(fieldindex!=null&&opindex!=null&&dataindex!=null){o.find("select[name='field']")[0].selectedIndex=fieldindex;o.find("select[name='field']").change();o.find("select[name='op']")[0].selectedIndex=opindex;o.find("input.vdata").val(datavalue);o=o.find("select.vdata")[0];if(o){o.selectedIndex=dataindex;}
return true}else{return false}};}}
return new SearchFilter(this,fields,options);};jQuery.fn.searchFilter.version='1.2.9';jQuery.fn.searchFilter.defaults={clone:true,datepickerFix:true,onReset:function(data){alert("Reset Clicked. Data Returned: "+data)},onSearch:function(data){alert("Search Clicked. Data Returned: "+data)},onClose:function(jElem){jElem.hide();},groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operators:[{op:"eq",text:"is equal to"},{op:"ne",text:"is not equal to"},{op:"lt",text:"is less than"},{op:"le",text:"is less or equal to"},{op:"gt",text:"is greater than"},{op:"ge",text:"is greater or equal to"},{op:"in",text:"is in"},{op:"ni",text:"is not in"},{op:"bw",text:"begins with"},{op:"bn",text:"does not begin with"},{op:"ew",text:"ends with"},{op:"en",text:"does not end with"},{op:"cn",text:"contains"},{op:"nc",text:"does not contain"}],matchText:"match",rulesText:"rules",resetText:"Reset",searchText:"Search",stringResult:true,windowTitle:"Search Rules",ajaxSelectOptions:{}};(function($){$.formatCurrency={};$.formatCurrency.regions=[];$.formatCurrency.regions['']={symbol:'$',positiveFormat:'%s%n',negativeFormat:'(%s%n)',decimalSymbol:'.',digitGroupSymbol:',',groupDigits:true};$.fn.formatCurrency=function(destination,settings){if(arguments.length==1&&typeof destination!=="string"){settings=destination;destination=false;}
var defaults={name:"formatCurrency",colorize:false,region:'',global:true,roundToDecimalPlace:2,eventOnDecimalsEntered:false};defaults=$.extend(defaults,$.formatCurrency.regions['']);settings=$.extend(defaults,settings);if(settings.region.length>0){settings=$.extend(settings,getRegionOrCulture(settings.region));}
settings.regex=generateRegex(settings);return this.each(function(){$this=$(this);var num='0';num=$this[$this.is('input, select, textarea')?'val':'html']();if(num.search('\\(')>=0){num='-'+num;}
if(num===''||(num==='-'&&settings.roundToDecimalPlace===-1)){return;}
if(isNaN(num)){num=num.replace(settings.regex,'');if(num===''||(num==='-'&&settings.roundToDecimalPlace===-1)){return;}
if(settings.decimalSymbol!='.'){num=num.replace(settings.decimalSymbol,'.');}
if(isNaN(num)){num='0';}}
var numParts=String(num).split('.');var isPositive=(num==Math.abs(num));var hasDecimals=(numParts.length>1);var decimals=(hasDecimals?numParts[1].toString():'0');var originalDecimals=decimals;num=Math.abs(numParts[0]);num=isNaN(num)?0:num;if(settings.roundToDecimalPlace>=0){decimals=parseFloat('1.'+decimals);decimals=decimals.toFixed(settings.roundToDecimalPlace);if(decimals.substring(0,1)=='2'){num=Number(num)+1;}
decimals=decimals.substring(2);}
num=String(num);if(settings.groupDigits){for(var i=0;i<Math.floor((num.length-(1+i))/3);i++){num=num.substring(0,num.length-(4*i+3))+settings.digitGroupSymbol+num.substring(num.length-(4*i+3));}}
if((hasDecimals&&settings.roundToDecimalPlace==-1)||settings.roundToDecimalPlace>0){num+=settings.decimalSymbol+decimals;}
var format=isPositive?settings.positiveFormat:settings.negativeFormat;var money=format.replace(/%s/g,settings.symbol);money=money.replace(/%n/g,num);var $destination=$([]);if(!destination){$destination=$this;}else{$destination=$(destination);}
$destination[$destination.is('input, select, textarea')?'val':'html'](money);if(hasDecimals&&settings.eventOnDecimalsEntered&&originalDecimals.length>settings.roundToDecimalPlace){$destination.trigger('decimalsEntered',originalDecimals);}
if(settings.colorize){$destination.css('color',isPositive?'black':'red');}});};$.fn.toNumber=function(settings){var defaults=$.extend({name:"toNumber",region:'',global:true},$.formatCurrency.regions['']);settings=jQuery.extend(defaults,settings);if(settings.region.length>0){settings=$.extend(settings,getRegionOrCulture(settings.region));}
settings.regex=generateRegex(settings);return this.each(function(){var method=$(this).is('input, select, textarea')?'val':'html';$(this)[method]($(this)[method]().replace('(','(-').replace(settings.regex,''));});};$.fn.asNumber=function(settings){var defaults=$.extend({name:"asNumber",region:'',parse:true,parseType:'Float',global:true},$.formatCurrency.regions['']);settings=jQuery.extend(defaults,settings);if(settings.region.length>0){settings=$.extend(settings,getRegionOrCulture(settings.region));}
settings.regex=generateRegex(settings);settings.parseType=validateParseType(settings.parseType);var method=$(this).is('input, select, textarea')?'val':'html';var num=$(this)[method]();num=num?num:"";num=num.replace('(','(-');num=num.replace(settings.regex,'');if(!settings.parse){return num;}
if(num.length==0){num='0';}
if(settings.decimalSymbol!='.'){num=num.replace(settings.decimalSymbol,'.');}
return window['parse'+settings.parseType](num);};function getRegionOrCulture(region){var regionInfo=$.formatCurrency.regions[region];if(regionInfo){return regionInfo;}
else{if(/(\w+)-(\w+)/g.test(region)){var culture=region.replace(/(\w+)-(\w+)/g,"$1");return $.formatCurrency.regions[culture];}}
return null;}
function validateParseType(parseType){switch(parseType.toLowerCase()){case'int':return'Int';case'float':return'Float';default:throw'invalid parseType';}}
function generateRegex(settings){if(settings.symbol===''){return new RegExp("[^\\d"+settings.decimalSymbol+"-]","g");}
else{var symbol=settings.symbol.replace('$','\\$').replace('.','\\.');return new RegExp(symbol+"|[^\\d"+settings.decimalSymbol+"-]","g");}}})(jQuery);(function($){var methods={collect:function(enumerable,callback){var result=[];$.each(enumerable,function(index){result.push(callback.call(this,index));});return result;},inject:function(enumerable,initialValue,callback){var accumulator=initialValue;$.each(enumerable,function(index){accumulator=callback.call(this,accumulator,index);});return accumulator;},select:function(enumerable,callback){var result=[];$.each(enumerable,function(index){if(callback.call(this,index))
result.push(this);});return result;},reject:function(enumerable,callback){return $.select(enumerable,negate(callback));},any:function(enumerable,callback){return $.inject(enumerable,false,function(accumulator,index){return accumulator||callback.call(this,index);});},all:function(enumerable,callback){return $.inject(enumerable,true,function(accumulator,index){return accumulator&&callback.call(this,index);});},sum:function(enumerable){return $.inject(enumerable,0,function(accumulator){return accumulator+this;});}};var staticFunctions={};var iteratorFunctions={};$.each(methods,function(name,f){staticFunctions[name]=makeStaticFunction(f);iteratorFunctions[name]=makeIteratorFunction(staticFunctions[name]);});$.extend(staticFunctions);$.fn.extend(iteratorFunctions);function makeStaticFunction(f){return function(){if(arguments.length>1)
validateCallback(arguments[arguments.length-1]);var r=f.apply(this,arguments);if($.isArray(r)){return $(r);}else{return r;}};};function makeIteratorFunction(staticFunction){return function(){function toArray(){var result=[];for(var i=0;i<this.length;i++)
result.push(this[i]);return(result);}
return staticFunction.apply(this,[this].concat(toArray.apply(arguments)));};};function validateCallback(callback){if(!jQuery.isFunction(callback))
throw("callback needs to be a function, it was: "+callback);};function negate(f){return function(){return!f.apply(this,arguments);};};})(jQuery);(function($){$.fn.chainedSelect=function(options){var settings=$.extend({},$.fn.chainedSelect.defaults,options);var cache;if(settings.globalCache){if(typeof $.fn.chainedSelect._globalCache=="undefined"){$.fn.chainedSelect._globalCache=settings.cacheClass(settings);}
cache=$.fn.chainedSelect._globalCache;}else{cache=settings.cacheClass(settings);}
return this.each(function(){var $$=$(this);var opts=$.metadata?$.extend({},settings,$$.metadata()):settings;var showPreloader,hidePreloader;if(opts.preloadUrl){opts.preloader=$('<img />').css({position:'absolute',border:'none',display:'none'}).attr('src',opts.preloadUrl);$$.after(opts.preloader);showPreloader=function(){opts.preloader.css({left:$$.position().left+$$.outerWidth()+5,top:$$.position().top+($$.outerHeight()/2)-8}).show();};hidePreloader=function(){opts.preloader.hide();};}else{showPreloader=hidePreloader=function(){};}
if(!(opts.parent instanceof $))opts.parent=$(opts.parent);opts.parent.change(function(){var param=$(this).val();$$.attr('disabled','disabled');var key=getCacheKey($$,opts,param);var data=cache.getItem(key);if(data){addOptions($$,opts,data);$$.effect("highlight",{},1000);}else{showPreloader();$.ajax({url:opts.url,data:{'q':param},type:(opts.type||'get'),dataType:'json',global:false,success:function(data){addOptions($$,opts,data);hidePreloader();cache.setItem(key,data);},error:function(xhr,msg,e){if(opts.error)opts.error(xhr,msg,e);}});}});var parent_val=opts.parent.val();if(parent_val){if(opts.initialLoad){opts.parent.trigger('change');}else{var row={};cache.setItem(getCacheKey($$,opts,parent_val),$$.children('option').map(function(i,e){row={};row[opts.value]=$(e).val();row[opts.label]=$(e).text();$.each($(e.attributes),function(j){if(e.attributes[j].name.indexOf('data-')==0){row[e.attributes[j].name.substr(5)]=e.attributes[j].value;}});return row;}).get());}}});};function getCacheKey(target,opts,param){var key;if(opts.cacheKey){key=opts.cacheKey+'::'+param;}else{key=target.attr('id')+'::'+param;}
return key;};function addOptions(target,opts,data){var curValue=target.val();target.empty();for(i=0;i<data.length;i++){var value,label,opt,temp;if(typeof data[i]=='object'){value=data[i][opts.value];label=data[i][opts.label];}else{value=label=data[i];}
target.get(0).options[i]=new Option(label,value);if(typeof data[i]=='object'){opt=$(target.get(0).options[i]);for(name in data[i]){if(name!=opts.value&&name!=opts.label){opt.attr('data-'+name,data[i][name]);}}}}
if(curValue&&$.inArray(curValue,target.find('option').map(function(){return $(this).val();}).get())!=-1){target.val(curValue);}else{target.find('option:first').attr('selected','selected');}
target.attr('disabled','').trigger('change');opts.success(data);}
$.fn.chainedSelect.Cache=function(opts){var cache={},keys=[];return{getItem:function(key){if(key in cache)return cache[key];else return null;},setItem:function(key,value){if(value){cache[key]=value;var length=keys.push(key);if(length>opts.cacheLength){delete cache[keys.shift()];}}},clear:function(){cache={};keys=[];}};};$.fn.chainedSelect.defaults={value:'pk',label:'name',preloadUrl:'',globalCache:false,cacheClass:$.fn.chainedSelect.Cache,cacheLength:100,cacheKey:false,error:null,initialLoad:true,success:jQuery.noop};})(jQuery);;(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}
break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}
break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}
break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}
break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){event.preventDefault();blockSubmit=true;return false;}
break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if($.trim(data[i].result.toLowerCase())==$.trim(q.toLowerCase())){result=data[i];break;}}}
if(typeof fn=="function")fn(result);else $input.trigger("result",result&&[result.data,result.value]);}
$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data"in arguments[1])
cache.populate();}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete");});function selectCurrent(){var selected=select.selected();if(!selected)
return false;var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){v=words.slice(0,words.length-1).join(options.multipleSeparator)+options.multipleSeparator+v;}
v+=options.multipleSeparator;}
$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}
function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}
var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue)
return;previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase)
currentValue=currentValue.toLowerCase();request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}};function trimWords(value){if(!value){return[""];}
var words=value.split(options.multipleSeparator);var result=[];$.each(words,function(i,value){if($.trim(value))
result[i]=$.trim(value);});return result;}
function lastWord(value){if(!options.multiple)
return value;var words=trimWords(value);return words[words.length-1];}
function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length);}};function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);};function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}
else
$input.val("");}});}
if(wasVisible)
$.Autocompleter.Selection(input,input.value.length,input.value.length);};function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}};function request(term,success,failure){if(!options.matchCase)
term=term.toLowerCase();var data=cache.load(term);if(data&&data.length){success(term,data);}else if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed);}});}else{select.emptyList();failure(term);}};function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}
return parsed;};function stopLoading(){$input.removeClass(options.loadingClass);};};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)
s=s.toLowerCase();var i=s.indexOf(sub);if(i==-1)return false;return i==0||options.matchContains;};function add(q,value){if(length>options.cacheLength){flush();}
if(!data[q]){length++;}
data[q]=value;}
function populate(){if(!options.data)return false;var stMatchSets={},nullData=0;if(!options.url)options.cacheLength=1;stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false)
continue;var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar])
stMatchSets[firstChar]=[];var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}};$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}
setTimeout(populate,25);function flush(){data={};length=0;}
return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)
return null;if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}
return csub;}else
if(data[q]){return data[q];}else
if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}
return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit)
return;element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=='LI'){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)
element.css("width",options.width);needsInit=false;}
function target(event){var element=event.target;while(element&&element.tagName!="LI")
element=element.parentNode;if(!element)
return[];return element;}
function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else if(offset<list.scrollTop()){list.scrollTop(offset);}}};function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else if(active>=listItems.size()){active=0;}}
function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}
function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i])
continue;var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false)
continue;var li=$("<li/>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}
listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}
if($.fn.bgiframe)
list.bgiframe();}
return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();var results_top=offset.top+input.offsetHeight;element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width(),top:results_top,left:offset.left}).show();if(options.scroll){list.scrollTop(0);list.css({maxHeight:options.scrollHeight,overflow:'auto'});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}
var element_height=parseInt(element.css("height"));if(results_top+element_height>$(window).height()){results_top=offset.top-element_height;}
element.css({top:results_top}).show();},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},emptyList:function(){list&&list.empty();},unbind:function(){element&&element.remove();}};};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}else if(field.setSelectionRange){field.setSelectionRange(start,end);}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end;}}
field.focus();};})(jQuery);var IMAGE_LOADER_URL="/images/spinner.gif";jQuery.fn.selected_attr=function(){var sel=$('option:selected',this);return sel.attr.apply(sel,arguments);};jQuery.fn.obj=function(object){var that=jQuery(this);return that.data.call(that,'plugin.obj',object);};jQuery.fn.html_highlight=function(string,options,speed){if(typeof options=="undefined"){options={};}
if(typeof speed=="undefined"){speed=600;}
if(this.html()!=string){this.html(string);this.effect("highlight",options,speed);}};jQuery.fn.html_highlight_error=function(){this.html_highlight("Error!",{color:"red",easing:"easeInCubic"},1500);};jQuery.dollars=function(amt){var num=Math.floor($.round_two(amt));var decimals=$.round_two(amt-num).toFixed(2).substring(1,4);num=String(num);for(var i=0;i<Math.floor((num.length-(1+i))/3);i++){num=num.substring(0,num.length-(4*i+3))+","+num.substring(num.length-(4*i+3));}
return"$"+num+decimals;};jQuery.round_two=function(amt){return Math.round(amt*100)/100;};jQuery(function($){$('.stripeMe tr:even').addClass('alt');$('.tabs').tabs();$('.tooltip').tipTip();$(".togglebox").toggleboxes();$(".closed_togglebox").toggleboxes({active:false});$("input.datepicker").datepicker();$('input.quicksearch, input.helpertext').each(function(){var input=$(this);input.data('original_value',input.val());input.blur(function(e){if(input.val()==""){$(e.target).val(input.data('original_value'));}
$(e.target).removeClass('focused');});input.focus(function(e){if(input.val()==input.data('original_value')){$(e.target).val("");}
$(e.target).addClass('focused');});});$('input.autocomplete').each(function(){var input=$(this);var mustMatch=1;if(input.hasClass('quicksearch')){mustMatch=0;}
if(input.attr('data_must_match')=="false"){mustMatch=0;}
if(typeof input.attr('data_update')=='string'){input.result(function(event,data,formatted){$(input.attr('data_update')).val(data[0].split(" --- ")[1]);if(input.val()==""){$(input.attr('data_update')).val("");}});input.change(function(){if(input.val()==""){$(input.attr('data_update')).val("");}});}
if(typeof input.attr('success_url')=='string'){input.result(function(event,data,formatted){var auto_url=input.attr('success_url')+"/"+data[0].split(" --- ")[1];if(typeof input.attr('success_update')=='string'){$(input.attr('success_update')).html("<image src='"+IMAGE_LOADER_URL+"'>");$(input.attr('success_update')).load(auto_url);}else{window.location=auto_url;}});}
var extras={};if(typeof input.attr('data_scoped_by')=="string"){extras.scope=function(){return $(input.attr('data_scoped_by')).val();};}
var cache_length=$.Autocompleter.defaults.cacheLength;if(typeof input.attr('data_no_cache')=="string"||typeof input.attr('data_scoped_by')=="string"){cache_length=0;}
input.autocomplete(input.attr('autocomplete_url'),{matchContains:1,mustMatch:mustMatch,selectFirst:1,removeInitialValue:0,formatItem:function(data,i,n,value){return value.split(" --- ")[0];},formatMatch:function(data,i,n,value){return value.split(" --- ")[0];},formatResult:function(data,value){return value.split(" --- ")[0];},extraParams:extras,cacheLength:cache_length});});$('select.actions').each(function(){$(this).change(function(){if(this.selectedIndex!==0){window.location.href=$(this).val();}});});var selects=['contact_address_attributes','business_address_attributes'];$.each(selects,function(i,select){$('#'+select+'_state').chainedSelect({parent:'#'+select+'_country',url:'/states/',value:'id',label:'text'});});$('.currency').formatCurrency();$('.long_currency').formatCurrency({roundToDecimalPlace:5});$('input.currency').live('blur',function(){$(this).formatCurrency();});$('input.long_currency').live('blur',function(){$(this).formatCurrency({roundToDecimalPlace:5});});$('form').live('submit',function(e){$('.currency, .long_currency',this).toNumber();return true;});var tracked_forms=$('form:not(.no_change_track):not(.no_submit)');var catcher=function(){var changed=false;tracked_forms.each(function(){if($(this).data('initialForm')!=$(this).serialize()){changed=true;$(this).addClass('changed');}else{$(this).removeClass('changed');}});if(changed){return"One or more forms have changed! If you leave this page, your changes won't be saved. Are you sure you want to leave?";}};tracked_forms.each(function(){$(this).data('initialForm',$(this).serialize());}).submit(function(e){var formEl=this;var changed=false;tracked_forms.each(function(){if(this!=formEl&&$(this).data('initialForm')!=$(this).serialize()){changed=true;$(this).addClass('changed');}else{$(this).removeClass('changed');}});if(changed&&!confirm('Another form has been changed.  If you leave this page, your changes won\'t be saved. Are you sure you want to leave?')){e.preventDefault();}else{$(window).unbind('beforeunload',catcher);};});$(window).bind('beforeunload',catcher);$("form.no_submit").submit(function(e){e.preventDefault();});$("#menu").toggleboxes({navigation:true,icons:false});});jQuery(function($){var container=$('#added_work_orders');if(container.length>0){var added_items={};var parent=$("#work_order_picker");var child=$('#work_order_item_picker');var add_button=$('#add_work_order');var interactive=child.add(add_button);function getSelectedDetails(){return[parent.val(),child.val()];};function getSelectedSlug(){return getSelectedDetails().join('_');};parent.change(function(){interactive.attr('disabled','disabled');});child.chainedSelect({parent:parent,preloadUrl:IMAGE_LOADER_URL,value:'id',label:'text',url:'/work_orders/quote_items',initialLoad:false}).change(function(){interactive.removeAttr('disabled');});var quote_item_index=0;var add_floaty=$("#add_floaty");add_button.click(function(e){if(!(getSelectedSlug()in added_items)){var wo_container="work_order_"+parent.val();var cont=$("#"+wo_container,container);if(cont.length==0){cont=$("<div id=\""+wo_container+"\"><h2>"+$(':selected',parent).text()+"</h2></div>").appendTo(container);}
var load_into=$("<div id=\""+getSelectedSlug()+"\"><h3>"+$(':selected',child).text()+" Loading ... </h3></div>").appendTo(cont);jQuery.ajax({url:'/work_orders/'+parent.val()+'/end_of_day_reports/'+child.val(),type:"GET",dataType:"html",complete:function(res,status){if(status==="success"||status==="notmodified"){load_into.html(jQuery("<div />").append(res.responseText.replace(/NEW_RECORD/g,quote_item_index)).find(".end_of_day"));quote_item_index=quote_item_index+1;add_floaty.position({my:"top",at:"bottom",of:"#add_new_destination"});}}});added_items[getSelectedSlug()]=true;}});$('input.completion').live('change',function(e){var avail=parseFloat($(this).parent().prev()[0].innerHTML);var cons=parseFloat($(this).val());var v=avail-cons;var display=v<0?0:v;$(this).parent().next().html_highlight($.round_two(display));});$('input.added_completion').live('change',function(e){var already_cons=parseFloat($(this).parent().prev()[0].innerHTML);var today_cons=parseFloat($(this).val());var v=(already_cons+today_cons);var avail=parseFloat($(this).parent().prev().prev()[0].innerHTML);if(avail>0){var display=avail-v<0?0:avail-v;$(this).parent().next().html_highlight($.round_two(display));}
$(this).next().val(v);var desc=$(this).parent().parent().next();if(today_cons>0){desc.show();}else{desc.hide();}});$('input.total_contributor').live('change',function(e){total=$('input.total_contributor').inject(0,function(sum){if($(this).val()!=""){sum+=parseFloat($(this).val());}
return sum;});});}});jQuery.fn.deleteSize=function(link){this.each(function(){jQuery('.size_form',this).toggleClass("hide");if($(this).data('deleted')){$('input.destroy_size',this).val(0);$(this).data('deleted',false);$(link).html("Delete");}else{$('input.destroy_size',this).val(1);$(this).data('deleted',true);var str="Undelete "+$('.size_name input',this).val();$(link).html(str);}});};jQuery(function($){$('.delete_size').live('click',function(e){$(this).parent().deleteSize(this);});$('.add_size').click(function(e){e.preventDefault();var index=parseInt($('.inplay .size:last .size_name input').attr('name').replace(/[^0-9]/g,''),10);var template=$('<div class="size"></div>').html($('#size_form_template form .size').clone());template=template.html().replace(/NEW_RECORD/g,index+1);$(this).parent().before(template);});$('.product_type_changer').change(function(e){var amount_text="Weight";var amount_suffix="lbs";var name=$(this).val();if(name=="SheetProduct"){amount_text="Weight per sq ft";amount_suffix="lbs/sq ft";}else if(name=="LengthProduct"){amount_text="Weight per ft";amount_suffix="lbs/ft";}else if(name=="UnitProduct"){amount_text="Cost per Unit";amount_suffix="$";};$(".product_amount_title").html(amount_text);$(".product_amount_suffix").html(amount_suffix);}).trigger('change');});(function($){$.markupFunctions={markupPercentage:function(){return parseFloat(this.markup_input.val());},calcMarkupMultiplier:function(){return(this.markupPercentage()/100)+1;}};$.lineItem=function(){};$.lineItem.prototype=$.extend({},$.markupFunctions,{ensureUISet:function(){this.interactive_elements.each(function(){if($(this).val()==''){$(this).val(0);}});},setUIState:function(state){if(state){this.interactive_elements.removeAttr('disabled');}else{this.interactive_elements.attr('disabled','disabled');}},destroy:function(e){e.preventDefault();this.$$.hide();this.destroy_input.val(1);this.$$.trigger('total_change');}});$.productLineItem=function(elem,parent){if(this===window){return new $.productLineItem(elem);}
var $$=$(elem);this.$$=$$;if($$.obj()!=null){return true;}
$$.obj(this);this.parent_quote_item=parent;this.root_cat_select=$("select[name='product_root_categories']",$$);this.child_cat_select=$("select[name='product_child_categories']",$$);this.product_select=$("select[name='product_name']",$$);this.product_id_input=$(".line_item_product_id",$$);this.product_size_select=$("select[name='product_size']",$$);this.product_size_id_input=$(".line_item_product_size_id",$$);this.amount_needed_input=$(".line_item_amount_needed",$$);this.amount_suffixes=$(".amount_suffix",$$);this.dimension_selects=$(".dimension_select",$$);this.sheet_dimension_select=$("select[name='sheet_product_dimensions']",$$);this.length_dimension_select=$("select[name='length_product_dimensions']",$$);this.unit_dimension_select=$("select[name='unit_product_dimensions']",$$);this.irregular_dimension_input=$("input[name='irregular_dimension']",$$);this.irregular_dimension_link=$("a[href='#irregular_dimension']",$$);this.active_dimension_select=this.sheet_dimension_select;this.dimension_input=$(".line_item_dimension",$$);this.previous_product_type="";this.finish_select=$(".line_item_finish",$$);this.grade_select=$(".line_item_grade",$$);this.calc_order_quantity=$(".calc_order",$$);this.real_order_quantity_input=$(".line_item_real_order_quantity",$$);this.cost_per_pound_input=$("input.line_item_cost_per_pound",$$);this.unit_weight=$(".unit_weight",$$);this.total_weight=$(".total_weight",$$);this.unit_cost=$(".unit_cost",$$);this.piece_cost=$(".piece_cost",$$);this.markup_input=$(".line_item_markup",$$);this.total_cost=$(".total_cost",$$);this.total_cost_integer=0;this.destroy_input=$(".destroy_product_line_item",$$);this.destroy_link=$("a.remove_product_line_item",$$);this.interactive_elements=this.root_cat_select.add(this.child_cat_select).add(this.product_select).add(this.product_size_select).add(this.cost_per_pound_input).add(this.amount_needed_input).add(this.real_order_quantity_input).add(this.dimension_selects).add(this.grade_select).add(this.finish_select).add(this.markup_input);this.root_cat_select.change($.proxy(function(){this.setDefaultCostPerPound();this.setUIState(false);},this));this.child_cat_select.chainedSelect({parent:this.root_cat_select,value:'id',label:'text',url:'/product_categories/subcategories',globalCache:true,cacheKey:'sub_categories',initialLoad:false}).change($.proxy(function(e){this.setUIState(false);},this));this.product_select.chainedSelect({parent:this.child_cat_select,value:'id',label:'text',url:'/products/in_category',globalCache:true,cacheKey:'product_name',initialLoad:false}).change($.proxy(this,"productChange"));this.product_size_select.chainedSelect({parent:this.product_select,value:'id',label:'text',url:'/products/sizes_for_product',globalCache:true,cacheKey:'product_sizes',initialLoad:false}).change($.proxy(this,"productSizeChange"));if(this.cost_per_pound_input.val()==""||this.cost_per_pound_input.asNumber()==0){this.setDefaultCostPerPound();}
this.productChange(null,true);this.dimension_selects.change($.proxy(this,"dimensionChange"));this.dimension_selects.add(this.amount_needed_input).change($.proxy(this,'updateQuantity'));this.irregular_dimension_input.change($.proxy(this,'irregularDimensionChange'));this.irregular_dimension_link.click($.proxy(this,'activateIrregularDimension'));this.markup_input.add(this.real_order_quantity_input).add(this.cost_per_pound_input).change($.proxy(this,'updateTotal'));this.destroy_link.click($.proxy(this,'destroy'));this.setUIState(true);this.previous_product_type=this.productType();this.productSizeChange();return this;};$.productLineItem.prototype=$.extend({},$.lineItem.prototype,{productChange:function(e,first){this.product_id_input.val(this.product_select.val());if(first&&this.productType()=="UnitProduct"){this.dimension_input.val("1");}
this.setActiveDimension(first);this.dimensionChange();this.displayExtrasSelect();this.setUIState(false);this.previous_product_type=this.productType();},productSizeChange:function(e){this.product_size_id_input.val(this.product_size_select.val());this.unit_weight.html_highlight(this.unitWeight().toFixed(5)+" lbs / "+this.unitSuffix());this.updateQuantity();},dimensionChange:function(){if(this.active_dimension_select!=this.irregular_dimension_input){this.dimension_input.val($("option:selected",this.active_dimension_select).html());}else{this.dimension_input.val(this.active_dimension_select.val());}},activateIrregularDimension:function(e){e.preventDefault();this.dimension_selects.hide();this.irregular_dimension_input.val(0);this.active_dimension_select=this.irregular_dimension_input;this.active_dimension_select.show();this.irregular_dimension_link.hide();},irregularDimensionChange:function(e){this.dimensionChange();this.setActiveDimension(true);},unitSuffix:function(){return this.active_dimension_select.attr('data-suffix');},setActiveDimension:function(initialize){this.dimension_selects.hide();var type=this.productType();var actual_text=this.dimension_input.val();var default_selection='1';if(type=='SheetProduct'){this.active_dimension_select=this.sheet_dimension_select;default_selection=DEFAULT_SHEET_PRODUCT_DIMENSION;}else if(type=='LengthProduct'){this.active_dimension_select=this.length_dimension_select;default_selection=DEFAULT_LENGTH_PRODUCT_DIMENSION;}else if(type=='UnitProduct'){this.active_dimension_select=this.unit_dimension_select;default_selection='1';}
this.amount_suffixes.html(this.unitSuffix());if(initialize){if($("option",this.active_dimension_select).any(function(){return $(this).text()==actual_text;})){$("option[text='"+actual_text+"']",this.active_dimension_select).attr("selected","selected");this.irregular_dimension_link.show();}else{this.active_dimension_select=this.irregular_dimension_input;this.irregular_dimension_link.hide();}}else{if(type==this.previous_product_type){$("option[text='"+actual_text+"']",this.active_dimension_select).attr("selected","selected");}else{$("option[text='"+default_selection+"']",this.active_dimension_select).attr("selected","selected");}}
this.active_dimension_select.show();},productType:function(){return this.product_select.selected_attr('data-type');},productHasGrade:function(){return this.product_select.selected_attr('data-grade')==="true";},productHasFinish:function(){return this.product_select.selected_attr('data-finish')==="true";},displayExtrasSelect:function(){if(this.productHasGrade()){this.grade_select.show();}else{this.grade_select.hide();}
if(this.productHasFinish()){this.finish_select.show();}else{this.finish_select.hide();}},setDefaultCostPerPound:function(){this.cost_per_pound_input.val(this.root_cat_select.selected_attr('data-cost-per-pound')).trigger('blur');},unitWeight:function(){return parseFloat(this.product_size_select.selected_attr('data-amount'));},costPerPound:function(){return this.cost_per_pound_input.asNumber();},amountNeeded:function(){return parseFloat(this.amount_needed_input.val());},orderQuantity:function(){return parseFloat(this.real_order_quantity_input.val());},pieceDimension:function(){if(this.active_dimension_select!=this.irregular_dimension_input){return parseFloat(this.active_dimension_select.val());}else{var type=this.productType();if(type=='SheetProduct'){var strs=this.active_dimension_select.val().split('x',2);if(strs.length==2){strs=$(strs).map(function(){return this.replace(/[^0-9]/,"");});return parseFloat(strs[0])*parseFloat(strs[1]);}else{return NaN;}}else if(type=='LengthProduct'||type=='UnitProduct'){return parseFloat(this.active_dimension_select.val());}
return NaN;}},calcOrderQuantity:function(){return(this.amountNeeded()/this.pieceDimension());},calcTotalWeight:function(){return this.unitWeight()*this.pieceDimension()*this.orderQuantity();},calcUnitCost:function(){return this.unitWeight()*this.costPerPound();},calcPieceCost:function(){return this.calcUnitCost()*this.pieceDimension();},calcOrderCost:function(){return(this.orderQuantity()*this.calcPieceCost())*this.calcMarkupMultiplier();},updateUnitCost:function(e){this.unit_cost.html_highlight($.dollars(this.calcUnitCost()));},updatePieceCost:function(e){this.piece_cost.html_highlight($.dollars(this.calcPieceCost()));},updateTotalWeight:function(e){this.total_weight.html_highlight($.round_two(this.calcTotalWeight())+" lbs");},updateQuantity:function(e){this.ensureUISet();var amt=this.amountNeeded();this.amount_needed_input.val(amt);if(!(amt>=0)){this.amount_needed_input.val(0);}
var calc=this.calcOrderQuantity();if(typeof calc=='number'&&!isNaN(calc)){this.calc_order_quantity.html_highlight(calc.toFixed(5));this.real_order_quantity_input.val(calc.toFixed(5));this.updateTotal(e);}else{this.calc_order_quantity.html_highlight_error();}},updateTotal:function(e){this.updateUnitCost(e);this.updatePieceCost(e);this.updateTotalWeight(e);this.total_cost_integer=this.calcOrderCost();if(typeof this.total_cost_integer=='number'&&!isNaN(this.total_cost_integer)){this.total_cost.html_highlight($.dollars(this.total_cost_integer));this.$$.trigger('materials_total_change');}else{this.total_cost.html_highlight_error();}
this.setUIState(true);},pieceIdentifier:function(){this.ensureUISet();return this.product_id_input.val()+"_"+this.product_size_id_input.val()+"_"+this.active_dimension_select.val();},pieceSummary:function(){return{name:'<a href="/products/'+this.product_select.val()+'">'+$(':selected',this.product_select).text()+'</a>',size:$(':selected',this.product_size_select).text(),dimension:this.dimension_input.val()+" "+this.unitSuffix(),amount_needed:this.amount_needed_input.val(),quantity:this.real_order_quantity_input.val(),cost:this.total_cost_integer,item:this.parent_quote_item.name_input.val(),weight:this.calcTotalWeight()};}});$.fn.productLineItemize=function(parent){return this.each(function(){new $.productLineItem(this,parent);});};$.labourLineItem=function(elem,parent){if(this===window){return new $.quoteItem(elem);}
var $$=$(elem);this.$$=$$;if($$.obj()!=null){return true;}
$$.obj(this);this.parent_quote_item=parent;this.workers_input=$('.line_item_workers',$$);this.setup_time_input=$('.line_item_setup_time',$$);this.run_time_input=$('.line_item_run_time',$$);this.hourly_rate_input=$('.line_item_hourly_rate',$$);this.calc_total_time=$(".calc_time",$$);this.markup_input=$(".line_item_markup",$$);this.total_cost=$(".total_cost",$$);this.total_cost_integer=0;this.destroy_input=$(".destroy_labour_line_item",$$);this.destroy_link=$("a.remove_labour_line_item",$$);this.hourly_rate_input.formatCurrency();this.interactive_elements=this.workers_input.add(this.setup_time_input).add(this.run_time_input).add(this.hourly_rate_input).add(this.markup_input);this.interactive_elements.change($.proxy(this,'updateTotal'));this.destroy_link.click($.proxy(this,'destroy'));this.updateTotal();return this;};$.labourLineItem.prototype=$.extend({},$.lineItem.prototype,{workers:function(){return parseFloat(this.workers_input.val());},hourlyRate:function(){return this.hourly_rate_input.asNumber();},calcWorkerHours:function(){return(parseFloat(this.run_time_input.val()))/60;},calcTotalTime:function(){return(this.workers()*this.calcWorkerHours())+(parseFloat(this.setup_time_input.val())/60);},calcTotalCost:function(){return(this.calcTotalTime()*this.hourlyRate())*this.calcMarkupMultiplier();},updateQuantity:function(e){this.calc_total_time.html_highlight($.round_two(this.calcTotalTime()));},updateTotal:function(e){this.setUIState(false);this.ensureUISet();this.updateQuantity(e);this.total_cost_integer=this.calcTotalCost();if(typeof this.total_cost_integer=='number'&&!isNaN(this.total_cost_integer)){this.total_cost.html_highlight($.dollars(this.total_cost_integer));this.$$.trigger('labour_total_change');}else{this.total_cost.html_highlight_error();}
this.setUIState(true);return true;},pieceIdentifier:function(){this.ensureUISet();return this.hourlyRate();},pieceSummary:function(){return{hourly_rate:this.hourlyRate(),hours:this.calcTotalTime(),cost:this.calcTotalCost(),item:this.parent_quote_item.name_input.val()};}});$.fn.labourLineItemize=function(parent){return this.each(function(){new $.labourLineItem(this,parent);});};$.customLineItem=function(elem,parent){if(this===window){return new $.productLineItem(elem);}
var $$=$(elem);this.$$=$$;if($$.obj()!=null){return true;}
$$.obj(this);this.parent_quote_item=parent;this.custom_name_input=$(".line_item_name",$$);this.real_order_quantity_input=$(".line_item_real_order_quantity",$$);this.cost_per_piece_input=$("input.line_item_cost_per_piece",$$);this.markup_input=$(".line_item_markup",$$);this.total_cost=$(".total_cost",$$);this.destroy_input=$(".destroy_custom_line_item",$$);this.destroy_link=$("a.remove_custom_line_item",$$);this.interactive_elements=this.custom_name_input.add(this.cost_per_piece_input).add(this.real_order_quantity_input).add(this.markup_input);this.interactive_elements.change($.proxy(this,'updateTotal'));this.destroy_link.click($.proxy(this,'destroy'));this.updateTotal();return this;};$.customLineItem.prototype=$.extend({},$.lineItem.prototype,{customName:function(){return this.custom_name_input.val();},costPerPiece:function(){return this.cost_per_piece_input.asNumber();},orderQuantity:function(){return parseFloat(this.real_order_quantity_input.val());},calcTotalCost:function(e){return(this.costPerPiece()*this.orderQuantity())*this.calcMarkupMultiplier();},updateTotal:function(e){this.setUIState(false);this.ensureUISet();this.total_cost_integer=this.calcTotalCost();if(typeof this.total_cost_integer=='number'&&!isNaN(this.total_cost_integer)){this.total_cost.html_highlight($.dollars(this.total_cost_integer));this.$$.trigger('custom_total_change');}else{this.total_cost.html_highlight_error();}
this.setUIState(true);},pieceIdentifier:function(){this.ensureUISet();return this.custom_name_input.val()+this.cost_per_piece_input.val();},pieceSummary:function(){return{customName:this.customName(),quantity:this.orderQuantity(),costPerPiece:this.costPerPiece(),cost:this.calcTotalCost(),item:this.parent_quote_item.name_input.val()};}});$.fn.customLineItemize=function(parent){return this.each(function(){new $.customLineItem(this,parent);});};$.quoteItem=function(elem,index){if(this===window){return new $.quoteItem(elem);}
var $$=$(elem);this.$$=$$;if($$.obj()!=null){return true;}
$$.obj(this);this.edit_div=$('.edit_quote_item',$$);this.deleted_div=$('.deleted_quote_item',$$);this.destroy_input=$('input.destroy_quote_item',$$);this.undelete_link=$('a.undelete',$$);this.add_product_line_item_link=$('a.add_product_line_item',$$);this.product_line_items_table=$('table.product_line_items',$$);this.product_line_items=this.productLineItems();this.product_template_div=$('#product_line_item_form_template');this.add_labour_line_item_link=$('a.add_labour_line_item',$$);this.labour_line_items=this.labourLineItems();this.labour_line_items_table=$('table.labour_line_items',$$);this.labour_template_div=$('#labour_line_item_form_template');this.add_custom_line_item_link=$('a.add_custom_line_item',$$);this.custom_line_items=this.customLineItems();this.custom_line_items_table=$('table.custom_line_items',$$);this.custom_template_div=$('#custom_line_item_form_template');this.products_subtotal=$('td.quote_item_products_subtotal',$$);this.labour_subtotal=$('td.quote_item_labour_subtotal',$$);this.custom_subtotal=$('td.quote_item_custom_subtotal',$$);this.hardware_markup_input=$('table.summary .hardware_markup input',$$);this.markup_input=$('table.summary .markup input',$$);this.item_subtotal=$('td.quote_item_subtotal',$$);this.subtotal_cost_integer=0;this.item_total=$('td.quote_item_total',$$);this.total_cost_integer=0;this.deleted=false;this.name_input=$('.header',$$);if(typeof $$.data('quote_item_index')=='undefined'||$$.data('quote_item_index')===''||$$.data('quote_item_index')==null){$$.data('quote_item_index',index);}
$('.remove_quote_item',$$).click($.proxy(this,'destroy'));$('.accordion',$$).accordion({autoHeight:false});this.name_input.change($.proxy(this,'nameChange')).trigger('change');this.product_line_items.productLineItemize(this);this.labour_line_items.labourLineItemize(this);this.custom_line_items.customLineItemize(this);this.add_product_line_item_link.click($.proxy(this,'addProductLineItem'));this.add_labour_line_item_link.click($.proxy(this,'addLabourLineItem'));this.add_custom_line_item_link.click($.proxy(this,'addCustomLineItem'));this.updateSummary();this.$$.bind("total_change materials_total_change labour_total_change custom_total_change",$.proxy(this,'updateSummary'));this.markup_input.add(this.hardware_markup_input).change($.proxy(function(){this.$$.trigger('total_change');},this));return this;};$.quoteItem.prototype=$.extend({},$.markupFunctions,{hardwareMarkupPercentage:function(){return parseFloat(this.hardware_markup_input.val());},calcHardwareMarkupMultiplier:function(){return(this.hardwareMarkupPercentage()/100)+1;},productLineItems:function(){return $('.product.line_item',this.$$);},labourLineItems:function(){return $('.labour.line_item',this.$$);},customLineItems:function(){return $('.custom.line_item',this.$$);},nameChange:function(e){this.undelete_link.html("Undelete "+this.name_input.val());this.$$.trigger('total_change');},destroy:function(e){var after_change=function(){$(this).trigger('total_change');};if(!this.deleted){this.deleted=true;this.destroy_input.val(1);this.edit_div.slideUp(400,after_change);this.deleted_div.show();}else{this.deleted=false;this.destroy_input.val(0);this.edit_div.slideDown(400,after_change);this.deleted_div.hide();}},addProductLineItem:function(e){e.preventDefault();var template=this.product_template_div.children(0).clone();var line_item_index=$('tr',this.product_line_items_table).length;template=$(template.html().replace(/NEW_CHILD_RECORD/g,line_item_index).replace(/NEW_PARENT_RECORD/g,this.$$.data('quote_item_index')));template.appendTo(this.product_line_items_table);template.productLineItemize(this);this.product_line_items=this.productLineItems();this.$$.trigger('materials_total_change');},addLabourLineItem:function(e){e.preventDefault();var template=this.labour_template_div.children(0).clone();var line_item_index=$('tr',this.labour_line_items_table).length;template=$(template.html().replace(/NEW_CHILD_RECORD/g,line_item_index).replace(/NEW_PARENT_RECORD/g,this.$$.data('quote_item_index')));template.appendTo(this.labour_line_items_table);template.labourLineItemize(this);this.labour_line_items=this.labourLineItems();this.$$.trigger('labour_total_change');},addCustomLineItem:function(e){e.preventDefault();var template=this.custom_template_div.children(0).clone();var line_item_index=$('tr',this.custom_line_items_table).length;template=$(template.html().replace(/NEW_CHILD_RECORD/g,line_item_index).replace(/NEW_PARENT_RECORD/g,this.$$.data('quote_item_index')));template.appendTo(this.custom_line_items_table);template.customLineItemize(this);this.custom_line_items=this.customLineItems();this.$$.trigger('custom_total_change');},activeProductLineItems:function(e){return this.product_line_items.select(function(){return $(this).is(':visible');});},activeLabourLineItems:function(e){return this.labour_line_items.select(function(){return $(this).is(':visible');});},activeCustomLineItems:function(e){return this.custom_line_items.select(function(){return $(this).is(':visible');});},updateSummary:function(e){var products_total=this.activeProductLineItems().inject(0,function(sum){sum+=$(this).obj().total_cost_integer;return sum;});var labour_total=this.activeLabourLineItems().inject(0,function(sum){sum+=$(this).obj().total_cost_integer;return sum;});var custom_total=this.activeCustomLineItems().inject(0,function(sum){sum+=$(this).obj().total_cost_integer;return sum;});this.products_subtotal.html_highlight($.dollars(products_total));this.labour_subtotal.html_highlight($.dollars(labour_total));this.custom_subtotal.html_highlight($.dollars(custom_total));this.subtotal_cost_integer=((products_total+labour_total)*this.calcHardwareMarkupMultiplier())+custom_total;this.item_subtotal.html_highlight($.dollars(this.subtotal_cost_integer));this.total_cost_integer=this.subtotal_cost_integer*this.calcMarkupMultiplier();this.item_total.html_highlight($.dollars(this.total_cost_integer));}});$.fn.quoteItemize=function(){return this.each(function(i){new $.quoteItem(this,i);});};$.quoteForm=function(elem){if(this===window){return new $.quoteForm(elem);}
var $$=$(elem);this.$$=$$;if($$.obj()!=null){return true;}
$$.obj(this);this.subtotal_cost_integer=0;this.total_cost_integer=0;this.quote_item_template_div=$('#quote_item_form_template');this.quote_items_container=$('#quote_items_container');this.quote_items=this.quoteItems();this.add_quote_item_links=$('.add_quote_item',$$);this.materials_summary_table=$('#materials_summary');this.labour_summary_table=$('#labour_summary');this.custom_summary_table=$('#custom_summary');this.cost_summary_table=$('#cost_summary');this.markup_input=$('#quote_markup',this.cost_summary_table);this.total_cost_input=$('#quote_total_cost');this.quote_items.quoteItemize();$('body').live('total_change',$.proxy(this,'updateSummaries')).live('materials_total_change',$.proxy(this,'updateMaterialsAndCostSummary')).live('labour_total_change',$.proxy(this,'updateLabourAndCostSummary')).live('custom_total_change',$.proxy(this,'updateCustomAndCostSummary'));this.add_quote_item_links.click($.proxy(this,'addQuoteItem'));this.updateSummaries();this.total_cost_input.formatCurrency();this.total_cost_input.change($.proxy(this,'totalCostInputChange'));this.markup_input.change($.proxy(this,'updateTotalCost'));$(elem).data('initialForm',$(elem).serialize());return this;};$.quoteForm.prototype=$.extend({},$.markupFunctions,{quoteItems:function(){return $(".quote_item",this.quote_items_container);},activeQuoteItems:function(){return this.quote_items.select(function(){return!$(this).obj().deleted;});},addQuoteItem:function(e){e.preventDefault();var item_index=this.quote_items.length;var template=this.quote_item_template_div.clone();template=$(template.html().replace(/NEW_RECORD/g,item_index));template.appendTo(this.quote_items_container);template.data('quote_item_index',item_index);template.quoteItemize();this.quote_items=this.quoteItems();template.obj().name_input.focus();},markupChange:function(e){this.total_cost_integer=this.total_cost_input.asNumber();var markup=(this.total_cost_integer/(this.subtotal_cost_integer||1)-1)*100;this.markup_input.val(markup);},totalCostInputChange:function(e){this.total_cost_integer=this.total_cost_input.asNumber();var markup=(this.total_cost_integer/(this.subtotal_cost_integer||1)-1)*100;this.markup_input.val(markup);return true;},updateSummaries:function(e){this.updateMaterialsSummary(e);this.updateLabourSummary(e);this.updateCustomSummary(e);this.updateCostSummary(e);},updateMaterialsAndCostSummary:function(e){this.updateMaterialsSummary(e);this.updateCostSummary(e);},updateLabourAndCostSummary:function(e){this.updateLabourSummary(e);this.updateCostSummary(e);},updateCustomAndCostSummary:function(e){this.updateCustomSummary(e);this.updateCostSummary(e);},updateCostSummary:function(e){var item_costs=this.activeQuoteItems().collect(function(){var obj=$(this).obj();return[obj.total_cost_integer,obj.name_input.val()];});this.subtotal_cost_integer=item_costs.inject(0,function(sum){sum+=this[0];return sum;});$('tr.item_cost',this.cost_summary_table).remove();var dest=$('tr:first',this.cost_summary_table);item_costs.each(function(){dest.after('<tr class="item_cost"><td>'+this[1]+"</td><td>"+$.dollars(this[0])+"</td></tr>");});$('tr.subtotal td:eq(1)',this.cost_summary_table).html($.dollars(this.subtotal_cost_integer));this.updateTotalCost(e);},updateTotalCost:function(e){this.total_cost_input.val(this.subtotal_cost_integer*this.calcMarkupMultiplier());},updateMaterialsSummary:function(e){var product_line_items=this.activeQuoteItems().inject([],function(is){return $.merge(is,$(this).obj().activeProductLineItems().get());}).collect(function(){return $(this).obj();});var products_summary=$(product_line_items).inject({},function(sum){var key=this.pieceIdentifier();var added=this.pieceSummary();if(typeof sum[key]=='undefined'){sum[key]=added;}else{sum[key].amount_needed+=added.amount_needed;sum[key].quantity+=parseFloat(added.quantity);sum[key].cost+=added.cost;sum[key].weight+=added.weight;sum[key].item+=", "+added.item;}
return sum;});var dest=this.materials_summary_table;$("tr:gt(0)",dest).remove();$.each(products_summary,function(){dest.append("<tr><td>"+[this.name,this.size,this.dimension,this.amount_needed,this.quantity,this.weight.toFixed(5)+" lbs",$.dollars(this.cost),this.item].join("</td><td>")+"</td></tr>");});},updateLabourSummary:function(e){var labour_line_items=this.activeQuoteItems().inject([],function(is){return $.merge(is,$(this).obj().activeLabourLineItems().get());}).collect(function(){return $(this).obj();});var labour_summary=$(labour_line_items).inject({},function(sum){var key=this.pieceIdentifier();var added=this.pieceSummary();if(typeof sum[key]=='undefined'){sum[key]=added;}else{sum[key].hours+=added.hours;sum[key].cost+=added.cost;sum[key].item+=", "+added.item;}
return sum;});var dest=this.labour_summary_table;$("tr:gt(0)",dest).remove();$.each(labour_summary,function(){dest.append("<tr><td>"+[$.round_two(this.hours),$.dollars(this.hourly_rate),$.dollars(this.cost),this.item].join("</td><td>")+"</td></tr>");});},updateCustomSummary:function(e){var custom_line_items=this.activeQuoteItems().inject([],function(is){return $.merge(is,$(this).obj().activeCustomLineItems().get());}).collect(function(){return $(this).obj();});var custom_summary=$(custom_line_items).inject({},function(sum){var key=this.pieceIdentifier();var added=this.pieceSummary();if(typeof sum[key]=='undefined'){sum[key]=added;}else{sum[key].quantity+=added.quantity;sum[key].cost+=added.cost;sum[key].item+=", "+added.item;}
return sum;});var dest=this.custom_summary_table;$("tr:gt(0)",dest).remove();$.each(custom_summary,function(){dest.append("<tr><td>"+[this.customName,this.quantity,$.dollars(this.costPerPiece),$.dollars(this.cost),this.item].join("</td><td>")+"</td></tr>");});}});$.fn.quoteFormize=function(){return this.each(function(){new $.quoteForm(this);});};$(document).ready(function(){$('form.in_play').quoteFormize();var fix_contact=function(){$('#quote_contact_id').val("");$('#auto_contact_name').val("");};$('#auto_business_name').change(fix_contact).result(fix_contact);$('.accordion').accordion({autoHeight:false});});})(jQuery);jQuery.fn.deleteItem=function(link){this.each(function(){jQuery('.item_form',this).toggleClass("hide");if($(this).data('deleted')){$('input.destroy_item',this).val(0);$(this).data('deleted',false);$(link).html("Delete");}else{$('input.destroy_item',this).val(1);$(this).data('deleted',true);var str="Undelete "+$('input.item_name',this).val();$(link).html(str);}});};jQuery(function($){$('.delete_item').live('click',function(e){$(this).parent().deleteItem(this);});$('.add_item').click(function(e){e.preventDefault();var item_index=$(".item",$(this).parent()).length-1;var scope_index=parseInt($(this).attr('data-scope-of-work-id'),10);var template=$('<div class="item"></div>').html($('#scope_item_form_template .item').clone());template=template.html().replace(/NEW_CHILD_RECORD/g,item_index+1).replace(/NEW_PARENT_RECORD/g,scope_index);$(this).before(template);});});jQuery.fn.orderAllCheckbox=function(watch_selector,default_container){return this.each(function(){var container;if($(this).attr('data-all-container')){container=$($(this).attr('data-all-container'));}else{if(typeof default_container=='function'){container=$.proxy(default_container,this)();}else{container=$(this).parent().parent().parent();}}
$(this).data('watched',$(watch_selector,container));$(this).data('watched').change($.proxy(function(){$(this).trigger('watch_change');},this));}).change(function(){$(this).data('watched').attr('checked',$(this).attr('checked')).trigger('change');}).bind('watch_change',function(){var all=true;$(this).data('watched').each(function(){if(!$(this).is(":checked")){all=false;}});if(all){$(this).attr("checked",true);}else{$(this).attr("checked",false);}}).trigger('watch_change');};jQuery(function($){$('.order_all').orderAllCheckbox(".ordered:checkbox");$('.stock_all').orderAllCheckbox(".stocked:checkbox");$('.schedule_all').orderAllCheckbox(".scheduled:checkbox");$('.complete_all').orderAllCheckbox(".completed:checkbox");});jQuery(function($){var go=function(pre,suf,element,params){var id=$(element).val();if(!(parseInt(id)>0)){alert("Please select something to view.");}else{var str="/"+[pre,id,suf].join("/");if(params){str+="?"+$.param(params);}
window.location=str;}};$("#prof_go").click(function(e){go("reports","profitability","#work_order_id");});$("#printable_go").click(function(e){go("quotes","printable","#quote_id");});$("#time_sheet_go").click(function(e){var params={start_date:$("#time_sheet_start_date").val(),end_date:$("#time_sheet_end_date").val()};go("reports","time_sheet","#time_sheet_user_id",params);});});